{"version":3,"sources":["webpack:///./src/app/app.component.html","webpack:///./src/app/create-project/create-project.component.html","webpack:///./src/app/metric-browser/metric-browser.component.html","webpack:///./src/app/open-data-prov/provenance-vis/open-data-provenance-vis.component.html","webpack:///./src/app/project-list/project-list.component.html","webpack:///./src/app/refine-provenance-explorer/quality-provenance-vis/quality-provenance-vis.component.html","webpack:///./src/app/refine-provenance-explorer/refine-provenance-explorer.component.html","webpack:///./src/app/refine-provenance/refine-provenance.component.html","webpack:///./src/app/shared/barchart/barchart.component.html","webpack:///./src/app/shared/metric-checks-overview/metric-checks-overview.component.html","webpack:///./src/app/shared/metric-detail-visualization/metric-detail-visualization.component.html","webpack:///./src/app/shared/metric-overview/metric-overview.component.html","webpack:///./src/app/shared/open-refine/open-refine.component.html","webpack:///./src/app/shared/quality-header-col/quality-header-col.component.html","webpack:///./src/app/shared/raw-data-table/raw-data-table.component.html","webpack:///./src/app/test/metric-preview/metric-preview.component.html","webpack:///./src/$_lazy_route_resource lazy namespace object","webpack:///./src/app/app.component.scss","webpack:///./src/app/app.component.ts","webpack:///./src/app/app.module.ts","webpack:///./src/app/create-project/create-project.component.sass","webpack:///./src/app/create-project/create-project.component.ts","webpack:///./src/app/global-nav.service.ts","webpack:///./src/app/metric-browser/metric-browser.component.sass","webpack:///./src/app/metric-browser/metric-browser.component.ts","webpack:///./src/app/open-data-prov/gitlab.service.ts","webpack:///./src/app/open-data-prov/provenance-vis/open-data-provenance-vis.component.scss","webpack:///./src/app/open-data-prov/provenance-vis/open-data-provenance-vis.component.ts","webpack:///./src/app/project-list/project-list.component.scss","webpack:///./src/app/project-list/project-list.component.ts","webpack:///./src/app/project-list/project-list.pipe.ts","webpack:///./src/app/refine-provenance-explorer/d3-sankey.js","webpack:///./src/app/refine-provenance-explorer/quality-provenance-vis/quality-provenance-vis.component.scss","webpack:///./src/app/refine-provenance-explorer/quality-provenance-vis/quality-provenance-vis.component.ts","webpack:///./src/app/refine-provenance-explorer/refine-provenance-explorer.component.scss","webpack:///./src/app/refine-provenance-explorer/refine-provenance-explorer.component.ts","webpack:///./src/app/refine-provenance/provenance-project-list.pipe.ts","webpack:///./src/app/refine-provenance/refine-provenance.component.sass","webpack:///./src/app/refine-provenance/refine-provenance.component.ts","webpack:///./src/app/shared/barchart/barchart.component.css","webpack:///./src/app/shared/barchart/barchart.component.ts","webpack:///./src/app/shared/metric-checks-overview/check-input-directive.directive.ts","webpack:///./src/app/shared/metric-checks-overview/metric-checks-overview.component.scss","webpack:///./src/app/shared/metric-checks-overview/metric-checks-overview.component.ts","webpack:///./src/app/shared/metric-detail-visualization/metric-detail-visualization.component.scss","webpack:///./src/app/shared/metric-detail-visualization/metric-detail-visualization.component.ts","webpack:///./src/app/shared/metric-overview/metric-overview.component.css","webpack:///./src/app/shared/metric-overview/metric-overview.component.ts","webpack:///./src/app/shared/open-refine/model/open-refine-project.ts","webpack:///./src/app/shared/open-refine/open-refine.component.scss","webpack:///./src/app/shared/open-refine/open-refine.component.ts","webpack:///./src/app/shared/open-refine/open-refine.service.ts","webpack:///./src/app/shared/quality-header-col/quality-header-col.component.css","webpack:///./src/app/shared/quality-header-col/quality-header-col.component.ts","webpack:///./src/app/shared/raw-data-scroll-bar-visualization/raw-data-scroll-bar-visualization.component.css","webpack:///./src/app/shared/raw-data-scroll-bar-visualization/raw-data-scroll-bar-visualization.component.ts","webpack:///./src/app/shared/raw-data-table/raw-data-table.component.scss","webpack:///./src/app/shared/raw-data-table/raw-data-table.component.ts","webpack:///./src/app/shared/span-quality-header-col/span-quality-header-col.component.css","webpack:///./src/app/shared/span-quality-header-col/span-quality-header-col.component.ts","webpack:///./src/app/test/metric-preview/metric-preview.component.sass","webpack:///./src/app/test/metric-preview/metric-preview.component.ts","webpack:///./src/environments/environment.ts","webpack:///./src/main.ts"],"names":[],"mappings":"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;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,+CAA+C,cAAc;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;;AAEA,+CAA+C,cAAc;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA,0BAA0B,aAAa,EAAE;AACzC;AACA;AACA,0BAA0B,iBAAiB,EAAE;;AAE7C;AACA;AACA;AACA,uCAAuC,OAAO;AAC9C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA,SAAS;AACT,OAAO;;AAEP;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mBAAmB,OAAO;AAC1B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,yBAAyB,QAAQ;AACjC;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP,KAAK;AACL;;AAEA;AACA;;AAEA;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","file":"main.js","sourcesContent":["module.exports = \"<nav class=\\\"navbar navbar-expand-lg navbar-toggleable-md navbar-light bg-light\\\">\\n  <a class=\\\"navbar-brand\\\" href=\\\"/list-projects\\\">MetricDoc</a>\\n  <button class=\\\"navbar-toggler navbar-toggler-right\\\" type=\\\"button\\\" data-toggle=\\\"collapse\\\" data-target=\\\"#metricdocDropdown\\\" aria-controls=\\\"metricdocDropdown\\\" aria-expanded=\\\"false\\\" aria-label=\\\"Toggle navigation\\\">\\n    <span class=\\\"navbar-toggler-icon\\\"></span>\\n  </button>\\n  <div class=\\\"collapse navbar-collapse\\\" id=\\\"metricdocDropdown\\\">\\n    <ul class=\\\"navbar-nav mr-auto\\\">\\n      <!-- <li class=\\\"nav-item\\\"\\n        [class.disabled]=\\\"!projectActive\\\">\\n        <a class=\\\"nav-link\\\" href=\\\"\\\" id=\\\"addMetric\\\" data-toggle=\\\"modal\\\" data-target=\\\"#addMetricModal\\\">Back To Project Overview</a>\\n      </li> -->\\n      <li class=\\\"nav-item dropdown\\\" *ngIf=\\\"projectId\\\">\\n        <a class=\\\"nav-link nav-item dropdown-toggle\\\" href=\\\"\\\" data-toggle=\\\"dropdown\\\" role=\\\"button\\\" aria-haspopup=\\\"true\\\" aria-expanded=\\\"false\\\">Current Project <span class=\\\"caret\\\"></span></a>\\n        <ul class=\\\"dropdown-menu\\\">\\n          <li><a class=\\\"nav-link nav-item\\\" id=\\\"addMetric\\\">Add Metric</a></li>\\n          <li><a class=\\\"nav-link nav-item\\\" id=\\\"exportMetrics\\\" (click)=\\\"onRecalculate()\\\">Recalculate All ...</a></li>\\n        </ul>\\n      </li>\\n     <li class=\\\"nav-item dropdown\\\" *ngIf=\\\"projectId\\\">\\n        <a class=\\\"nav-link nav-item dropdown-toggle\\\" href=\\\"\\\" data-toggle=\\\"dropdown\\\" role=\\\"button\\\" aria-haspopup=\\\"true\\\" aria-expanded=\\\"false\\\">Metrics Library<span class=\\\"caret\\\"></span></a>\\n        <ul class=\\\"dropdown-menu\\\">\\n          <li class=\\\"dropdown-header\\\">Import</li>\\n          <li><a class=\\\"nav-link nav-item\\\" href=\\\"\\\" id=\\\"importMetrics\\\">Import Metrics</a></li>\\n          <li><a class=\\\"nav-link nav-item\\\" href=\\\"\\\" id=\\\"importProject\\\">Import Project Settings</a></li>\\n\\n          <li class=\\\"dropdown-header\\\">Export</li>\\n          <li><a class=\\\"nav-link nav-item\\\" href=\\\"\\\" id=\\\"exportQuality\\\">Export Quality Values</a></li>\\n          <li><a class=\\\"nav-link nav-item\\\" href=\\\"\\\" id=\\\"exportMetrics\\\">Export Quality Metrics</a></li>\\n        </ul>\\n      </li>\\n      <!-- <li>\\n        <a class=\\\"nav-link\\\" href=\\\"#\\\" id=\\\"showExamples\\\" data-toggle=\\\"modal\\\" data-target=\\\"#examplesModal\\\">Metric and Check Info</a>\\n      </li> -->\\n    </ul>\\n  </div>\\n\\n</nav>\\n\\n<div class=\\\"container-fluid\\\">\\n  <div class=\\\"row\\\" style=\\\"min-height: 90vh\\\">\\n    <nav class=\\\"col-sm-3 col-md-2 hidden-xs-down bg-light sidebar\\\"\\n      [hidden]=\\\"!sidebarShown\\\">\\n      <ul class=\\\"nav nav-pills flex-column\\\" *ngIf=\\\"navbarPos\\\">\\n        <li class=\\\"nav-item\\\">\\n          <a class=\\\"nav-link\\\" href=\\\"/list-projects\\\"\\n            [class.active]=\\\"navbarPos == '/list-projects'\\\">Available Projects <span class=\\\"sr-only\\\">(current)</span></a>\\n        </li>\\n        <li class=\\\"nav-item\\\">\\n          <a class=\\\"nav-link\\\" href=\\\"/create-project\\\"\\n            [class.active]=\\\"navbarPos.includes('/create-project')\\\"\\n            (click)=\\\"this.routingHelperService.navigateTo('create-project')\\\">Create New Project</a>\\n        </li>\\n        <li class=\\\"nav-item\\\">\\n          <a class=\\\"nav-link\\\" href=\\\"/metric-browser\\\"\\n            [class.active]=\\\"navbarPos.includes('/metric-browser')\\\">Browse Available Metrics</a>\\n        </li>\\n        <!-- <li class=\\\"nav-item\\\">\\n          <a class=\\\"nav-link\\\" href=\\\"/open-data-provenance\\\"\\n            [class.active]=\\\"navbarPos.includes('/open-data-provenance')\\\">Open Data Provenance</a>\\n        </li> -->\\n        <li class=\\\"nav-item\\\">\\n          <a class=\\\"nav-link\\\" href=\\\"/provenance-explorer\\\"\\n            [class.active]=\\\"navbarPos.includes('/refine-provenance')\\\">OpenRefine Quality Provenance</a>\\n        </li>\\n      </ul>\\n    </nav>\\n    <div [class.col-sm-9]=\\\"sidebarShown\\\"\\n      [class.col-sm-12]=\\\"!sidebarShown\\\">\\n      <router-outlet></router-outlet>\\n    </div>\\n  </div>\\n</div>\\n<div class='d3tooltip'></div>\\n\\n \\n<!-- <li class=\\\"nav-item\\\">\\n  <a class=\\\"nav-link\\\" href=\\\"\\\" id=\\\"addMetric\\\" data-toggle=\\\"modal\\\" data-target=\\\"#addMetricModal\\\">Add Metric</a>\\n</li> -->\\n<!-- <li class=\\\"nav-item\\\">\\n  <a class=\\\"nav-link\\\" href=\\\"\\\" id=\\\"recalculate\\\">Recalculate Metrics</a>\\n</li> -->\\n<!-- <li class=\\\"nav-item dropdown\\\">\\n  <a class=\\\"nav-link nav-item dropdown-toggle\\\" href=\\\"\\\" data-toggle=\\\"dropdown\\\" role=\\\"button\\\" aria-haspopup=\\\"true\\\" aria-expanded=\\\"false\\\">Export <span class=\\\"caret\\\"></span></a>\\n  <ul class=\\\"dropdown-menu\\\">\\n    <li><a class=\\\"nav-link nav-item\\\" href=\\\"\\\" id=\\\"exportQuality\\\">Export Quality Values</a></li>\\n    <li><a class=\\\"nav-link nav-item\\\" href=\\\"\\\" id=\\\"exportMetrics\\\">Export Quality Metrics</a></li>\\n  </ul>\\n</li> -->\"","module.exports = \"<ng-container *ngIf=\\\"projectId\\\">\\n  <ng-container *ngIf=\\\"projectMetadata && refineProject && rowModel\\\">\\n  <h2>\\n    {{projectMetadata.name}}\\n  </h2>\\n  <p>\\n    Number of Columns: {{refineProject.columnModel.columns.length}}\\n  </p>\\n  <p>\\n    Number of Rows: {{rowModel.total}}\\n  </p>\\n  <p>\\n    <button type=\\\"button\\\" class=\\\"btn btn-secondary\\\" \\n      (click)=\\\"goToRefineProject()\\\">\\n        Go To OpenRefine Project\\n    </button>\\n    <button type=\\\"button\\\" class=\\\"btn btn-primary\\\"\\n      [disabled]=\\\"importSuccess\\\"\\n      (click)=\\\"addMetricsOverlay()\\\">\\n        Convert to Metrics Project\\n    </button>\\n  </p>\\n  <p>\\n    <ngb-alert *ngIf=\\\"errorMessage\\\" [dismissible]=\\\"true\\\">\\n      <strong>Error:</strong> {{errorMessage}}\\n    </ngb-alert>\\n  </p>\\n  </ng-container>\\n  <ng-container *ngIf=\\\"metricFunctions\\\">\\n    <h3>Recommended Metrics</h3>\\n    <div class=\\\"list-group\\\" style=\\\"margin-bottom: 12px\\\" *ngFor=\\\"let functionsColumn of objectKeys(metricFunctions); let colIndex = index; trackBy: columnFn\\\">\\n      <li class=\\\"list-group-item justify-content-between list-group-item-secondary\\\">\\n        Column: {{functionsColumn}}\\n      </li>\\n      <!-- [routerLink]=\\\"['/metric-project', proj.key]\\\"\\n        routerLinkActive=\\\"active\\\" -->\\n      <li class=\\\"list-group-item list-group-item-action flex-column\\\" \\n        *ngFor=\\\"let metricRecommendation of metricFunctions[functionsColumn]; let metricIndex = index; trackBy: metricFn\\\"\\n        [class.disabled]=\\\"metricsDisabled[functionsColumn][metricIndex]\\\"\\n        (click)=\\\"toggleMetric($event, functionsColumn, metricIndex)\\\">\\n        <div class=\\\"d-flex w-100 justify-content-between\\\">\\n          <div class=\\\"float-left\\\">\\n            <span class=\\\"fa fa-bar-chart\\\"></span>\\n            Metric - {{metricRecommendation.name}}\\n          </div>\\n          <div class=\\\"float-right\\\">{{metricRecommendation.name}}( \\n            <input type=\\\"text\\\" \\n              [value]=\\\"metricRecommendation.parameters\\\" \\n              (click)=\\\"$event.stopPropagation()\\\"\\n              (keyup)=\\\"onTextKey($event, colIndex, metricIndex)\\\"> )\\n          </div>\\n        </div>\\n        <div class=\\\"d-flex w-100 justify-content-between\\\">\\n          <small [style.marginRight.px]=\\\"100\\\">Description: {{metricRecommendation.description}}</small>\\n          <small class=\\\"float-right\\\">Default Parameters: {{metricRecommendation.params}}</small>\\n        </div>\\n      </li>\\n    </div>\\n  </ng-container>\\n</ng-container>\\n<ng-container *ngIf=\\\"!projectId\\\">\\n  <li class=\\\"list-group-item justify-content-between list-group-item-secondary\\\">\\n    Choose From Existing Project:\\n    <span class=\\\"badge badge-default badge-pill\\\">{{(refineProjects | nonMetricProjects).length}}</span>\\n  </li>\\n  <!-- (click)=\\\"openProject(rowIndex)\\\"> -->\\n  <li class=\\\"list-group-item list-group-item-action flex-column\\\" *ngFor=\\\"let proj of (refineProjects | nonMetricProjects); let rowIndex = index; trackBy: rowFn\\\"\\n    [routerLink]=\\\"['/create-project', proj.key]\\\"\\n    routerLinkActive=\\\"active\\\">\\n    <div class=\\\"d-flex w-100 justify-content-between\\\">\\n      <div class=\\\"float-left\\\">\\n        <span class=\\\"fa fa-calculator fa-lg\\\"></span>\\n        {{proj.value.name}}\\n      </div>\\n      <!-- <span class=\\\"float-left\\\"></span> -->\\n    </div>\\n    <div class=\\\"d-flex w-100 justify-content-between\\\">\\n      <small class=\\\"float-left\\\">last changed: {{proj.value.modified}}</small>\\n      <small class=\\\"float-right\\\">created: {{proj.value.created}}</small>\\n    </div>\\n  </li>\\n  <li class=\\\"list-group-item justify-content-between list-group-item-secondary\\\">\\n    Go to OpenRefine ...\\n    <!-- <span class=\\\"badge badge-default badge-pill\\\">{{(refineProjects | nonMetricProjects).length}}</span> -->\\n  </li>\\n</ng-container>\"","module.exports = \"<!-- <p></p> -->\\n<table *ngIf=\\\"availableMetrics\\\">\\n  <thead class=\\\"thead-default\\\">\\n    <th>Name</th>\\n    <th>Description</th>\\n    <th>Parameters</th>\\n    <th>Default Parameters</th>\\n    <th>Returns</th>\\n  </thead>\\n  <tr *ngFor=\\\"let singleColFunction of availableMetrics.singleColumnFunctions\\\">\\n    <th></th>\\n    <th>{{singleColFunction.description}}</th>\\n    <th>{{singleColFunction.params}}</th>\\n    <th>{{singleColFunction.defaultParams}}</th>\\n    <th>{{singleColFunction.returns}}</th>\\n  </tr>\\n</table>\"","module.exports = \"<div class=\\\"list-group\\\" style=\\\"margin-bottom: 12px\\\" *ngIf=\\\"!projectId\\\">\\n  <li class=\\\"list-group-item justify-content-between list-group-item-secondary\\\">\\n    Active Metric Projects\\n  </li>\\n  <li class=\\\"list-group-item list-group-item-action flex-column\\\" \\n    *ngFor=\\\"let proj of gitlabProjects; let rowIndex = index; trackBy: rowFn\\\"\\n    [routerLink]=\\\"['/open-data-provenance', proj.id]\\\"\\n    routerLinkActive=\\\"active\\\">\\n    <div class=\\\"d-flex w-100 justify-content-between\\\">\\n      <div class=\\\"float-left\\\">\\n        <span class=\\\"fa fa-calculator fa-lg\\\"></span>\\n        {{proj.name_with_namespace}}\\n        <!-- <metric-preview [projectId]=\\\"proj.key\\\"></metric-preview> -->\\n      </div>\\n      <!-- <span class=\\\"float-left\\\"></span> -->\\n    </div>\\n    <div class=\\\"d-flex w-100 justify-content-between\\\">\\n      <small class=\\\"float-left\\\">last changed: {{proj.last_activity_at}}</small>\\n      <small class=\\\"float-right\\\">created: {{proj.created_at}}</small>\\n    </div>\\n</div>\\n<svg class=\\\"quality-stream\\\" [style.width.px]=\\\"1500\\\"\\n  [style.height.px]=\\\"350\\\" *ngIf=\\\"projectId\\\"></svg>\\n<svg class=\\\"git-graph\\\" [style.width.px]=\\\"1500\\\"\\n  [style.height.px]=\\\"350\\\" *ngIf=\\\"projectId\\\"></svg>\\n<!-- <div>\\n  <p *ngFor=\\\"let commit of commits\\\">created: {{commit.created_at}}, id: {{commit.id}}</p>\\n</div> -->\"","module.exports = \"<h1>OpenRefine Projects</h1>\\n<!-- <ul class=\\\"list-group\\\"> -->\\n<div class=\\\"list-group\\\" style=\\\"margin-bottom: 12px\\\" *ngIf=\\\"refineProjects\\\">\\n  <li class=\\\"list-group-item justify-content-between list-group-item-secondary\\\">\\n    Active Metric Projects\\n    <span class=\\\"badge badge-default badge-pill\\\">{{(refineProjects | metricProjects).length}}</span>\\n  </li>\\n  <li class=\\\"list-group-item list-group-item-action flex-column\\\" \\n    *ngFor=\\\"let proj of (refineProjects | metricProjects); let rowIndex = index; trackBy: rowFn\\\"\\n    [routerLink]=\\\"['/metric-project', proj.key]\\\"\\n    routerLinkActive=\\\"active\\\">\\n    <div class=\\\"d-flex w-100 justify-content-between\\\">\\n      <div class=\\\"float-left\\\">\\n        <span class=\\\"fa fa-calculator fa-lg\\\"></span>\\n        {{proj.value.name}}\\n        <!-- <metric-preview [projectId]=\\\"proj.key\\\"\\n          [svgHeight]=\\\"100\\\"></metric-preview> -->\\n      </div>\\n      <!-- <span class=\\\"float-left\\\"></span> -->\\n    </div>\\n    <div class=\\\"d-flex w-100 justify-content-between\\\">\\n      <small class=\\\"float-left\\\">last changed: {{proj.value.modified}}</small>\\n      <small class=\\\"float-right\\\">created: {{proj.value.created}}</small>\\n    </div>\\n  </li>\\n</div>\\n<!-- Projects without Metrics Added -->\\n<div class=\\\"list-group\\\" *ngIf=\\\"refineProjects\\\">\\n  <li class=\\\"list-group-item justify-content-between list-group-item-secondary\\\">\\n    Projects Missing Metrics\\n    <span class=\\\"badge badge-default badge-pill\\\">{{(refineProjects | nonMetricProjects).length}}</span>\\n  </li>\\n  <!-- (click)=\\\"openProject(rowIndex)\\\"> -->\\n  <li class=\\\"list-group-item list-group-item-action flex-column disabled\\\" *ngFor=\\\"let proj of (refineProjects | nonMetricProjects); let rowIndex = index; trackBy: rowFn\\\"\\n    [routerLink]=\\\"['/create-project', proj.key]\\\"\\n    routerLinkActive=\\\"active\\\"\\n    (click)=\\\"this.routineHelperService.navigateTo('create-project')\\\">\\n    <div class=\\\"d-flex w-100 justify-content-between\\\">\\n      <div class=\\\"float-left\\\">\\n        <span class=\\\"fa fa-calculator fa-lg\\\"></span>\\n        {{proj.value.name}}\\n      </div>\\n      <!-- <span class=\\\"float-left\\\"></span> -->\\n    </div>\\n    <div class=\\\"d-flex w-100 justify-content-between\\\">\\n      <small class=\\\"float-left\\\">last changed: {{proj.value.modified}}</small>\\n      <small class=\\\"float-right\\\">created: {{proj.value.created}}</small>\\n    </div>\\n  </li>\\n</div>\"","module.exports = \"<!-- OLD VIEW -->\\n<!-- <svg #qualityView class=\\\"barchart\\\" id=\\\"qualityView\\\" [style.width.%]=\\\"qualityViewWidth\\\" [style.height.%]=\\\"componentHeight\\\"></svg> -->\\n<svg #qualityComparison class=\\\"barchart\\\" id=\\\"comparisonView\\\" [style.width.%]=\\\"100\\\" [style.height.%]=\\\"componentHeight\\\">\\n  <!-- OLD DETAIL VIEW -->\\n  <svg #issueView class=\\\"heatmap\\\" id=\\\"issueView\\\" *ngIf=\\\"showDetail\\\" [style.width.px]=\\\"detailViewWidth\\\" [style.height.%]=\\\"componentHeight\\\"></svg>\\n</svg>\\n<!-- <h3>Issues per Transformation Step</h3>\\n<svg #issuesHistory class=\\\"barchart\\\" id=\\\"issueHistory\\\" [style.width.%]=\\\"100\\\" [style.height.%]=\\\"componentHeight\\\"></svg> -->\\n<!-- <h3>Quality Comparison View</h3>\\n<svg #qualityComparison class=\\\"barchart\\\" id=\\\"comparisonView\\\" [style.width.%]=\\\"100\\\" [style.height.%]=\\\"componentHeight\\\"></svg> -->\"","module.exports = \"<h3>Quality Metrics per Transformation Step\\n  <button class=\\\"btn btn-primary btn-sm\\\" \\n    (click)=\\\"toggleShowDetail(); $event.stopPropagation(); $event.preventDefault()\\\">Toggle Detail\\n  </button>\\n</h3>\\n<app-quality-provenance-vis #qualityProvenanceVis \\n  [pageWidth]=\\\"pageWidth\\\" \\n  [componentHeight]=\\\"detailHeight\\\"\\n  [openRefineService]=\\\"openRefineService\\\"\\n  [projectId]=\\\"projectId\\\"\\n  [histId]=\\\"histId\\\"\\n  [shiftHistId]=\\\"shiftHistId\\\"\\n  [nodeHistory]=\\\"nodeHistory\\\"\\n  [shiftNodeHistory]=\\\"shiftNodeHistory\\\"\\n  [nodeWidth]=\\\"nodeWidth\\\"\\n  [scaleHistory]= \\\"scaleHistory\\\"\\n  [sankeyDiag]=\\\"sankeyDiag\\\"\\n  [qualityViewWidth]=\\\"qualityViewWidth\\\"\\n  [showDetail]=\\\"showDetail\\\"\\n  [detailViewWidth]=\\\"detailViewWidth\\\"\\n  [loadFinished]=\\\"loadFinished\\\"></app-quality-provenance-vis>\\n<svg #provGraph class=\\\"provGraph\\\" [style.width.%]=\\\"pageWidth\\\" [style.height.%]=\\\"sankeyHeight\\\"></svg>\\n<context-menu #qualityMetric>\\n  <!-- <ng-template contextMenuItem divider=\\\"true\\\"></ng-template> -->\\n  <ng-template contextMenuItem let-item (execute)=\\\"deleteMetric($event.item)\\\">\\n    Bye, {{item?.name}}\\n  </ng-template>\\n  <ng-template contextMenuItem passive=\\\"true\\\">\\n    Input something: <input type=\\\"text\\\">\\n  </ng-template>\\n</context-menu>\\n<context-menu #issue>\\n  <ng-template contextMenuItem let-item>\\n    Add Metric: {{item}}\\n  </ng-template>\\n</context-menu>\\n<!-- TODO: uncomment refine project -->\\n<!-- <iframe [style.width.%]=\\\"pageWidth\\\" [style.height.%]=\\\"refineHeight\\\" [src]=\\\"refineProjectUrl\\\"></iframe> -->\\n <!-- (window:resize)=\\\"onResize(svg.getBoundingClientRect())\\\" -->\"","module.exports = \"<h1>OpenRefine Quality Provenance Explorer</h1>\\n<!-- <ul class=\\\"list-group\\\"> -->\\n<div class=\\\"list-group\\\" style=\\\"margin-bottom: 12px\\\" *ngIf=\\\"refineProjects\\\">\\n  <li class=\\\"list-group-item justify-content-between list-group-item-secondary\\\">\\n    Available Quality Provenance Projects\\n    <span class=\\\"badge badge-default badge-pill\\\">{{(refineProjects | provenanceProjectList).length}}</span>\\n  </li>\\n  <li class=\\\"list-group-item list-group-item-action flex-column\\\" \\n    *ngFor=\\\"let proj of (refineProjects | provenanceProjectList); let rowIndex = index; trackBy: rowFn\\\"\\n    [routerLink]=\\\"['/provenance-explorer', proj.key]\\\"\\n    routerLinkActive=\\\"active\\\">\\n    <div class=\\\"d-flex w-100 justify-content-between\\\">\\n      <div class=\\\"float-left\\\">\\n        <span class=\\\"fa fa-calculator fa-lg\\\"></span>\\n        {{proj.value.name}}\\n      </div>\\n      <!-- <span class=\\\"float-left\\\"></span> -->\\n    </div>\\n    <div class=\\\"d-flex w-100 justify-content-between\\\">\\n      <small class=\\\"float-left\\\">last changed: {{proj.value.modified}}</small>\\n      <small class=\\\"float-right\\\">created: {{proj.value.created}}</small>\\n    </div>\\n  </li>\\n</div>\\n<!-- Projects without Metrics Added -->\\n<div class=\\\"list-group\\\" *ngIf=\\\"refineProjects\\\">\\n  <li class=\\\"list-group-item justify-content-between list-group-item-secondary\\\">\\n    Projects Without Provenance\\n    <span class=\\\"badge badge-default badge-pill\\\">{{(refineProjects | nonProvenanceProjectList).length}}</span>\\n  </li>\\n  <!-- (click)=\\\"openProject(rowIndex)\\\"> -->\\n  <li class=\\\"list-group-item list-group-item-action flex-column disabled\\\" *ngFor=\\\"let proj of (refineProjects | nonProvenanceProjectList); let rowIndex = index; trackBy: rowFn\\\"\\n    [routerLink]=\\\"['/create-project', proj.key]\\\"\\n    routerLinkActive=\\\"active\\\"\\n    (click)=\\\"this.routineHelperService.navigateTo('create-project')\\\">\\n    <div class=\\\"d-flex w-100 justify-content-between\\\">\\n      <div class=\\\"float-left\\\">\\n        <span class=\\\"fa fa-calculator fa-lg\\\"></span>\\n        {{proj.value.name}}\\n      </div>\\n      <!-- <span class=\\\"float-left\\\"></span> -->\\n    </div>\\n    <div class=\\\"d-flex w-100 justify-content-between\\\">\\n      <small class=\\\"float-left\\\">last changed: {{proj.value.modified}}</small>\\n      <small class=\\\"float-right\\\">created: {{proj.value.created}}</small>\\n    </div>\\n  </li>\\n</div>\"","module.exports = \"<div class=\\\"d3-chart\\\" #chart></div>\\n\"","module.exports = \"<div class=\\\"row\\\">\\n  <div class=\\\"col-md-4\\\">\\n    <ngb-accordion #acc=\\\"ngbAccordion\\\" activeIds=\\\"\\\"\\n      class=\\\"metric-info-panel\\\">\\n      <ngb-panel\\n        title=\\\"Metric Detail\\\"\\n        [disabled]=\\\"!metricSelection\\\">\\n        <ng-template *ngIf=\\\"metricSelection\\\" id=\\\"simpleList\\\" class=\\\"list-group fixed-panel\\\" ngbPanelContent>\\n            <label>Name: {{metricSelection[0].name}}</label>\\n            <br>\\n            <label>Description: {{metricSelection[0].description}}</label>\\n            <br>\\n            <form action=\\\"\\\">\\n              <label>Data Type: </label>\\n              <input type=\\\"radio\\\" [(ngModel)]=\\\"metricSelection[0].datatype\\\"\\n                [checked]=\\\"metricSelection[0].datatype == 'string'\\\"\\n                (change)=\\\"onSelectionChange('string')\\\"\\n                name=\\\"datatype\\\" \\n                value=\\\"string\\\"> String\\n              <input type=\\\"radio\\\" [(ngModel)]=\\\"metricSelection[0].datatype\\\"\\n                [checked]=\\\"metricSelection[0].datatype == 'numeric'\\\" \\n                (change)=\\\"onSelectionChange('numeric')\\\"\\n                name=\\\"datatype\\\" \\n                value=\\\"numeric\\\"> Numeric\\n              <input type=\\\"radio\\\" [(ngModel)]=\\\"metricSelection[0].datatype\\\"\\n                [checked]=\\\"metricSelection[0].datatype == 'datetime'\\\" \\n                (change)=\\\"onSelectionChange('datetime')\\\"\\n                name=\\\"datatype\\\" \\n                value=\\\"datetime\\\"> Date/Time\\n              <input type=\\\"radio\\\" [(ngModel)]=\\\"metricSelection[0].datatype\\\"\\n                [checked]=\\\"metricSelection[0].datatype == 'unknown'\\\"\\n                (change)=\\\"onSelectionChange('unknown')\\\"\\n                name=\\\"datatype\\\" \\n                value=\\\"categoric\\\"> Undefined\\n            </form>\\n        </ng-template>\\n      </ngb-panel>\\n    </ngb-accordion>\\n  </div>\\n  <div class=\\\"col-md-8\\\">\\n    <ngb-accordion class=\\\"checks-panel\\\" (panelChange)=\\\"beforeChange($event)\\\">\\n      <ngb-panel [disabled]=\\\"!metricSelection\\\">\\n        <ng-template ngbPanelTitle>\\n          <span>\\n            <div class=\\\"panel-title float-left\\\">\\n              Quality Checks\\n              <button class=\\\"btn btn-primary btn-sm\\\" \\n                (click)=\\\"addCheck(); $event.stopPropagation(); $event.preventDefault()\\\"\\n                [disabled]=\\\"!metricSelection\\\">Add Check</button>\\n            </div>\\n            <!-- <div *ngIf=\\\"metricSelection\\\" class=\\\"panel-title float-right\\\">Concatenation: -->\\n              <div *ngIf=\\\"metricSelection\\\" [(ngModel)]=\\\"metricSelection[0].concat\\\" class=\\\"panel-title float-right\\\" ngbRadioGroup name=\\\"concat\\\">\\n                Concatenation:\\n                <label class=\\\"btn btn-secondary btn-sm\\\"\\n                  [style.margin]=0\\n                  (click)=\\\"clickConcat($event, 'AND')\\\">\\n                  <input type=\\\"radio\\\" value=\\\"AND\\\"> AND\\n                </label>\\n                <label class=\\\"btn btn-secondary btn-sm\\\"\\n                  [style.margin]=0\\n                  (click)=\\\"clickConcat($event, 'OR')\\\">\\n                  <input type=\\\"radio\\\" value=\\\"OR\\\"> OR\\n                </label>\\n              </div>\\n            <!-- </div> -->\\n          </span>\\n          <!-- <div class=\\\"clearfix\\\"></div> -->\\n        </ng-template>\\n        <ng-template *ngIf=\\\"metricSelection\\\" id=\\\"checksList\\\" class=\\\"list-group fixed-panel\\\" ngbPanelContent>\\n          <ul class=\\\"list-group\\\">\\n            <ng-template #popContent>\\n              <div ngbRadioGroup \\n                name=\\\"context-menu\\\"\\n                [(ngModel)]=\\\"selectedEvaluable\\\">\\n                <button class=\\\"btn btn-danger btn-sm\\\"\\n                  (click)=\\\"removeEvaluableSelection()\\\">remove</button>\\n                <button class=\\\"btn btn-sm\\\"\\n                  (click)=\\\"disableEvaluableSelection()\\\">{{selectedEvaluable.disabled ? 'enable' : 'disable'}}</button>\\n                <button class=\\\"btn btn-primary btn-sm\\\">comment</button>\\n              </div>\\n            </ng-template>\\n            <div class=\\\"input-group\\\"\\n              *ngIf=\\\"metricSelection[0].spanningEvaluable\\\">\\n              <span class=\\\"input-group-addon\\\" placement=\\\"top\\\" \\n                [ngbPopover]=\\\"popContent\\\"\\n                (click)=\\\"onSelectEvaluable(metricSelection[0].spanningEvaluable)\\\">Edit</span>\\n              <input class=\\\"form-control list-group-item pop metricInput\\\" \\n                [(ngModel)]=\\\"metricSelection[0].spanningEvaluable.evaluable\\\"\\n                (keyup)=\\\"checkValidity($event)\\\"\\n                (click)=\\\"onSelectEvaluable(metricSelection[0].spanningEvaluable)\\\">\\n            </div>\\n            <div class=\\\"input-group\\\" *ngFor=\\\"let check of metricSelection[0].evalTuples\\\" #popover=\\\"\\\">\\n                <span class=\\\"input-group-addon\\\" placement=\\\"top\\\"\\n                  [ngbPopover]=\\\"popContent\\\"\\n                  (click)=\\\"onSelectEvaluable(check)\\\">Edit</span>\\n                <input class=\\\"form-control list-group-item pop metricInput\\\"\\n                  [(ngModel)]=\\\"check.evaluable\\\"\\n                  (keyup)=\\\"checkValidity($event)\\\"\\n                  (click)=\\\"onSelectEvaluable(check)\\\"\\n                  placement=\\\"bottom\\\"\\n                  (ngbTooltip)=\\\"check.comment\\\">\\n            </div>\\n          </ul>\\n        </ng-template>\\n      </ngb-panel>\\n    </ngb-accordion>\\n  </div>\\n</div>\\n<div *ngIf=\\\"alertType\\\" class=\\\"row\\\">\\n  <div class=\\\"col-md-12\\\">\\n    <ngb-alert *ngIf=\\\"alertType != 'info'\\\" [type]=\\\"alertType\\\">{{ checkFeedback }}</ngb-alert>\\n  </div>\\n</div>\"","module.exports = \"<div *ngIf=\\\"metricSelection\\\" \\n    #legend\\n    [style.height.px]=\\\"viewOffsetTop - 49\\\">\\n  <h4 #detailTitle>Detail View  <button type=\\\"button\\\" class=\\\"btn btn-info btn-xs\\\">Info</button></h4>\\n  <div #metricInfo>\\n    <h5 *ngIf=\\\"metricSelection.length == 1\\\">Selected Metric:</h5>\\n    <h5 *ngIf=\\\"metricSelection.length > 1\\\">Selected Metrics:</h5>\\n    <ng-container *ngFor=\\\"let metric of metricSelection; let selectedIdx = index; trackBy: rowFn\\\">\\n      <h5><svg class=\\\"legend\\\"><rect [style.fill]=\\\"getColor(metric)\\\"></rect></svg>{{selectedColumns[selectedIdx]}} - {{metric.name}}</h5>\\n    </ng-container>\\n  </div>\\n</div>\\n<svg #visParent class=\\\"heatmap\\\">\\n  <rect></rect>\\n</svg>\"","module.exports = \"<ngb-accordion>\\n<!--   <accordion-group heading=\\\"Metric Information\\\"\\n    [isOpen]=\\\"status.isFirstOpen\\\"\\n    [isDisabled]=\\\"status.isFirstDisabled\\\"> -->\\n  <ngb-panel heading=\\\"Metric Information\\\">\\n    <ng-template ngbPanelContent>\\n      <ul id=\\\"simpleList\\\" class=\\\"list-group fixed-panel\\\">\\n          <li class=\\\"list-group-item\\\">\\n            <label for=\\\"metricName\\\">\\n              Name:\\n            </label>\\n            <span id=\\\"metricName\\\"></span>\\n          </li>\\n          <li class=\\\"list-group-item\\\">\\n            <label for=\\\"metricName\\\">\\n              Description: \\n            </label>\\n            <div id=\\\"metricDescription\\\"></div>\\n          </li>\\n          <li class=\\\"list-group-item\\\">\\n            <div class=\\\"form-group\\\" id=\\\"metricDatatype\\\">\\n              <label for=\\\"metricType\\\" class=\\\"control-label\\\">Data Type: </label>\\n              <label class=\\\"radio-inline\\\">\\n                <input type=\\\"radio\\\"> String</label>\\n              <label class=\\\"radio-inline\\\">\\n                <input type=\\\"radio\\\"> Numeric</label>\\n              <label class=\\\"radio-inline\\\">\\n                <input type=\\\"radio\\\"> Date/Time</label>\\n              <label class=\\\"radio-inline\\\">\\n                <input type=\\\"radio\\\"> Categoric</label>\\n            </div>\\n          </li>\\n        </ul>\\n    </ng-template>\\n  </ngb-panel>\\n  <!-- </accordion-group> -->\\n</ngb-accordion>\\n\"","module.exports = \"<!-- <ng-template *ngIf=\\\"projectId\\\"> -->\\n  <div class=\\\"row\\\">\\n    <metric-accordion\\n      [metricSelection]=\\\"selectedMetrics\\\"\\n      [columnSelection]=\\\"selectedColumns\\\"\\n      [projectId]=\\\"projectId\\\"\\n      [project]=\\\"openRefineProject\\\"\\n      (onSelectionUpdated)=\\\"handleSelectionUpdated($event)\\\"></metric-accordion>\\n  </div>\\n  <div class=\\\"row\\\">\\n    <div class=\\\"col-md-9\\\">\\n      <app-raw-data-table\\n        [projectId]=\\\"projectId\\\"\\n        [project]=\\\"openRefineProject\\\"\\n        [columnMetricColors]=\\\"columnMetricColors\\\"\\n        [spanMetricColors]=\\\"spanMetricColors\\\"\\n        (onOverviewMetricSelected)=\\\"handleOverviewSelection($event)\\\"\\n        (sortEmitter)=\\\"handleSort($event)\\\"\\n        (tableHeightChanged)=\\\"handleTableHeightUpdated($event)\\\"\\n        (pageChangedEmitter)=\\\"handleDataRowsPageChanged($event)\\\">\\n      </app-raw-data-table>\\n    </div>\\n    <div class=\\\"col-md-3\\\">\\n          <!-- <div id=\\\"legend\\\">\\n              <h4 id=\\\"detailColumnHeader\\\"></h4>\\n              <div id=\\\"detailMetricHeader\\\"></div>\\n              <div id=\\\"selectedMetricsHeader\\\"></div>\\n              <div hidden id=\\\"filtering\\\"><button type=\\\"button\\\" class=\\\"btn btn-xs btn-default\\\">Only show dirty entries</button></div>\\n          </div> -->\\n      <metric-detail-view\\n        [viewOffsetTop]=\\\"detailViewOffsetTop\\\"\\n        [rowModel]=\\\"rowModel\\\"\\n        [metricSelection]=\\\"selectedMetrics\\\"\\n        [selectedColumns]=\\\"selectedColumns\\\"\\n        [columnMetricColors]=\\\"columnMetricColors\\\"\\n        [spanMetricColors]=\\\"spanMetricColors\\\"\\n        [rowsFrom]=\\\"rowsFrom\\\"\\n        [rowsTo]=\\\"rowsTo\\\"\\n        (onDataRowsSelected)=\\\"handleDataRowsSelected($event)\\\"></metric-detail-view>\\n    </div>\\n  </div>\\n<!-- </ng-template>\\n<ng-template *ngIf=\\\"!projectId\\\">\\n  <p>Loading Project ...\\n  </p>\\n</ng-template> -->\"","module.exports = \"<svg [style.width]=\\\"svgWidth\\\"></svg>\"","module.exports = \"<div *ngIf=\\\"project\\\">\\n  <table class='table spanning-metrics-overview'>\\n    <thead #spanOverviewHead class='thead-default'>\\n      <ng-container *ngIf=\\\"project.overlayModels.metricsOverlayModel\\\">\\n        <ng-container *ngIf=\\\"project.overlayModels.metricsOverlayModel.spanningMetrics\\\">\\n          <tr>\\n            <th [style.padding.px]=\\\"0\\\"\\n              [colSpan]=\\\"project.columnModel.columns.length + 1\\\">Multiple-Column Metrics</th>\\n          </tr>\\n          <ng-container *ngFor=\\\"let metric of project.overlayModels.metricsOverlayModel.spanningMetrics\\\">\\n            <tr>\\n              <th [style.padding.px]=\\\"0\\\"></th>\\n              <th *ngFor=\\\"let col of metric.spanningColumns\\\"\\n                [style.padding.px]=\\\"0\\\">{{col}}</th>\\n            </tr>\\n            <tr>\\n              <th [style.padding.px]=\\\"0\\\"\\n                [style.paddingBottom.px]=\\\"6\\\"\\n                [style.paddingLeft.px]=\\\"8\\\"\\n                [style.paddingRight.px]=\\\"4\\\"\\n                [style.width.px]=\\\"colWidths[0]\\\">{{metric.name}}\\n              </th>\\n              <th span-metric-col [ngClass]=\\\"checkValues(metric, cellIndex)\\\" class=\\\"metric-overview-col\\\"\\n                [colSpan]=\\\"metric.spanningColumns.length\\\"\\n                [colWidths]=\\\"colWidths\\\"\\n                [metric]=\\\"metric\\\"\\n                [metricsOverlayModel]=\\\"project.overlayModels.metricsOverlayModel\\\"\\n                [spanMetricColors]=\\\"spanMetricColors\\\"\\n                [style.padding.px]=\\\"0\\\"\\n                [style.paddingTop.px]=\\\"6\\\"\\n                (contextmenu)=\\\"onContextMenu($event, metric)\\\"\\n                (click)=\\\"onClickOverview($event, metric)\\\"></th>\\n            </tr>\\n          </ng-container>\\n        </ng-container>\\n      </ng-container>\\n    </thead>\\n  </table>\\n  <div class=\\\"raw-data-container\\\">\\n    <svg #tableOverlay scroll-bar-vis class=\\\"table-overlay\\\"\\n      [class.disabled]=\\\"disabled\\\"\\n      [style.top.px]=\\\"overlayOffsetTop\\\"\\n      [style.width.px]=\\\"overlayWidth\\\"\\n      [metricsOverlayModel]=\\\"project.overlayModels.metricsOverlayModel\\\"\\n      [colWidths]=\\\"colWidths\\\"\\n      [bodyHeight]=\\\"bodyHeight\\\"\\n      [rowsFrom]=\\\"rowsFrom\\\"\\n      [itemsPerPage]=\\\"itemsPerPage\\\"\\n      [columnMetricColors]=\\\"columnMetricColors\\\"\\n      [spanMetricColors]=\\\"spanMetricColors\\\"\\n      (click)=\\\"onClickRect($event)\\\"></svg>\\n    <table class='table metrics-overview'>\\n      <thead #colOverviewHead class='thead-default'>\\n        <ng-container *ngIf=\\\"project.overlayModels.metricsOverlayModel\\\">\\n          <ng-container *ngIf=\\\"project.overlayModels.metricsOverlayModel.availableMetrics\\\">\\n            <tr>\\n              <th [style.padding.px]=\\\"0\\\"\\n                [colSpan]=\\\"project.columnModel.columns.length + 1\\\">Single-Column Metrics\\n                  <div ngbDropdown class=\\\"d-inline-block\\\">\\n                    <button class=\\\"btn btn-outline-primary btn-sm\\\" id=\\\"dropdownBasic1\\\" ngbDropdownToggle>Sort Columns</button>\\n                    <div ngbDropdownMenu aria-labelledby=\\\"dropdownBasic1\\\">\\n                      <button class=\\\"dropdown-item btn-sm\\\" (click)=\\\"handleSort($event, 'sortOriginal')\\\">Original Structure</button>\\n                      <button class=\\\"dropdown-item btn-sm\\\" (click)=\\\"handleSort($event, 'sortByDirtiness')\\\">By Dirtiness</button>\\n                    </div>\\n                  </div>\\n              </th>\\n            </tr>\\n            <tr>\\n              <th [style.padding.px]=\\\"0\\\"></th>\\n              <th *ngFor=\\\"let column of project.columnModel.columns\\\"\\n                [style.padding.px]=\\\"0\\\"\\n                [style.paddingRight.px]=\\\"6\\\"\\n                [style.width.px]=\\\"colWidths[i+1]\\\">{{column.name}}</th>\\n            </tr>\\n            <tr class='overview-row' *ngFor=\\\"let metric of project.overlayModels.metricsOverlayModel.availableMetrics; let rowIndex = index; trackBy: rowFn\\\">\\n              <th [style.padding.px]=\\\"0\\\"\\n                [style.paddingBottom.px]=\\\"6\\\"\\n                [style.paddingLeft.px]=\\\"8\\\"\\n                [style.paddingRight.px]=\\\"4\\\">{{metric}}\\n              </th>\\n                <ng-container *ngFor=\\\"let metricColumn of objectKeys(project.overlayModels.metricsOverlayModel.metrics); let cellIndex = index; trackBy: trackByFn\\\">\\n                  <th class=\\\"metric-overview-col\\\"\\n                    *ngIf=\\\"metricColumn\\\" \\n                    metric-col \\n                    [ngClass]=\\\"checkValues(metric, cellIndex)\\\" \\n                    [metricCol]=\\\"metricColumn\\\" \\n                    [metric]=\\\"metric\\\"\\n                    [metricsOverlayModel]=\\\"project.overlayModels.metricsOverlayModel\\\"\\n                    [columnMetricColors]=\\\"columnMetricColors\\\"\\n                    [svgWidth]=\\\"colWidths[cellIndex+1]\\\"\\n                    [style.padding.px]=\\\"0\\\"\\n                    [style.paddingTop.px]=\\\"6\\\"\\n                    (contextmenu)=\\\"onContextMenu($event, metricColumn, project.overlayModels.metricsOverlayModel.availableMetrics[rowIndex])\\\"\\n                    (click)=\\\"onClickOverview($event, metric, cellIndex)\\\"></th>\\n              </ng-container>\\n            </tr>\\n          </ng-container>\\n        </ng-container>\\n        <tr #headerCols class='column-names'>\\n          <th></th>\\n          <th *ngFor=\\\"let column of project.columnModel.columns; let i = index; trackBy: trackByFn\\\"\\n            [style.padding.px]=\\\"0\\\"\\n            [style.paddingRight.px]=\\\"6\\\">{{column.name}}</th>\\n        </tr>\\n      </thead>\\n      <tbody scroll-raw-data-body\\n        #rawDataBody \\n        class='metrics-overview'\\n        [class.disabled]=\\\"disabled\\\"\\n        *ngIf=\\\"rowModel\\\">\\n        <tr #bodyCols *ngFor=\\\"let row of rowModel.rows; let rowIndex = index; let last = last; trackBy: trackRows\\\">\\n          <th\\n            [style.width.px]=\\\"colWidths[0]\\\"></th>\\n          <td *ngFor=\\\"let column of project.columnModel.columns; let i = index; trackBy: trackByFn\\\"\\n            [style.padding.px]=\\\"0\\\"\\n            [style.paddingRight.px]=\\\"6\\\"\\n            [style.width.px]=\\\"colWidths[i+1]\\\">\\n            <ng-container *ngIf=\\\"row.cells[column.cellIndex]\\\">{{row.cells[column.cellIndex].v}}</ng-container>\\n          </td>\\n        </tr>\\n      </tbody>\\n    </table>\\n  </div>\\n  <!-- TODO: replace pagination -->\\n  <!-- <pagination *ngIf=\\\"rowModel\\\" class=\\\"pagination-sm\\\"\\n    [style.padding.px]=\\\"6\\\" \\n    [totalItems]=\\\"rowModel.filtered\\\" \\n    [(ngModel)]=\\\"page\\\" \\n    [maxSize]=\\\"maxSize\\\"\\n    [boundaryLinks]=\\\"true\\\" \\n    [itemsPerPage]=\\\"itemsPerPage\\\"\\n    [rotate]=\\\"false\\\" \\n    (numPages)=\\\"numPages = $event\\\" \\n    (pageChanged)=\\\"pageChanged($event)\\\"\\n    (click)=\\\"changePage($event)\\\"></pagination> -->\\n  <ngb-pagination *ngIf=\\\"rowModel\\\"\\n    [collectionSize]=\\\"rowModel.filtered\\\"\\n    [(page)]=\\\"page\\\"\\n    [maxSize]=\\\"maxSize\\\"\\n    [boundaryLinks]=\\\"true\\\"\\n    [pageSize]=\\\"itemsPerPage\\\"\\n    [size]=\\\"sm\\\"\\n    aria-label=\\\"Default Pagination\\\"></ngb-pagination>\\n  <context-menu #existingMetric>\\n    <ng-template contextMenuItem divider=\\\"true\\\"></ng-template>\\n    <ng-template contextMenuItem let-item (execute)=\\\"deleteMetric($event.item)\\\">\\n      Delete {{item?.name}}?\\n    </ng-template>\\n    <ng-template contextMenuItem passive=\\\"true\\\">\\n      Input something: <input type=\\\"text\\\">\\n    </ng-template>\\n  </context-menu>\\n  <context-menu #newMetric>\\n    <ng-template contextMenuItem let-item>\\n      Add Metric: {{item}}\\n    </ng-template>\\n  </context-menu>\\n</div>\"","module.exports = \"<svg [style.width.px]=\\\"1\\\"\\n  [style.height.px]=\\\"1\\\"></svg>\\n  <!-- *ngIf=\\\"metricsOverlayModel\\\" -->\\n\"","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./src/$$_lazy_route_resource lazy recursive\";","module.exports = \".dropdown-submenu {\\n  position: relative; }\\n\\n.dropdown-submenu a::after {\\n  -webkit-transform: rotate(-90deg);\\n          transform: rotate(-90deg);\\n  position: absolute;\\n  right: 6px;\\n  top: .8em; }\\n\\n.dropdown-submenu .dropdown-menu {\\n  top: 0;\\n  left: 100%;\\n  margin-left: .1rem;\\n  margin-right: .1rem; }\\n\\n/* automatically generated */\\n\\n.loading {\\n  padding: 1em; }\\n\\ndemo {\\n  height: 100%;\\n  width: 100%; }\\n\\n.demo-header {\\n  align-items: center;\\n  /*background: $brand;*/\\n  /*box-shadow: 0 0.1em 1.5em rgba($dark-grey, 0.5);*/\\n  /*color: $white;*/\\n  display: flex;\\n  padding: 1em; }\\n\\n.demo-header__toggle {\\n  background: transparent;\\n  /*border: 0.15rem solid $white;*/\\n  border-left: 0;\\n  border-right: 0;\\n  cursor: pointer;\\n  font-size: 0;\\n  height: 1.5rem;\\n  margin-right: 1rem;\\n  position: relative;\\n  width: 2rem; }\\n\\n.demo-header__toggle::after {\\n    /*background: $white;*/\\n    content: '';\\n    height: 0.15rem;\\n    left: 0;\\n    margin-top: -0.075rem;\\n    position: absolute;\\n    top: 50%;\\n    width: 100%; }\\n\\n.demo-sidebar {\\n  background-color: #fff;\\n  padding: 2em 1em; }\\n\\n.demo-sidebar.ng-sidebar--opened.ng-sidebar--over {\\n    box-shadow: 0 0 2.5em rgba(85, 85, 85, 0.5); }\\n\\n.demo-contents {\\n  padding: 0 2em; }\\n\\n.demo-control {\\n  /*background-color: $light-grey;\\n  border: 1px solid $dark-grey;*/\\n  cursor: pointer;\\n  margin-bottom: 0.5em;\\n  padding: 0.5em 2em;\\n  transition: background-color 0.15s; }\\n\\n.demo-control:hover {\\n    /*background-color: $dark-grey;*/\\n    /*color: $white;*/ }\\n\\ndiv.d3tooltip {\\n  position: absolute;\\n  text-align: center;\\n  width: 160px;\\n  padding: 4px;\\n  font: 13px sans-serif;\\n  background: lightsteelblue;\\n  border: 2px;\\n  border-color: gray;\\n  border-radius: 8px;\\n  pointer-events: none;\\n  opacity: 0;\\n  overflow: visible; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9jaHJpc3RpYW5ib3JzL1Byb2plY3RzL21ldHJpY2RvY19hbmd1bGFyL3NyYy9hcHAvYXBwLmNvbXBvbmVudC5zY3NzIiwic3JjL2FwcC9hcHAuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxrQkFBa0IsRUFBQTs7QUFHcEI7RUFDRSxpQ0FBeUI7VUFBekIseUJBQXlCO0VBQ3pCLGtCQUFrQjtFQUNsQixVQUFVO0VBQ1YsU0FBUyxFQUFBOztBQUdYO0VBQ0UsTUFBTTtFQUNOLFVBQVU7RUFDVixrQkFBa0I7RUFDbEIsbUJBQW1CLEVBQUE7O0FBR3JCLDRCQUFBOztBQUVBO0VBQ0UsWUFBWSxFQUFBOztBQUdkO0VBQ0UsWUFBWTtFQUNaLFdBQVcsRUFBQTs7QUFHYjtFQUNFLG1CQUFtQjtFQUNuQixzQkFBQTtFQUNBLG1EQUFBO0VBQ0EsaUJBQUE7RUFDQSxhQUFhO0VBQ2IsWUFBWSxFQUFBOztBQUdaO0VBQ0UsdUJBQXVCO0VBQ3ZCLGdDQUFBO0VBQ0EsY0FBYztFQUNkLGVBQWU7RUFDZixlQUFlO0VBQ2YsWUFBWTtFQUNaLGNBQWM7RUFDZCxrQkFBa0I7RUFDbEIsa0JBQWtCO0VBQ2xCLFdBQVcsRUFBQTs7QUFWYjtJQWFJLHNCQUFBO0lBQ0EsV0FBVztJQUNYLGVBQWU7SUFDZixPQUFPO0lBQ1AscUJBQXFCO0lBQ3JCLGtCQUFrQjtJQUNsQixRQUFRO0lBQ1IsV0FBVyxFQUFBOztBQUlqQjtFQUNFLHNCQUFzQjtFQUN0QixnQkFBZ0IsRUFBQTs7QUFGbEI7SUFLSSwyQ0FBMkMsRUFBQTs7QUFJL0M7RUFDRSxjQUFjLEVBQUE7O0FBR2hCO0VBQ0U7Z0NDYjhCO0VEZTlCLGVBQWU7RUFDZixvQkFBb0I7RUFDcEIsa0JBQWtCO0VBQ2xCLGtDQUFrQyxFQUFBOztBQU5wQztJQVNJLGdDQUFBO0lBQ0EsaUJBQUEsRUFBa0I7O0FBSXRCO0VBQ0ksa0JBQWtCO0VBQ2xCLGtCQUFrQjtFQUNsQixZQUFZO0VBQ1osWUFBWTtFQUNaLHFCQUFxQjtFQUNyQiwwQkFBMEI7RUFDMUIsV0FBVztFQUNYLGtCQUFrQjtFQUNsQixrQkFBa0I7RUFDbEIsb0JBQW9CO0VBQ3BCLFVBQVU7RUFDVixpQkFBZ0IsRUFBQSIsImZpbGUiOiJzcmMvYXBwL2FwcC5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5kcm9wZG93bi1zdWJtZW51IHtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xufVxuXG4uZHJvcGRvd24tc3VibWVudSBhOjphZnRlciB7XG4gIHRyYW5zZm9ybTogcm90YXRlKC05MGRlZyk7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgcmlnaHQ6IDZweDtcbiAgdG9wOiAuOGVtO1xufVxuXG4uZHJvcGRvd24tc3VibWVudSAuZHJvcGRvd24tbWVudSB7XG4gIHRvcDogMDtcbiAgbGVmdDogMTAwJTtcbiAgbWFyZ2luLWxlZnQ6IC4xcmVtO1xuICBtYXJnaW4tcmlnaHQ6IC4xcmVtO1xufVxuXG4vKiBhdXRvbWF0aWNhbGx5IGdlbmVyYXRlZCAqL1xuXG4ubG9hZGluZyB7XG4gIHBhZGRpbmc6IDFlbTtcbn1cblxuZGVtbyB7XG4gIGhlaWdodDogMTAwJTtcbiAgd2lkdGg6IDEwMCU7XG59XG5cbi5kZW1vLWhlYWRlciB7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIC8qYmFja2dyb3VuZDogJGJyYW5kOyovXG4gIC8qYm94LXNoYWRvdzogMCAwLjFlbSAxLjVlbSByZ2JhKCRkYXJrLWdyZXksIDAuNSk7Ki9cbiAgLypjb2xvcjogJHdoaXRlOyovXG4gIGRpc3BsYXk6IGZsZXg7XG4gIHBhZGRpbmc6IDFlbTtcbn1cblxuICAuZGVtby1oZWFkZXJfX3RvZ2dsZSB7XG4gICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gICAgLypib3JkZXI6IDAuMTVyZW0gc29saWQgJHdoaXRlOyovXG4gICAgYm9yZGVyLWxlZnQ6IDA7XG4gICAgYm9yZGVyLXJpZ2h0OiAwO1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICBmb250LXNpemU6IDA7XG4gICAgaGVpZ2h0OiAxLjVyZW07XG4gICAgbWFyZ2luLXJpZ2h0OiAxcmVtO1xuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICB3aWR0aDogMnJlbTtcblxuICAgICY6OmFmdGVyIHtcbiAgICAgIC8qYmFja2dyb3VuZDogJHdoaXRlOyovXG4gICAgICBjb250ZW50OiAnJztcbiAgICAgIGhlaWdodDogMC4xNXJlbTtcbiAgICAgIGxlZnQ6IDA7XG4gICAgICBtYXJnaW4tdG9wOiAtMC4wNzVyZW07XG4gICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICB0b3A6IDUwJTtcbiAgICAgIHdpZHRoOiAxMDAlO1xuICAgIH1cbiAgfVxuXG4uZGVtby1zaWRlYmFyIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcbiAgcGFkZGluZzogMmVtIDFlbTtcblxuICAmLm5nLXNpZGViYXItLW9wZW5lZC5uZy1zaWRlYmFyLS1vdmVyIHtcbiAgICBib3gtc2hhZG93OiAwIDAgMi41ZW0gcmdiYSg4NSwgODUsIDg1LCAwLjUpO1xuICB9XG59XG5cbi5kZW1vLWNvbnRlbnRzIHtcbiAgcGFkZGluZzogMCAyZW07XG59XG5cbi5kZW1vLWNvbnRyb2wge1xuICAvKmJhY2tncm91bmQtY29sb3I6ICRsaWdodC1ncmV5O1xuICBib3JkZXI6IDFweCBzb2xpZCAkZGFyay1ncmV5OyovXG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgbWFyZ2luLWJvdHRvbTogMC41ZW07XG4gIHBhZGRpbmc6IDAuNWVtIDJlbTtcbiAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAwLjE1cztcblxuICAmOmhvdmVyIHtcbiAgICAvKmJhY2tncm91bmQtY29sb3I6ICRkYXJrLWdyZXk7Ki9cbiAgICAvKmNvbG9yOiAkd2hpdGU7Ki9cbiAgfVxufVxuXG5kaXYuZDN0b29sdGlwIHtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIHdpZHRoOiAxNjBweDtcbiAgICBwYWRkaW5nOiA0cHg7XG4gICAgZm9udDogMTNweCBzYW5zLXNlcmlmO1xuICAgIGJhY2tncm91bmQ6IGxpZ2h0c3RlZWxibHVlO1xuICAgIGJvcmRlcjogMnB4O1xuICAgIGJvcmRlci1jb2xvcjogZ3JheTtcbiAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gICAgb3BhY2l0eTogMDtcbiAgICBvdmVyZmxvdzp2aXNpYmxlO1xufSIsIi5kcm9wZG93bi1zdWJtZW51IHtcbiAgcG9zaXRpb246IHJlbGF0aXZlOyB9XG5cbi5kcm9wZG93bi1zdWJtZW51IGE6OmFmdGVyIHtcbiAgdHJhbnNmb3JtOiByb3RhdGUoLTkwZGVnKTtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICByaWdodDogNnB4O1xuICB0b3A6IC44ZW07IH1cblxuLmRyb3Bkb3duLXN1Ym1lbnUgLmRyb3Bkb3duLW1lbnUge1xuICB0b3A6IDA7XG4gIGxlZnQ6IDEwMCU7XG4gIG1hcmdpbi1sZWZ0OiAuMXJlbTtcbiAgbWFyZ2luLXJpZ2h0OiAuMXJlbTsgfVxuXG4vKiBhdXRvbWF0aWNhbGx5IGdlbmVyYXRlZCAqL1xuLmxvYWRpbmcge1xuICBwYWRkaW5nOiAxZW07IH1cblxuZGVtbyB7XG4gIGhlaWdodDogMTAwJTtcbiAgd2lkdGg6IDEwMCU7IH1cblxuLmRlbW8taGVhZGVyIHtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgLypiYWNrZ3JvdW5kOiAkYnJhbmQ7Ki9cbiAgLypib3gtc2hhZG93OiAwIDAuMWVtIDEuNWVtIHJnYmEoJGRhcmstZ3JleSwgMC41KTsqL1xuICAvKmNvbG9yOiAkd2hpdGU7Ki9cbiAgZGlzcGxheTogZmxleDtcbiAgcGFkZGluZzogMWVtOyB9XG5cbi5kZW1vLWhlYWRlcl9fdG9nZ2xlIHtcbiAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gIC8qYm9yZGVyOiAwLjE1cmVtIHNvbGlkICR3aGl0ZTsqL1xuICBib3JkZXItbGVmdDogMDtcbiAgYm9yZGVyLXJpZ2h0OiAwO1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIGZvbnQtc2l6ZTogMDtcbiAgaGVpZ2h0OiAxLjVyZW07XG4gIG1hcmdpbi1yaWdodDogMXJlbTtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICB3aWR0aDogMnJlbTsgfVxuICAuZGVtby1oZWFkZXJfX3RvZ2dsZTo6YWZ0ZXIge1xuICAgIC8qYmFja2dyb3VuZDogJHdoaXRlOyovXG4gICAgY29udGVudDogJyc7XG4gICAgaGVpZ2h0OiAwLjE1cmVtO1xuICAgIGxlZnQ6IDA7XG4gICAgbWFyZ2luLXRvcDogLTAuMDc1cmVtO1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6IDUwJTtcbiAgICB3aWR0aDogMTAwJTsgfVxuXG4uZGVtby1zaWRlYmFyIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcbiAgcGFkZGluZzogMmVtIDFlbTsgfVxuICAuZGVtby1zaWRlYmFyLm5nLXNpZGViYXItLW9wZW5lZC5uZy1zaWRlYmFyLS1vdmVyIHtcbiAgICBib3gtc2hhZG93OiAwIDAgMi41ZW0gcmdiYSg4NSwgODUsIDg1LCAwLjUpOyB9XG5cbi5kZW1vLWNvbnRlbnRzIHtcbiAgcGFkZGluZzogMCAyZW07IH1cblxuLmRlbW8tY29udHJvbCB7XG4gIC8qYmFja2dyb3VuZC1jb2xvcjogJGxpZ2h0LWdyZXk7XG4gIGJvcmRlcjogMXB4IHNvbGlkICRkYXJrLWdyZXk7Ki9cbiAgY3Vyc29yOiBwb2ludGVyO1xuICBtYXJnaW4tYm90dG9tOiAwLjVlbTtcbiAgcGFkZGluZzogMC41ZW0gMmVtO1xuICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDAuMTVzOyB9XG4gIC5kZW1vLWNvbnRyb2w6aG92ZXIge1xuICAgIC8qYmFja2dyb3VuZC1jb2xvcjogJGRhcmstZ3JleTsqL1xuICAgIC8qY29sb3I6ICR3aGl0ZTsqLyB9XG5cbmRpdi5kM3Rvb2x0aXAge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgd2lkdGg6IDE2MHB4O1xuICBwYWRkaW5nOiA0cHg7XG4gIGZvbnQ6IDEzcHggc2Fucy1zZXJpZjtcbiAgYmFja2dyb3VuZDogbGlnaHRzdGVlbGJsdWU7XG4gIGJvcmRlcjogMnB4O1xuICBib3JkZXItY29sb3I6IGdyYXk7XG4gIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gIG9wYWNpdHk6IDA7XG4gIG92ZXJmbG93OiB2aXNpYmxlOyB9XG4iXX0= */\"","import { Component, HostBinding } from '@angular/core';\nimport { Router, NavigationEnd } from '@angular/router';\nimport { GlobalNavService } from './global-nav.service';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss'],\n  providers: [ GlobalNavService ]\n})\nexport class AppComponent {\n  sidebarShown:boolean = true;\n  navbarPos:string;\n  projectId:string;\n\n  constructor(public router: Router, public globalNavService: GlobalNavService) {\n    router.events.subscribe(\n      (change:any) => {\n        if(change instanceof NavigationEnd) {\n          this.navbarPos = change.urlAfterRedirects;\n\n          if (change.urlAfterRedirects.includes('metric-project')) {\n            this.sidebarShown = false;\n            this.projectId = change.url.substr(16);\n          } else {\n            this.sidebarShown = true;\n          }\n        }\n      });\n  }\n\n  onRecalculate() {\n    this.globalNavService.onRecalculate();\n  }\n\n  // this.nodeService.getNode(path)\n  //   .subscribe(\n  //       node => {\n  //           this.nodeService.addNode(node);\n  //       },\n  //       err => {\n  //           console.log(err);\n  //       }\n  //   );\n}\n","import { BrowserModule } from '@angular/platform-browser';\nimport { BrowserAnimationsModule } from \"@angular/platform-browser/animations\";\nimport { NgModule } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { HttpModule, JsonpModule } from '@angular/http';\n\nimport { RouterModule, Routes } from '@angular/router';\n\nimport { AppComponent } from './app.component';\nimport { BarchartComponent } from './shared/barchart/barchart.component';\nimport { OpenRefineComponent } from './shared/open-refine/open-refine.component';\nimport { RawDataTableComponent } from './shared/raw-data-table/raw-data-table.component';\nimport { MetricOverviewComponent } from './shared/metric-overview/metric-overview.component';\nimport { MetricChecksOverviewComponent } from './shared/metric-checks-overview/metric-checks-overview.component';\nimport { QualityHeaderColComponent } from './shared/quality-header-col/quality-header-col.component';\nimport { SpanQualityHeaderColComponent } from './shared/span-quality-header-col/span-quality-header-col.component';\nimport { RawDataScrollBarVisualizationComponent } from './shared/raw-data-scroll-bar-visualization/raw-data-scroll-bar-visualization.component';\nimport { MetricDetailVisualizationComponent } from './shared/metric-detail-visualization/metric-detail-visualization.component';\nimport { CheckInputDirectiveDirective } from './shared/metric-checks-overview/check-input-directive.directive';\nimport { ProjectListComponent } from './project-list/project-list.component';\nimport { CreateProjectComponent } from './create-project/create-project.component';\nimport { ProjectListPipe, NonMetricsProjectListPipe } from './project-list/project-list.pipe';\n\nimport { ContextMenuModule } from 'ngx-contextmenu';\nimport { NgbModule } from '@ng-bootstrap/ng-bootstrap';\nimport { SidebarModule } from 'ng-sidebar';\nimport { MetricBrowserComponent } from './metric-browser/metric-browser.component';\nimport { MetricPreviewComponent } from './test/metric-preview/metric-preview.component';\nimport { OpenDataProvenanceVisComponent } from './open-data-prov/provenance-vis/open-data-provenance-vis.component';\nimport { RefineProvenanceComponent } from './refine-provenance/refine-provenance.component';\nimport { ProvenanceProjectListPipe, NonProvenanceProjectListPipe } from './refine-provenance/provenance-project-list.pipe';\nimport { RefineProvenanceExplorerComponent } from './refine-provenance-explorer/refine-provenance-explorer.component';\nimport { QualityProvenanceVisComponent } from './refine-provenance-explorer/quality-provenance-vis/quality-provenance-vis.component';\n\nconst appRoutes: Routes = [\n  {\n    path: '',\n    redirectTo: '/list-projects',\n    pathMatch: 'full'\n  },\n  { path: 'home',\n    redirectTo: '/list-projects',\n    pathMatch: 'full'\n  },\n  {\n    path: 'list-projects',\n    component: ProjectListComponent,\n    // Use it to store items such as page titles, breadcrumb text, and other read-only, static data. You'll use the resolve guard to retrieve dynamic data later in the guide.\n    data: { title: 'MetricDoc Projects' }\n  },\n  { \n    path: 'create-project',\n    component: CreateProjectComponent,\n    data: { title: 'Create New MetricDoc Project'}\n  },\n  { \n    path: 'create-project/:projectId',\n    component: CreateProjectComponent,\n    data: { title: 'Create New MetricDoc Project'}\n  },\n  {\n    path: 'metric-browser',\n    component: MetricBrowserComponent,\n    data: { title: 'Browse Available Metrics'}\n  },\n  {\n    path: 'metric-project/:projectId',\n    component: OpenRefineComponent\n  },\n  // Open Data Provenance - Adequate - Provenance Vis\n  {\n    path: 'open-data-provenance/:projectName',\n    component: OpenDataProvenanceVisComponent,\n    data: \n      {\n        title: 'Open Data Provenance Visualization'\n      }\n  },\n  {\n    path: 'open-data-provenance',\n    component: OpenDataProvenanceVisComponent,\n    data: \n      {\n        title: 'Open Data Provenance Visualization'\n      }\n  },\n  {\n    path: 'provenance-explorer',\n    component: RefineProvenanceComponent,\n    data: \n      {\n        title: 'OpenRefine Quality Provenance List'\n      }\n  },\n  {\n    path: 'provenance-explorer/:projectId',\n    component: RefineProvenanceExplorerComponent,\n    data: \n      {\n        title: 'OpenRefine Provenance Explorer'\n      }\n  },\n  { path: '**', component: ProjectListComponent }\n];\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    BarchartComponent,\n    OpenRefineComponent,\n    RawDataTableComponent,\n    MetricOverviewComponent,\n    MetricChecksOverviewComponent,\n    QualityHeaderColComponent,\n    SpanQualityHeaderColComponent,\n    RawDataScrollBarVisualizationComponent,\n    MetricDetailVisualizationComponent,\n    CheckInputDirectiveDirective,\n    ProjectListComponent,\n    CreateProjectComponent,\n    ProjectListPipe, \n    NonMetricsProjectListPipe, \n    MetricBrowserComponent, \n    MetricPreviewComponent, \n    OpenDataProvenanceVisComponent, \n    RefineProvenanceComponent, \n    ProvenanceProjectListPipe,\n    NonProvenanceProjectListPipe,\n    RefineProvenanceExplorerComponent,\n    QualityProvenanceVisComponent\n  ],\n  imports: [\n    RouterModule.forRoot(appRoutes, { enableTracing: true }),\n    NgbModule.forRoot(),\n    SidebarModule.forRoot(),\n    BrowserModule,\n    BrowserAnimationsModule,\n    FormsModule,\n    ReactiveFormsModule,\n    HttpModule,\n    JsonpModule,\n    ContextMenuModule.forRoot({\n      useBootstrap4: true,\n    })\n  ],\n  providers: [],\n  bootstrap: [ AppComponent ]\n})\nexport class AppModule { }\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NyZWF0ZS1wcm9qZWN0L2NyZWF0ZS1wcm9qZWN0LmNvbXBvbmVudC5zYXNzIn0= */\"","import { Component, OnInit, Input } from '@angular/core';\nimport { Router, ActivatedRoute, ParamMap } from '@angular/router';\nimport { DOCUMENT } from \"@angular/common\";\n\nimport { OpenRefineService }  from '../shared/open-refine/open-refine.service';\nimport { ProjectMetadata }    from '../shared/open-refine/model/project-metadata';\nimport { OpenRefineProject } from '../shared/open-refine/model/open-refine-project';\nimport { MetricFunction } from '../shared/open-refine/model/metric-function';\n\n@Component({\n  selector: 'app-create-project',\n  templateUrl: './create-project.component.html',\n  styleUrls: ['./create-project.component.sass'],\n  providers: [ OpenRefineService ]\n})\nexport class CreateProjectComponent implements OnInit {\n\n  objectKeys = Object.keys;\n\n  projectId;\n  refineUrl: string;\n  projectMetadata: ProjectMetadata;\n  refineProject: OpenRefineProject;\n  refineProjects:any;\n  rowModel: any;\n  metricFunctions: any;\n  metricsDisabled: boolean[][];\n\n  importSuccess: boolean = false;\n\n  errorMessage:string;\n\n  constructor(public route: ActivatedRoute, \n    public router: Router,\n    public openRefineService: OpenRefineService) {\n    this.openRefineService.getAllProjectMetadata().subscribe(\n      refineProjects => {\n          this.refineProjects = refineProjects.projects;\n          // console.log(this.refineProjects.projects);\n      },\n      error => this.errorMessage = <any>error\n    );\n  }\n\n  ngOnInit() {\n    this.projectId = this.route.snapshot.paramMap.get('projectId');\n    this.refineUrl = \"http://127.0.0.1:3333/project?project=\" + this.projectId;\n    if (this.projectId) {\n      this.openRefineService.getProjectMetadata(this.projectId)\n        .subscribe(\n          projectMetadata => this.projectMetadata = projectMetadata,\n          error => this.errorMessage = <any>error\n        );\n      this.openRefineService.getRefineProject(this.projectId)\n        .subscribe(\n          project => this.refineProject = project,\n          error => this.errorMessage = <any>error\n        );\n      this.openRefineService.getRows(this.projectId, 0, 1)\n        .subscribe(\n          rowModel => this.rowModel = rowModel\n        );\n      this.openRefineService.recommendMetrics(this.projectId)\n        .subscribe(\n          metricFunctions => {\n            this.metricFunctions = metricFunctions['recommendedMetrics'];\n            this.metricsDisabled = {} as any;\n            for(let col of Object.keys(this.metricFunctions)) {\n              this.metricsDisabled[col] = [];\n              for (let mIdx = 0; mIdx < this.metricFunctions[col].length; ++mIdx)\n                this.metricsDisabled[col][mIdx] = false;\n            }\n          });\n    } else {\n\n    }\n  }\n\n  toggleMetric(event: MouseEvent, column: string, metricIndex: number) {\n    this.metricsDisabled[column][metricIndex] = !this.metricsDisabled[column][metricIndex];\n  }\n\n  onTextKey(event: KeyboardEvent, column: string, metricIndex: number) {\n    this.metricFunctions[column].metrics[metricIndex].parameters = (<HTMLInputElement>event.target).value;\n  }\n\n  addMetricsOverlay() {\n    for (let i = 0; i < this.metricFunctions.length; ++i) {\n      for (let j = 0; j < this.metricFunctions[i].metrics.length; ++j) {\n        if (this.metricsDisabled[i][j]) {\n          this.metricFunctions.recommendedMetrics[i][j] = null;\n        }\n      }\n    }\n    this.openRefineService.setupProject(this.projectId, this.metricFunctions)\n      .subscribe(\n        project => {\n          this.refineProject;\n          this.openRefineService.evaluateMetrics(this.projectId);\n          this.router.navigate(['/metric-project', this.projectId]);\n        },\n        error => {\n          this.errorMessage = <any>error;\n          console.log('could not convert to metrics project');\n        }\n      );\n  }\n\n  goToRefineProject() {\n    window.location.href = this.refineUrl;\n  }\n\n}\n","import { Injectable } from '@angular/core';\nimport { Subject } from 'rxjs';\n\n@Injectable()\nexport class GlobalNavService {\n  private recalc = new Subject<string>();\n  recalc$ = this.recalc.asObservable();\n\n  constructor() { }\n\n  onRecalculate() {\n    this.recalc.next('test');\n  }\n}\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL21ldHJpYy1icm93c2VyL21ldHJpYy1icm93c2VyLmNvbXBvbmVudC5zYXNzIn0= */\"","import { Component, OnInit } from '@angular/core';\n\nimport { OpenRefineService } from '../shared/open-refine/open-refine.service';\n\n@Component({\n  selector: 'app-metric-browser',\n  templateUrl: './metric-browser.component.html',\n  styleUrls: ['./metric-browser.component.sass'],\n  providers: [ OpenRefineService ]\n})\nexport class MetricBrowserComponent implements OnInit {\n\n  availableMetrics:any[];\n\n  constructor(private openRefineService: OpenRefineService) {\n    this.openRefineService.getMetricDocFunctionsOverview().subscribe(\n      availableMetrics => {\n        this.availableMetrics = availableMetrics;\n      });\n  }\n\n  ngOnInit() {\n  }\n\n}\n","import { Injectable } from '@angular/core';\nimport { Http, Headers, RequestOptions, Response, Jsonp, URLSearchParams }  from '@angular/http';\nimport { HttpHeaders } from '@angular/common/http';\n\nimport { Observable } from 'rxjs/Rx';\n\n@Injectable()\nexport class GitlabService {\n\n  private gitlabUrl: string = 'http://adequate-project.semantic-web.at:5003/api/v4/projects';\n  private httpOptions = new RequestOptions({\n    headers: new Headers({\n      'PRIVATE-TOKEN': 'xbyMmAp4NoMXJS_pPjoP'\n    })\n  })\n\n  constructor(private http: Http, private jsonp: Jsonp) { }\n\n  getProjects() : Observable<any[]> {\n    return this.http.get(this.gitlabUrl + \"?search=mumok\", { })\n      .map(this.extractData)\n      .catch(this.handleError);\n  }\n\n  getCommits(projectId: any) : Observable<any> {\n    // let params = this.initializeParams(projectId);\n    return this.http.get(this.gitlabUrl + '/' + projectId + '/repository/commits?per_page=100', this.httpOptions) //?since=2017-01-01T00:00:00Z\n      .map(this.extractData)\n      .catch(this.handleError);\n  }\n\n  getCommit(projectId: any, commitId: any) : Observable<any> {\n    let id = commitId;\n    if(commitId.id)\n      id = commitId.id;\n    return this.http.get(this.gitlabUrl + '/' + projectId + '/repository/commits/' + id, this.httpOptions)\n      .map(this.extractData)\n      .catch(this.handleError);\n  }\n\n  //todo extend to fetch file information (csv, etc., meta-information)\n  getRawFileUrl(projectId: string, filename: string, commit: string) : string {\n    let searchParams = new URLSearchParams();\n    searchParams.set(\"ref\", commit);\n    // replace folder structure elements\n    filename = filename.replace(\"/\", \"%2F\");\n    return this.gitlabUrl + '/' + projectId + \"/repository/files/\" + filename + \"/raw?ref=\" + commit;\n    // return this.http.get(this.gitlabUrl + '/' + projectId + \"/repository/files/\" + filename + \"/raw\", { search: searchParams })\n    //   .map(response => response.text())\n    //   // .map(this.extractData)\n    //   .catch(this.handleError);\n  }\n\n  private extractData(res: Response) {\n    // response => <string[]> response.json()[1];\n\n    let body = res.json();\n    if(body.availableMetrics \n      && body.availableSpanningMetrics \n      && body.computeDuplicates\n      && body.metricColumnNames\n      && body.spanningMetrics) {\n      // this.response = body;\n    }\n    return body || { };\n  }\n\n  public handleError (error: Response | any) {\n    // In a real world app, we might use a remote logging infrastructure\n    let errMsg: string;\n    if (error instanceof Response) {\n      const body = error.json() || '';\n      const err = body.error || JSON.stringify(body);\n      const errormsg = JSON.parse(body.message);\n      errMsg = `${errormsg.message || ''}`;\n    } else {\n      errMsg = error.message ? error.message : error.toString();\n    }\n    console.error(errMsg);\n    return Observable.throw(errMsg);\n  }\n}\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL29wZW4tZGF0YS1wcm92L3Byb3ZlbmFuY2UtdmlzL29wZW4tZGF0YS1wcm92ZW5hbmNlLXZpcy5jb21wb25lbnQuc2NzcyJ9 */\"","import { Component, OnInit } from '@angular/core';\nimport { Http, Response, Jsonp, URLSearchParams }  from '@angular/http';\nimport { Router, ActivatedRoute, ParamMap } from '@angular/router';\n\nimport { Observable } from 'rxjs/Rx';\n\nimport { GitlabService } from '../gitlab.service';\nimport { OpenRefineService } from '../../shared/open-refine/open-refine.service';\n\nimport * as d3 from 'd3';\n\n@Component({\n  selector: 'app-open-data-provenance-vis',\n  templateUrl: './open-data-provenance-vis.component.html',\n  providers: [ GitlabService, OpenRefineService ],\n  styleUrls: ['./open-data-provenance-vis.component.scss']\n})\nexport class OpenDataProvenanceVisComponent implements OnInit {\n\n  projectId: string;\n  commits: any[];\n  gitlabProjects: any[];\n  currentProject: any;\n  projectsFromCommits = [];\n  qualityProjects: any[];\n  xDistByTime: boolean = false;\n\n  d3Transform;\n  d3ScaleChromatic;\n  r: number = 8;\n\n  m = [20, 80, 15, 120]; //top right bottom left\n  w: number;\n  h: number;\n  sim;\n\n  constructor(\n    protected http: Http,\n    protected route: ActivatedRoute,\n    protected gitlabService: GitlabService,\n    protected openRefineService: OpenRefineService\n  ) {\n    this.d3Transform = require(\"d3-transform\");\n    this.d3ScaleChromatic = require(\"d3-scale-chromatic\");\n  }\n\n  ngOnInit() {\n    this.projectId = this.route.snapshot.paramMap.get('projectName');\n    //initialize projects and commits\n    this.gitlabService.getProjects().subscribe(\n      projects => {\n        this.gitlabProjects = projects;\n        if(this.projectId) {\n          this.getCommitHistory();\n        }\n      },\n      error => {\n        console.log(error);\n      });\n    this.w = 1500 - this.m[1] - this.m[3],\n    this.h = 350 - this.m[0] - this.m[2];\n  }\n\n  getCommitHistory() {\n    this.currentProject = this.gitlabProjects.find(d => { return d.id == this.projectId});\n    this.gitlabService.getCommits(this.projectId).subscribe(data => {\n      this.commits = data;\n      let obs = [];\n      for(let commit of this.commits) {\n        obs.push(this.gitlabService.getCommit(this.projectId, commit));\n        // .subscribe(commitInfoSource => {\n        //   commit.stats = commitInfoSource.stats;\n        // });\n      }\n      Observable.forkJoin(obs).subscribe((commitArray:any) => {\n        for (let commitInfo of commitArray) {\n          let commitCurrent = this.commits.find(c => { return commitInfo.id == c.id});\n          commitCurrent.stats = commitInfo.stats;\n        }\n        this.createTimelineVis();\n        this.createOrFetchQualityProjects();\n      })\n    });\n  }\n\n  createOrFetchQualityProjects() {\n    if(this.currentProject) {\n      let projectObs: any[] = [];\n      let metricProjects = [];\n      let metricProjectsMetadata = [];\n      this.openRefineService.getAllProjectMetadata().subscribe((projectsOverviewMetadata: any) =>{\n        // let filterForProject = [];\n        for(let projectMetaId in projectsOverviewMetadata.projects) {\n          let currentProjMeta = projectsOverviewMetadata.projects[projectMetaId];\n          if(currentProjMeta.tags.indexOf(this.projectId) > -1)\n            this.projectsFromCommits.push({id: projectMetaId, meta: currentProjMeta});\n        }\n\n        let projectsMetadata = [];\n        let projectFromCommit;\n        for (let commit of this.commits) {\n          let currentProjectId;\n          projectFromCommit = this.projectsFromCommits.find(proj => { return proj.meta.tags.indexOf(commit.short_id) > -1});\n          \n          if(projectFromCommit) {\n            // we found an already existing dataset\n            metricProjects.push(this.openRefineService.getRefineProject(projectFromCommit.id));\n            projectFromCommit.commit = commit;\n          } else {\n            //TODO: take care of metadata, automatically create metrics project for all resource files\n        //     this.gitlabService.getRawFileUrl(this.projectId, \"metadata.json\", ).subscribe((data: any) => {\n        // let filenames = [];\n        // for(let file of data.resources) {\n        //   let filename:string = file.name;\n        // ,      \\u00c4, \\u00e4\n        // ,      \\u00d6, \\u00f6\n        // ,      \\u00dc, \\u00fc\n        //         \\u00df\n        //   filenames.push(filename.replace(\" \", \"_\").replace(\"\\u00fc\", \"\"))\n        // }\n            let dataUrl = this.gitlabService.getRawFileUrl(this.projectId, \"resources%2FKnstler_der_Sammlung_mumok\", commit.short_id);\n            projectObs.push(this.openRefineService.createOpenRefineMetricsProject(this.currentProject.name, this.projectId, commit.short_id, \"text/line-based/*sv\", \",\", dataUrl))\n          }\n        }\n\n        if(metricProjects.length == this.commits.length) {\n          Observable.forkJoin(metricProjects).subscribe((projects: any[]) => {\n            let metricProjects = [];\n            this.qualityProjects = projects;\n            for(let i = 0; i < this.commits.length; ++i) {\n              let projOfCommit = this.projectsFromCommits.find(data => { return data.meta.tags.indexOf(this.commits[i].short_id) > -1 });\n              projOfCommit.models = projects[i];\n              metricProjects.push(this.openRefineService.evaluateMetrics(projOfCommit.id));\n            }\n            Observable.forkJoin(metricProjects).subscribe((qualityProjects: any[]) => { \n              console.log(\"success\");\n              this.createQualityStream();\n            });\n            //TODO: on demand evaluate metrics\n            // for(let proj of this.projectsFromCommits) {\n            //   metricProjects.push(this.openRefineService.evaluateMetrics(proj.id));\n            // }\n            // Observable.forkJoin(metricProjects).subscribe((projects: any[]) => {\n            //   for(let i = 0; i < this.commits.length; ++i) {\n            //     let projOfCommit = this.projectsFromCommits.find(data => { return data.meta.tags.indexOf(this.commits[i].short_id) > -1 });\n            //     projOfCommit.models.overlayModels.metricsOverlayModel = projects[i];\n            //   }\n            //   console.log(projects);\n            //   //TODO sort by commit\n            //   this.createQualityStream();\n            // })\n          });\n        } else{\n          Observable.forkJoin(projectObs).subscribe((projectsIds: any[]) => {\n            \n            let metricRecommendations = []\n            for(let projectId of projectsIds) {\n              metricRecommendations.push(this.openRefineService.recommendMetrics(projectId));\n            }\n            Observable.forkJoin(metricRecommendations).subscribe((recommendations: any[]) => {\n                let qualityProjects = []\n                for (let i = 0; i < projectsIds.length; ++i) {\n                  qualityProjects.push(this.openRefineService.setupProject(projectsIds[i], recommendations[i].columns));\n                }\n                Observable.forkJoin(qualityProjects).subscribe((qualityProjectsResponse: any[]) => {\n                  let metricProjects = []\n                  for(let i = 0; i < qualityProjectsResponse.length; ++i) {\n                    metricProjects.push(this.openRefineService.getOverlayModel(projectFromCommit));\n                  }\n                    for(let commit of this.commits) {\n                      let projectFromCommit = this.projectsFromCommits.find(data => { return data.tags.indexOf(commit.short_id) > -1 });//filterForProject.find(proj => { return proj.meta.tags.indexOf(commit.short_id) > -1});\n                    for (let response of qualityProjectsResponse) {\n                      metricProjects.push(this.openRefineService.evaluateMetrics(response.historyEntry.id));\n                    }\n                    Observable.forkJoin(metricProjects).subscribe((qualityProjects: any[]) => {\n                      for(let response of qualityProjectsResponse) {\n                        metricProjects.push(this.openRefineService.getRefineProject(response.historyEntry.id));\n                      }\n                      Observable.forkJoin(metricProjects).subscribe((qualityProjects: any[]) => {\n                        this.projectsFromCommits = [];\n                        // for (let commit of this.commits) {\n                        //   let qualityProject\n                        //   this.projectsFromCommits.push()\n                        // }\n                        this.createQualityStream();\n                      })\n                    })\n                  }\n                });\n            })\n          })\n        }\n      })\n    }\n  }\n\n  createQualityStream() {\n    let svg = d3.select(\"svg.quality-stream\");\n    \n    // prepare key pairs, we need to sort by metric instead of column\n    let keys = [];\n    this.projectsFromCommits.forEach((d: any, i: number, data: any[]) => {\n      for(let col of d.models.overlayModels.metricsOverlayModel.metricColumnNames) {\n        if(col != null && !col.columnName.includes(\"404 File Not Found\")) {\n          for(let metric of d.models.overlayModels.metricsOverlayModel.availableMetrics) {\n            let keyPair = {col: col.columnName, metric: metric};\n            if(!keys.some( k => k.col === keyPair.col && k.metric === keyPair.metric))\n              keys.push(keyPair);\n            // if(keys.indexOf(keyPair) == -1) {\n            //   keys.push(keyPair);\n            // }\n          }\n        }\n      }\n      for(let col of d.models.overlayModels.metricsOverlayModel.metricColumnNames) {\n        // check if dataset might be missing\n        if(col != null && !col.columnName.includes(\"404 File Not Found\")) {\n          for (let spanMetric of d.models.overlayModels.metricsOverlayModel.availableSpanningMetrics) {\n            let keyPair = {col: col.columnName, metric: spanMetric};\n            if(!keys.some( k => k.col === keyPair.col && k.metric === keyPair.metric))\n              keys.push(keyPair);\n          }\n        }\n      }\n    });\n\n    keys.sort((a: any, b: any) => {\n      if (a.metric < b.metric) return -1;\n      else if (a.metric > b.metric) return 1;\n      else return 0;\n    })\n\n    let stack = d3.stack()\n      .keys(keys)\n      .value((d: any, keyPair: any, j, data) => {\n        let metricCols = d.models.overlayModels.metricsOverlayModel.metricColumnNames;\n        let mCol = d.models.overlayModels.metricsOverlayModel.metricColumnNames.filter((d, i) => {\n          return d.columnName === keyPair.col;\n        })[0];\n        if(mCol && mCol.metrics != null && mCol.metrics[keyPair.metric] != null)\n          return mCol.metrics[keyPair.metric].measure;\n        else if (mCol && mCol.spanningMetrics != null && mCol.spanningMetrics[keyPair.metric] != null)\n          return mCol.spanningMetrics[keyPair.metric].measure;\n        else return 0;\n      })(this.projectsFromCommits);\n\n    // max scaling is max number of available metrics\n    let y = d3.scaleLinear().rangeRound([this.h, 0]).domain([0, 2.5]).nice();\n    // scaling\n    let projIds = this.projectsFromCommits.map((d: any) => { return d.id })\n    let scaleXByCommit = d3.scaleBand().domain(projIds).range([15, this.w]).padding(0);\n    let metricsAvailable = this.projectsFromCommits[0].models.overlayModels.metricsOverlayModel.availableMetrics.concat(this.projectsFromCommits[0].models.overlayModels.metricsOverlayModel.availableSpanningMetrics)\n    \n    let setChromatic = [].concat(this.d3ScaleChromatic.schemeSet2);\n    let darkChromatic = [].concat(this.d3ScaleChromatic.schemeDark2);\n    let colorScale = d3.scaleOrdinal(setChromatic).domain(metricsAvailable);\n    let colorStroke = d3.scaleOrdinal(darkChromatic).domain(metricsAvailable);\n    \n    svg.selectAll(\"g\")\n      .data(stack)\n      .enter().append(\"g\")\n        .attr(\"transform\", this.d3Transform.transform().translate(20, 15))\n        .attr(\"fill\", (d:any) => { \n          return colorScale(d.key.metric); \n        })\n        .attr(\"stroke\", (d:any) => {\n          return colorStroke(d.key.metric);\n        })\n        .attr(\"class\", (d:any) => { return d.id })\n      .selectAll(\"rect\")\n      .data((d:any) => { return d; })\n      .enter().append(\"rect\")\n        .attr(\"x\", (d:any) => {\n          return scaleXByCommit(d.data.id); \n        })\n        .attr(\"y\", (d) => { \n          return y(d[1]); \n        })\n        .attr(\"height\", (d) => {\n          return y(d[0]) - y(d[1]); \n        })\n        .attr(\"width\", scaleXByCommit.bandwidth())\n        .on(\"click\", (d: any, i: number) => {\n          window.open(\"http://localhost:4200/metric-project/\" + d.data.id, \"blank\");\n        });\n\n    svg.selectAll(\"g\").append(\"title\").text((d: any) => { return \"dirtiness of \" + d.key.col + \" - \" + d.key.metric });\n\n    // let legend = svg.selectAll(\"g\").append(\"g\")\n    //   .attr(\"class\", \"legend\")\n    //   .attr(\"transform\", this.d3Transform.transform().translate(20, 15))\n    //   .style(\"font-size\", \"12px\")\n    //   .call(this.d3Legend);\n    let legend = svg.append(\"g\")\n      .attr(\"transform\", this.d3Transform.transform().translate(this.w+180, 15));\n    legend.selectAll(\"rect\")\n    .data(metricsAvailable)\n      .enter().append(\"rect\")\n      .attr(\"width\", 14)\n      .attr(\"height\", 14)\n      .attr(\"rx\", 14)\n      .attr(\"ry\", 14)\n      .attr(\"fill\", (d: any) => { return colorScale(d)})\n      .attr(\"transform\", (d: any, i: number) => { return \"translate(0, \"+i*16+\")\" });\n    legend.selectAll(\"text.legend\")\n    .data(metricsAvailable)\n      .enter().append(\"text\")\n      .text((d: any) => { return d; })\n      .style(\"text-anchor\", \"end\")\n      .attr(\"dy\", \".25em\")\n      .attr(\"transform\", (d: any, i: number) => { return \"translate(-4, \"+i*16+\")\" })\n      .attr(\"y\", 9);\n      // .attr(\"transform\", (d: any, i: number, data: any[]) => {\n      //   return this.d3Transform.transform().translate(5, i*15);\n      // });\n  }\n\n  createTimelineVis() {\n    let svg = d3.select(\"svg.git-graph\");\n\n    // prepare commmits, calculate height for commit \n    let parents = [];\n    let commitLinks = []\n    let maxCount: number = 0;\n    for (let comm of this.commits) {\n      let currentCommCount = parents.find(d => { return d.id == comm.id });\n      for (let parentId of comm.parent_ids) {\n        if(!currentCommCount) {\n          currentCommCount = {id: comm.id, count: 0};\n          parents.push(currentCommCount);\n        }\n\n        let parentCount = parents.find(d => { return d.id == parentId });\n        if(!parentCount) {\n          parents.push({id: parentId, count: currentCommCount.count + comm.parent_ids.indexOf(parentId)});\n        } else {\n          currentCommCount.count += comm.parent_ids.indexOf(parentId);\n        }\n      }\n      comm.yHeight = currentCommCount.count;\n\n\n      for (let parent of comm.parent_ids) {\n        commitLinks.push({source: comm.id, target: parent});\n      }\n    }\n\n    // calculate scaling\n    let maxTime = d3.max(this.commits, (commit: any) => {return commit.created_at});\n    let minTime = d3.min(this.commits, (commit: any) => {return commit.created_at});\n\n    let maxAdditions = d3.max(this.commits, (commit: any) => { return commit.stats.additions });\n    let maxDeletions = d3.max(this.commits, (commit: any) => { return commit.stats.deletions });\n    //offset for small values, otherwise they would not be visible\n    let scaleChangeAdditions = d3.scaleLinear().domain([0, maxAdditions]).range([2, 40]);\n    let scaleChangeDeletions = d3.scaleLinear().domain([0, maxDeletions]).range([2, 40]);\n\n    let scaleXByTime = d3.scaleTime().domain([Date.parse(minTime), Date.parse(maxTime)]).range([0, this.w - 15]);\n    let scaleXByCommit = d3.scaleLinear().domain([0, this.commits.length]).range([this.w - 15, 0]);\n\n    let color = d3.scaleOrdinal(d3.schemeCategory10);\n\n    let scaleYMax = d3.max(parents, (parentCount: any) => { return parentCount.count });\n    let miniHeight = scaleYMax * 40 + 50, //40 accords to maximum additions and deletions\n        mainHeight = this.h - miniHeight - 50;\n    let scaleY = d3.scaleLinear().domain([-1, scaleYMax]).range([0, miniHeight]);\n\n    //TODO: forceX either do x axis distribution by date or by commit (evenly distributed)\n    //      add dropdown to toggle \n    let forceX;\n    if(this.xDistByTime) {\n      forceX = d3.forceX((commit: any) => { return scaleXByTime(Date.parse(commit.created_at)) }).strength(10);\n    }\n    else {\n      forceX = d3.forceX((commit: any, i: number) => { return scaleXByCommit(i) }).strength(10);\n    }\n\n    this.sim = d3.forceSimulation().force(\"xAxis\", forceX)\n      .force(\"yAxis\", d3.forceY((commit: any) => { return (scaleY(commit.yHeight)) }).strength(10))\n      .force(\"link\", d3.forceLink().id((commit: any) => { return commit.id }));\n\n    let visCanvas = svg.append(\"g\")\n      .attr(\"class\", \"vis\")\n      .attr(\"transform\", this.d3Transform.transform().translate(20, 15));\n\n    let link = visCanvas.append(\"g\")\n      .attr(\"class\", \"links\")\n    .selectAll(\"line\")\n    .data(commitLinks)\n    .enter().append(\"line\")\n      .attr(\"stroke\", (link:any) => {\n        let source = this.commits.find((commit) => { return commit.id == link.source });\n        let target = this.commits.find((commit) => { return commit.id == link.target });\n        return source.yHeight > target.yHeight ? color(source.yHeight) : color(target.yHeight);\n      })\n      .attr(\"stroke-width\", 3);\n\n    let node = visCanvas.append(\"g\")\n      .attr(\"class\", \"nodes\")\n    .selectAll(\"circle\")\n    .data(this.commits)\n    .enter().append(\"circle\")\n      .attr(\"r\", this.r)\n      .attr(\"fill\", (commit) => { return color(commit.yHeight) })\n      .on(\"click\", (d: any, i: number) => {\n        console.log(d);\n        let shortId = d.short_id;\n        let proj = this.projectsFromCommits.find((d, i, a) => {\n          return d.meta.tags.includes(shortId);\n        });\n        window.open(this.currentProject.web_url + \"/commit/\" + d.id, \"blank\");\n      })\n      .call(d3.drag()\n        .on(\"start\", this.dragstarted)\n        .on(\"drag\", this.dragged)\n        .on(\"end\", this.dragended));\n\n    let translateRect = this.d3Transform.transform().translate((e) => { return [-17, -scaleChangeAdditions(e.stats.additions)] });\n\n    visCanvas.append(\"g\")\n      .attr(\"class\", \"additions\")\n    .selectAll(\"rect\")\n      .data(this.commits)\n      .enter().append(\"rect\")\n        .attr(\"width\", 10)\n        .attr(\"height\", (d) => { return scaleChangeAdditions(d.stats.additions) })\n        .attr(\"transform\", translateRect)\n        .attr(\"fill\", \"green\");\n    visCanvas.append(\"g\")\n      .attr(\"class\", \"deletions\")\n    .selectAll(\"rect\")\n      .data(this.commits)\n      .enter().append(\"rect\")\n        .attr(\"width\", 10)\n        .attr(\"height\", (d) => { return scaleChangeDeletions(d.stats.deletions) })\n        .attr(\"transform\", this.d3Transform.transform().translate(-17, 0))\n        .attr(\"fill\", \"red\");\n\n    if(this.xDistByTime) {\n      visCanvas.append(\"g\")\n        .attr(\"class\", \"x-axis\")\n        .attr(\"transform\", this.d3Transform.transform().translate(0, mainHeight))\n        .call(d3.axisBottom(scaleXByTime)\n          .tickFormat(d3.timeFormat(\"%Y-%m-%d\"))\n          .tickArguments([d3.timeWeek.every(1)])\n          .ticks(this.commits.length))\n        .selectAll(\"text\")\n          .style(\"text-anchor\", \"end\")\n          .attr(\"dx\", \"-.8em\")\n          .attr(\"dy\", \".15em\")\n          .attr(\"transform\", this.d3Transform.transform().rotate(-65));\n    } else {\n      // visCanvas.append(\"g\")\n      //   .attr(\"class\", \"x-axis\")\n      //   .attr(\"transform\", this.d3Transform.transform().translate(0, mainHeight))\n      //   .call(d3.axisBottom(scaleXByCommit)\n      //     .ticks(this.commits.length+2))\n      //   .selectAll(\"text\")\n      //     .style(\"text-anchor\", \"end\")\n      //     .attr(\"dx\", \"-.8em\")\n      //     .attr(\"dy\", \".15em\")\n      //     .attr(\"transform\", this.d3Transform.transform().rotate(-65));\n    }\n\n    node.append(\"title\").text((commit) => { return \"commit msg: \" + commit.title });\n    \n    this.sim.nodes(this.commits)\n      .on(\"tick\", ticked);\n    this.sim.force(\"link\")\n      .links(commitLinks);\n    // this.sim.force(\"yAxis\").links(commitLinks);//.nodes(node);\n\n    function ticked() {\n      link\n          .attr(\"x1\", function(d) {\n            return d.source.x; \n          })\n          .attr(\"y1\", function(d, i, group) {\n            // d3.select(group[i]).select(\"rect\").attr(\"y\", d.target.y = (d.target.y - d.source.y));\n            return d.source.y; \n          })\n          .attr(\"x2\", function(d) { \n            return d.target.x; \n          })\n          .attr(\"y2\", function(d) { \n            return d.target.y; \n          });\n\n      node\n          .attr(\"cx\", function(d, i, group) {\n            let change = visCanvas.select(\"g.additions\").select(\"rect:nth-child(\" + (i+1) + \")\");\n            // change.attr(\"x\", d.x - 17); //subtract by radius and bar width\n            change.attr(\"x\", d.x);\n            visCanvas.select(\"g.deletions\")\n            .select(\"rect:nth-child(\" + (i+1) + \")\")\n              // .attr(\"x\", d.x - 17);\n              .attr(\"x\", d.x);\n            return d.x;\n          })\n          .attr(\"cy\", function(d, i, group) { \n            let change = visCanvas.select(\"g.additions\")\n            .select(\"rect:nth-child(\" + (i+1) + \")\")\n              // .attr(\"y\", (commit:any) => { return d.y - scaleChangeAdditions(commit.stats.additions) });\n              .attr(\"y\", d.y);\n            visCanvas.select(\"g.deletions\")\n            .select(\"rect:nth-child(\" + (i+1) + \")\")\n              .attr(\"y\", d.y);\n            return d.y; \n          });\n    }\n  }\n\n  private dragstarted(d) {\n    if (!d3.event.active) this.sim.alphaTarget(0.3).restart();\n    d.fx = d.x;\n    d.fy = d.y;\n  }\n\n  private dragged(d) {\n    d.fx = d3.event.x;\n    d.fy = d3.event.y;\n  }\n\n  private dragended(d) {\n    if (!d3.event.active) this.sim.alphaTarget(0);\n    d.fx = null;\n    d.fy = null;\n  }\n\n  // private ticked()\n}\n","module.exports = \"span.fa {\\n  margin-right: 6px; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9jaHJpc3RpYW5ib3JzL1Byb2plY3RzL21ldHJpY2RvY19hbmd1bGFyL3NyYy9hcHAvcHJvamVjdC1saXN0L3Byb2plY3QtbGlzdC5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGlCQUFnQixFQUFBIiwiZmlsZSI6InNyYy9hcHAvcHJvamVjdC1saXN0L3Byb2plY3QtbGlzdC5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbInNwYW4uZmEge1xuICBtYXJnaW4tcmlnaHQ6NnB4O1xufSJdfQ== */\"","import { \n  Component, OnInit, OnDestroy,\n  Output, EventEmitter \n} from '@angular/core';\nimport { Subscription }   from 'rxjs/Subscription';\n\nimport { OpenRefineService } from '../shared/open-refine/open-refine.service';\nimport { OpenRefineProject } from '../shared/open-refine/model/open-refine-project';\n\n@Component({\n  selector: 'app-project-list',\n  templateUrl: './project-list.component.html',\n  styleUrls: ['./project-list.component.scss'],\n  providers: [ OpenRefineService ]\n})\nexport class ProjectListComponent implements OnInit {\n\n  refineProjects:any;\n  errorMessage:String;\n  sidebarShown:boolean;\n\n  subscription: Subscription;\n\n  constructor(protected openRefineService: OpenRefineService) { \n\n    this.openRefineService.getAllProjectMetadata().subscribe(\n      refineProjects => {\n          this.refineProjects = refineProjects.projects;\n          // console.log(this.refineProjects.projects);\n      },\n      error => this.errorMessage = <any>error\n    );\n  }\n\n  ngOnInit() {\n  }\n}","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n  name: 'metricProjects'\n})\nexport class ProjectListPipe implements PipeTransform {\n\n  transform(value: any, args?: any): any {\n    let keys = [];\n    for (let key in value) {\n      if(value[key].customMetadata[\"metricsProject\"]) {\n        keys.push({key: key, value: value[key]});\n      }\n    }\n    return keys;\n  }\n\n}\n\n@Pipe({\n  name: 'nonMetricProjects'\n})\nexport class NonMetricsProjectListPipe implements PipeTransform {\n\n  transform(value: any, args?: any): any {\n    let keys = [];\n    for (let key in value) {\n      if(!value[key].customMetadata[\"metricsProject\"]) {\n        keys.push({key: key, value: value[key]});\n      }\n    }\n    return keys;\n  }\n\n}\n","// https://github.com/d3/d3-sankey Version 0.7.1. Copyright 2017 Mike Bostock.\n(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('d3-array'), require('d3-collection'), require('d3-shape')) :\n\ttypeof define === 'function' && define.amd ? define(['exports', 'd3-array', 'd3-collection', 'd3-shape'], factory) :\n\t(factory((global.d3 = global.d3 || {}),global.d3,global.d3,global.d3));\n}(this, (function (exports,d3Array,d3Collection,d3Shape) { 'use strict';\n\nfunction targetDepth(d) {\n  return d.target.depth;\n}\n\nfunction left(node) {\n  return node.depth;\n}\n\nfunction right(node, n) {\n  return n - 1 - node.height;\n}\n\nfunction justify(node, n) {\n  return node.sourceLinks.length ? node.depth : n - 1;\n}\n\nfunction center(node) {\n  return node.targetLinks.length ? node.depth\n      : node.sourceLinks.length ? d3Array.min(node.sourceLinks, targetDepth) - 1\n      : 0;\n}\n\nfunction constant(x) {\n  return function() {\n    return x;\n  };\n}\n\nfunction ascendingSourceBreadth(a, b) {\n  return ascendingBreadth(a.source, b.source) || a.index - b.index;\n}\n\nfunction ascendingTargetBreadth(a, b) {\n  return ascendingBreadth(a.target, b.target) || a.index - b.index;\n}\n\nfunction ascendingBreadth(a, b) {\n  return a.y0 - b.y0;\n}\n\nfunction value(d) {\n  return d.value;\n}\n\nfunction nodeCenter(node) {\n  return (node.y0 + node.y1) / 2;\n}\n\nfunction weightedSource(link) {\n  return nodeCenter(link.source) * link.value;\n}\n\nfunction weightedTarget(link) {\n  return nodeCenter(link.target) * link.value;\n}\n\nfunction defaultId(d) {\n  return d.index;\n}\n\nfunction defaultNodes(graph) {\n  return graph.nodes;\n}\n\nfunction defaultLinks(graph) {\n  return graph.links;\n}\n\nfunction find(nodeById, id) {\n  var node = nodeById.get(id);\n  if (!node) throw new Error(\"missing: \" + id);\n  return node;\n}\n\nvar sankey = function() {\n  var x0 = 0, y0 = 0, x1 = 1, y1 = 1, // extent\n      dx = 24, // nodeWidth\n      py = 8, // nodePadding\n      id = defaultId,\n      align = justify,\n      nodes = defaultNodes,\n      links = defaultLinks,\n      iterations = 32;\n\n  function sankey() {\n    var graph = {nodes: nodes.apply(null, arguments), links: links.apply(null, arguments)};\n    computeNodeLinks(graph);\n    computeNodeValues(graph);\n    computeNodeDepths(graph);\n    computeNodeBreadths(graph, iterations);\n    computeLinkBreadths(graph);\n    return graph;\n  }\n\n  sankey.update = function(graph) {\n    computeLinkBreadths(graph);\n    return graph;\n  };\n\n  sankey.nodeId = function(_) {\n    return arguments.length ? (id = typeof _ === \"function\" ? _ : constant(_), sankey) : id;\n  };\n\n  sankey.nodeAlign = function(_) {\n    return arguments.length ? (align = typeof _ === \"function\" ? _ : constant(_), sankey) : align;\n  };\n\n  sankey.nodeWidth = function(_) {\n    return arguments.length ? (dx = +_, sankey) : dx;\n  };\n\n  sankey.nodePadding = function(_) {\n    return arguments.length ? (py = +_, sankey) : py;\n  };\n\n  sankey.nodes = function(_) {\n    return arguments.length ? (nodes = typeof _ === \"function\" ? _ : constant(_), sankey) : nodes;\n  };\n\n  sankey.links = function(_) {\n    return arguments.length ? (links = typeof _ === \"function\" ? _ : constant(_), sankey) : links;\n  };\n\n  sankey.size = function(_) {\n    return arguments.length ? (x0 = y0 = 0, x1 = +_[0], y1 = +_[1], sankey) : [x1 - x0, y1 - y0];\n  };\n\n  sankey.extent = function(_) {\n    return arguments.length ? (x0 = +_[0][0], x1 = +_[1][0], y0 = +_[0][1], y1 = +_[1][1], sankey) : [[x0, y0], [x1, y1]];\n  };\n\n  sankey.iterations = function(_) {\n    return arguments.length ? (iterations = +_, sankey) : iterations;\n  };\n\n  // Populate the sourceLinks and targetLinks for each node.\n  // Also, if the source and target are not objects, assume they are indices.\n  function computeNodeLinks(graph) {\n    graph.nodes.forEach(function(node, i) {\n      node.index = i;\n      node.sourceLinks = [];\n      node.targetLinks = [];\n    });\n    var nodeById = d3Collection.map(graph.nodes, id);\n    graph.links.forEach(function(link, i) {\n      link.index = i;\n      var source = link.source, target = link.target;\n      if (typeof source !== \"object\") source = link.source = find(nodeById, source);\n      if (typeof target !== \"object\") target = link.target = find(nodeById, target);\n      source.sourceLinks.push(link);\n      target.targetLinks.push(link);\n    });\n  }\n\n  // Compute the value (size) of each node by summing the associated links.\n  function computeNodeValues(graph) {\n    // graph.nodes.forEach(function(node) {\n      // node.value = Math.max(\n      //   d3Array.sum(node.sourceLinks, value),\n      //   d3Array.sum(node.targetLinks, value)\n      // );\n    // });\n  }\n\n  // Iteratively assign the depth (x-position) for each node.\n  // Nodes are assigned the maximum depth of incoming neighbors plus one;\n  // nodes with no incoming links are assigned depth zero, while\n  // nodes with no outgoing links are assigned the maximum depth.\n  function computeNodeDepths(graph) {\n    var nodes, next, x;\n\n    for (nodes = graph.nodes, next = [], x = 0; nodes.length; ++x, nodes = next, next = []) {\n      nodes.forEach(function(node) {\n        node.depth = x;\n        node.sourceLinks.forEach(function(link) {\n          if (next.indexOf(link.target) < 0) {\n            next.push(link.target);\n          }\n        });\n      });\n    }\n\n    for (nodes = graph.nodes, next = [], x = 0; nodes.length; ++x, nodes = next, next = []) {\n      nodes.forEach(function(node) {\n        node.height = x;\n        node.targetLinks.forEach(function(link) {\n          if (next.indexOf(link.source) < 0) {\n            next.push(link.source);\n          }\n        });\n      });\n    }\n\n    var kx = (x1 - x0 - dx) / (x - 1);\n    graph.nodes.forEach(function(node) {\n      node.x1 = (node.x0 = x0 + Math.max(0, Math.min(x - 1, Math.floor(align.call(null, node, x)))) * kx) + dx;\n    });\n  }\n\n  function computeNodeBreadths(graph) {\n    var columns = d3Collection.nest()\n        .key(function(d) { return d.x0; })\n        .sortKeys(d3Array.ascending)\n        .entries(graph.nodes)\n        .map(function(d) { return d.values; });\n\n    //\n    initializeNodeBreadth();\n    resolveCollisions();\n    for (var alpha = 1, n = iterations; n > 0; --n) {\n      relaxRightToLeft(alpha *= 0.99);\n      resolveCollisions();\n      relaxLeftToRight(alpha);\n      resolveCollisions();\n    }\n\n    function initializeNodeBreadth() {\n      var ky = d3Array.min(columns, function(nodes) {\n        return (y1 - y0 - (nodes.length - 1) * py) / d3Array.sum(nodes, value);\n      });\n\n      columns.forEach(function(nodes) {\n        nodes.forEach(function(node, i) {\n          node.y1 = (node.y0 = i) + node.value * ky;\n        });\n      });\n\n      graph.links.forEach(function(link) {\n        link.width = link.value * ky;\n      });\n    }\n\n    function relaxLeftToRight(alpha) {\n      columns.forEach(function(nodes) {\n        nodes.forEach(function(node) {\n          if (node.targetLinks.length) {\n            var dy = (d3Array.sum(node.targetLinks, weightedSource) / d3Array.sum(node.targetLinks, value) - nodeCenter(node)) * alpha;\n            node.y0 += dy, node.y1 += dy;\n          }\n        });\n      });\n    }\n\n    function relaxRightToLeft(alpha) {\n      columns.slice().reverse().forEach(function(nodes) {\n        nodes.forEach(function(node) {\n          if (node.sourceLinks.length) {\n            var dy = (d3Array.sum(node.sourceLinks, weightedTarget) / d3Array.sum(node.sourceLinks, value) - nodeCenter(node)) * alpha;\n            node.y0 += dy, node.y1 += dy;\n          }\n        });\n      });\n    }\n\n    function resolveCollisions() {\n      columns.forEach(function(nodes) {\n        var node,\n            dy,\n            y = y0,\n            n = nodes.length,\n            i;\n\n        // Push any overlapping nodes down.\n        nodes.sort(ascendingBreadth);\n        for (i = 0; i < n; ++i) {\n          node = nodes[i];\n          dy = y - node.y0;\n          if (dy > 0) node.y0 += dy, node.y1 += dy;\n          y = node.y1 + py;\n        }\n\n        // If the bottommost node goes outside the bounds, push it back up.\n        dy = y - py - y1;\n        if (dy > 0) {\n          y = (node.y0 -= dy), node.y1 -= dy;\n\n          // Push any overlapping nodes back up.\n          for (i = n - 2; i >= 0; --i) {\n            node = nodes[i];\n            dy = node.y1 + py - y;\n            if (dy > 0) node.y0 -= dy, node.y1 -= dy;\n            y = node.y0;\n          }\n        }\n      });\n    }\n  }\n\n  function computeLinkBreadths(graph) {\n    graph.nodes.forEach(function(node) {\n      node.sourceLinks.sort(ascendingTargetBreadth);\n      node.targetLinks.sort(ascendingSourceBreadth);\n    });\n    graph.nodes.forEach(function(node) {\n      var y0 = node.y0, y1 = y0;\n      node.sourceLinks.forEach(function(link) {\n        link.y0 = y0 + link.width / 2, y0 += link.width;\n      });\n      node.targetLinks.forEach(function(link) {\n        link.y1 = y1 + link.width / 2, y1 += link.width;\n      });\n    });\n  }\n\n  return sankey;\n};\n\nfunction horizontalSource(d) {\n  return [d.source.x1, d.y0];\n}\n\nfunction horizontalTarget(d) {\n  return [d.target.x0, d.y1];\n}\n\nvar sankeyLinkHorizontal = function() {\n  return d3Shape.linkHorizontal()\n      .source(horizontalSource)\n      .target(horizontalTarget);\n};\n\nexports.sankey = sankey;\nexports.sankeyCenter = center;\nexports.sankeyLeft = left;\nexports.sankeyRight = right;\nexports.sankeyJustify = justify;\nexports.sankeyLinkHorizontal = sankeyLinkHorizontal;\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n})));\n","module.exports = \"/*div.d3tooltip {\\n    position: absolute;\\n    text-align: center;\\n    padding: 4px;\\n    font: 13px sans-serif;\\n    background: lightsteelblue;\\n    border: 0px;\\n    border-radius: 8px;\\n    pointer-events: none;\\n    overflow:visible;\\n}*/\\ndiv.d3tooltip span {\\n  overflow: hidden; }\\npath.metric-link {\\n  stroke-width: 1;\\n  stroke-opacity: 1;\\n  stroke-width: 0.5;\\n  fill-opacity: 1; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9jaHJpc3RpYW5ib3JzL1Byb2plY3RzL21ldHJpY2RvY19hbmd1bGFyL3NyYy9hcHAvcmVmaW5lLXByb3ZlbmFuY2UtZXhwbG9yZXIvcXVhbGl0eS1wcm92ZW5hbmNlLXZpcy9xdWFsaXR5LXByb3ZlbmFuY2UtdmlzLmNvbXBvbmVudC5zY3NzIiwic3JjL2FwcC9yZWZpbmUtcHJvdmVuYW5jZS1leHBsb3Jlci9xdWFsaXR5LXByb3ZlbmFuY2UtdmlzL3F1YWxpdHktcHJvdmVuYW5jZS12aXMuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7RUNVRTtBREVGO0VBQ0ksZ0JBQWdCLEVBQUE7QUFHcEI7RUFDSSxlQUFlO0VBQ2YsaUJBQWlCO0VBQ2pCLGlCQUFpQjtFQUNqQixlQUFlLEVBQUEiLCJmaWxlIjoic3JjL2FwcC9yZWZpbmUtcHJvdmVuYW5jZS1leHBsb3Jlci9xdWFsaXR5LXByb3ZlbmFuY2UtdmlzL3F1YWxpdHktcHJvdmVuYW5jZS12aXMuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIvKmRpdi5kM3Rvb2x0aXAge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgcGFkZGluZzogNHB4O1xuICAgIGZvbnQ6IDEzcHggc2Fucy1zZXJpZjtcbiAgICBiYWNrZ3JvdW5kOiBsaWdodHN0ZWVsYmx1ZTtcbiAgICBib3JkZXI6IDBweDtcbiAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gICAgb3ZlcmZsb3c6dmlzaWJsZTtcbn0qL1xuXG5kaXYuZDN0b29sdGlwIHNwYW4ge1xuICAgIG92ZXJmbG93OiBoaWRkZW47XG59XG5cbnBhdGgubWV0cmljLWxpbmsge1xuICAgIHN0cm9rZS13aWR0aDogMTtcbiAgICBzdHJva2Utb3BhY2l0eTogMTtcbiAgICBzdHJva2Utd2lkdGg6IDAuNTtcbiAgICBmaWxsLW9wYWNpdHk6IDE7XG59IiwiLypkaXYuZDN0b29sdGlwIHtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIHBhZGRpbmc6IDRweDtcbiAgICBmb250OiAxM3B4IHNhbnMtc2VyaWY7XG4gICAgYmFja2dyb3VuZDogbGlnaHRzdGVlbGJsdWU7XG4gICAgYm9yZGVyOiAwcHg7XG4gICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICAgIG92ZXJmbG93OnZpc2libGU7XG59Ki9cbmRpdi5kM3Rvb2x0aXAgc3BhbiB7XG4gIG92ZXJmbG93OiBoaWRkZW47IH1cblxucGF0aC5tZXRyaWMtbGluayB7XG4gIHN0cm9rZS13aWR0aDogMTtcbiAgc3Ryb2tlLW9wYWNpdHk6IDE7XG4gIHN0cm9rZS13aWR0aDogMC41O1xuICBmaWxsLW9wYWNpdHk6IDE7IH1cbiJdfQ== */\"","import { Component, OnInit, OnChanges, Input, ElementRef, ViewChild, SimpleChange, SimpleChanges, ViewEncapsulation }  from '@angular/core';\n\nimport { OpenRefineService }         from './../../shared/open-refine/open-refine.service';\n\nimport * as d3 from 'd3';\nimport * as d3Transform from 'd3-transform';\n\nimport * as iconCodes  from '../icon-codes.json';\n\n@Component({\n  selector: 'app-quality-provenance-vis',\n  encapsulation: ViewEncapsulation.None,\n  templateUrl: './quality-provenance-vis.component.html',\n  styleUrls: ['../refine-provenance-explorer.component.scss', './quality-provenance-vis.component.scss']\n})\nexport class QualityProvenanceVisComponent implements OnInit, OnChanges {\n\n  @Input() pageWidth: number;\n  @Input() componentHeight: number;\n  @Input() openRefineService: OpenRefineService;\n  @Input() projectId: number;\n  @Input() histId: string;\n  @Input() shiftHistId: string;\n  @Input() nodeHistory: any[];\n  @Input() shiftNodeHistory: any[];\n  @Input() scaleHistory: any;\n  @Input() nodeWidth: number;\n  @Input() sankeyDiag: any;\n  @Input() qualityViewWidth: number;\n  @Input() detailViewWidth: number;\n  @Input() showDetail: number;\n  @Input() loadFinished: boolean;\n\n  qualityCompareViewWidth: number = 0;\n  elementPadding: number = 35;\n  innerPadding: number = .8;\n  maxRowNumber: number;\n  transition;\n\n  iconWidth:number = 16;\n\n  issueViewHistId: any;\n\n  // @ViewChild('qualityView')\n  // svgQualityView:ElementRef;\n  detailIssueView:ElementRef;\n  issueViewOffset:number;\n  @ViewChild('qualityComparison', {static: false})\n  compareView:ElementRef;\n  div;\n\n  errorMessage;\n  uniqueMetrics: string[] = [];\n  metricsColorScale;\n  greyMetricsColorScale;\n\n  columnModel: any;\n  provenanceOverlayModel: any;\n\n  @ViewChild('issueView', {static: false}) set content(content: ElementRef) {\n    this.detailIssueView = content;\n    if (this.detailIssueView && this.provenanceOverlayModel) {\n      // this.issueViewOffset = this.elementPadding + this.compareView.nativeElement.scrollWidth - this.detailViewWidth;\n      this.scaleComparison();\n      this.renderIssueSelectionView();\n    }\n }\n\n  constructor() { \n  }\n\n  ngOnInit() {\n    this.getRefineProject();\n    this.transition = d3.transition()\n      .duration(500)\n      .ease(d3.easeLinear);\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    // && changes.histId && \n    // if (this.provenanceOverlayModel && (changes.nodeHistory || changes.shiftNodeHistory)) {\n    //   if (this.loadFinished) {\n    //     // this.scaleByHistory = d3.scaleBand().domain(historyArray).range([20, parseFloat(this.svgQualityView.nativeElement.scrollWidth) - 15]);//.padding(0.05);\n        \n    //     this.renderIssueSelectionView();\n    //     if(this.nodeHistory && this.nodeHistory.length > 0) {\n    //       this.scaleComparison()\n    //       // this.renderQualityView(this.nodeHistory, this.scaleByHistory, d3.select('svg.barchart'), true);\n    //     }\n    //   }\n    // }\n    //changes.nodeHistory.currentValue != null\n    if ((changes.nodeHistory || changes.shiftNodeHistory) && this.provenanceOverlayModel && this.nodeWidth && this.sankeyDiag && this.metricsColorScale) {\n      if (changes.nodeHistory)\n        this.nodeHistory = changes.nodeHistory.currentValue;\n      if (changes.shiftNodeHistory)\n        this.shiftNodeHistory = changes.shiftNodeHistory.currentValue;\n\n      this.scaleComparison();\n    }\n    if (changes.histId) {\n      this.histId = changes.histId.currentValue;\n      if (this.provenanceOverlayModel && this.detailIssueView && this.metricsColorScale)\n        this.renderIssueSelectionView();\n    }\n    if ((changes.detailViewWidth || changes.showDetail || changes.detailIssueView) && this.provenanceOverlayModel) {\n      this.scaleComparison();\n      this.renderIssueSelectionView();\n    }\n  }\n\n  private getRefineProject() {\n    this.openRefineService.getRefineProject(this.projectId)\n      .subscribe(\n        openRefineProject => {\n          this.columnModel = openRefineProject.columnModel;\n          this.provenanceOverlayModel = openRefineProject.overlayModels['qualityProvenance'];\n          this.openRefineService.getHistory(this.projectId)\n            .subscribe((history: any) => {\n              this.nodeHistory = [];\n              this.nodeHistory.push({ id: 0, value: this.provenanceOverlayModel.provenance.entity[\"history_entry:0\"] });\n              for (let historyEntry of history.past) {\n                this.nodeHistory.push({ id: historyEntry.id, value: this.provenanceOverlayModel.provenance.entity[\"history_entry:\" + historyEntry.id] });\n                d3.select(\"svg.provGraph\").select(\"rect#activity\" + historyEntry.id)\n                  .classed(\"selected\", true);\n                d3.select(\"svg.provGraph\").select(\"path#activity\" + historyEntry.id)\n                  .classed(\"selected\", true);\n              }\n\n              if(this.nodeHistory && this.nodeHistory.length > 0 && this.nodeWidth && this.sankeyDiag) {\n                this.scaleComparison();\n                this.renderIssueSelectionView();\n              }\n            });\n        },\n        error => this.errorMessage = <any>error\n    );\n  }\n\n  private renderQualityView(nodeHistory: any[], scale: any, rootElement: any, inverted: boolean) {\n\n    let historyFlow = [];\n    let shiftHistoryFlow = [];\n    let metricColPair = [];\n\n    this.div = d3.select(\"body\").append(\"div\")\n      .attr(\"class\", \"d3tooltip\")\n      .style(\"opacity\", 0);\n\n    for (let historyEntry of nodeHistory) {\n      let quality = [];\n      historyEntry.id = historyEntry.id;\n      for (let ent in this.provenanceOverlayModel.provenance.entity) {\n        // let histId = entity[0].replace(\"history_entry:\", \"\");\n        if (this.provenanceOverlayModel.provenance.entity[ent][\"quality:\"+historyEntry.id])\n          quality.push({col: ent, metrics: this.provenanceOverlayModel.provenance.entity[ent][\"quality:\"+historyEntry.id]});\n      };\n      let metrics = [];\n      for (let pair of Object.values(quality)) {\n        for (let m of pair.metrics) {\n          if (!metricColPair.some(obj => obj.metric === m.type && obj.column === pair.col ))\n            metricColPair.push({metric: m.type, column: pair.col});\n          let found = metrics.find((metric: any, idx: number, array: any[]) => {\n            return metric.name == m.type;\n          });\n          if (found != null)\n            found.values.push({value: m.$, column: pair.col});\n          else\n            metrics.push({name: m.type, values: [{value: m.$, column: pair.col}]})\n        }\n      }\n      if (metrics.length > 0)\n        historyFlow.push({historyEntry: historyEntry, metrics: metrics});\n    }\n\n    if (this.shiftNodeHistory && this.shiftNodeHistory.length > 0) {\n      for (let historyEntry of this.shiftNodeHistory) {\n        let quality = [];\n        historyEntry.id = historyEntry.id;\n        for (let ent in this.provenanceOverlayModel.provenance.entity) {\n          // let histId = entity[0].replace(\"history_entry:\", \"\");\n          if (this.provenanceOverlayModel.provenance.entity[ent][\"quality:\"+historyEntry.id])\n            quality.push({col: ent, metrics: this.provenanceOverlayModel.provenance.entity[ent][\"quality:\"+historyEntry.id]});\n        };\n        let metrics = [];\n        for (let pair of Object.values(quality)) {\n          for (let m of pair.metrics) {\n            if (!metricColPair.some(obj => obj.metric === m.type && obj.column === pair.col ))\n              metricColPair.push({metric: m.type, column: pair.col});\n            let found = metrics.find((metric: any, idx: number, array: any[]) => {\n              return metric.name == m.type;\n            });\n            if (found != null)\n              found.values.push({value: m.$, column: pair.col});\n            else\n              metrics.push({name: m.type, values: [{value: m.$, column: pair.col}]})\n          }\n        }\n        if (metrics.length > 0)\n          shiftHistoryFlow.push({historyEntry: historyEntry, metrics: metrics});\n      }\n      for (let historyEntry of this.nodeHistory) {\n        let quality = [];\n        historyEntry.id = historyEntry.id;\n        for (let ent in this.provenanceOverlayModel.provenance.entity) {\n          // let histId = entity[0].replace(\"history_entry:\", \"\");\n          if (this.provenanceOverlayModel.provenance.entity[ent][\"quality:\"+historyEntry.id])\n            quality.push({col: ent, metrics: this.provenanceOverlayModel.provenance.entity[ent][\"quality:\"+historyEntry.id]});\n        };\n        let metrics = [];\n        for (let pair of Object.values(quality)) {\n          for (let m of pair.metrics) {\n            if (!metricColPair.some(obj => obj.metric === m.type && obj.column === pair.col ))\n              metricColPair.push({metric: m.type, column: pair.col});\n            let found = metrics.find((metric: any, idx: number, array: any[]) => {\n              return metric.name == m.type;\n            });\n            if (found != null)\n              found.values.push({value: m.$, column: pair.col});\n            else\n              metrics.push({name: m.type, values: [{value: m.$, column: pair.col}]})\n          }\n        }\n        if (metrics.length > 0)\n          shiftHistoryFlow.push({historyEntry: historyEntry, metrics: metrics});\n      }\n    }\n\n\n    metricColPair.sort((a: any, b:any) => {\n      let fullColA = this.provenanceOverlayModel.columnIds.find((d:any) => d.localPart === a.column.replace(\"column:\",\"\"));\n      let fullColB = this.provenanceOverlayModel.columnIds.find((d:any) => d.localPart === b.column.replace(\"column:\",\"\"));\n\n      fullColA = this.columnModel.columns.find((d:any) => d.name === fullColA.columnName);\n      if (!fullColA)\n        return -1;\n      fullColB = this.columnModel.columns.find((d:any) => d.name === fullColB.columnName);\n      if (!fullColB)\n        return 1;\n      return fullColA.cellIndex - fullColB.cellIndex;\n    });\n    metricColPair.sort((a: any, b:any) => {\n      if (a.metric < b.metric) { return -1; }\n      if (a.metric > b.metric) { return 1; }\n      return 0;\n    });\n\n    let stack = d3.stack()\n      .keys(metricColPair)\n      .value((d: any, key: any, j, data) => {\n        let metricStack = d.metrics.find((d:any) => { return d.name === key.metric });\n        let metric = metricStack.values.find((obj => obj.column === key.column));\n        if (metric)\n          return parseFloat(metric.value);\n        else return 0;\n      })(historyFlow);\n    \n    let arr: any[] = Array.prototype.concat.apply([], stack[stack.length-1]);\n    \n    // get heights of shift stack\n    if (shiftHistoryFlow.length > 0) {\n      let shiftStack = d3.stack()\n        .keys(metricColPair)\n        .value((d: any, key: any, j, data) => {\n          let metricStack = d.metrics.find((d:any) => { return d.name === key.metric });\n          let metric = metricStack.values.find((obj => obj.column === key.column));\n          if (metric)\n            return parseFloat(metric.value);\n          else return 0;\n        })(shiftHistoryFlow);\n      arr = arr.concat(Array.prototype.concat.apply([], shiftStack[shiftStack.length-1]));\n    }\n\n    let maxVal = Math.max.apply(Math, arr);\n    // max scale needs to be determined // we also leave space for multiple selection guiding icons\n    let y = d3.scaleLinear().rangeRound([this.compareView.nativeElement.scrollHeight - 20 - this.elementPadding, this.elementPadding]).domain([0, maxVal]).nice();\n\n    // let metricColorScale = d3.scaleSequential(d3.interpolateViridis);\n    if(this.uniqueMetrics.length == 0) {\n      metricColPair.forEach(val => {\n        if (!this.uniqueMetrics.includes(val.metric.replace(\"quality:\", \"\")))\n          this.uniqueMetrics.push(val.metric.replace(\"quality:\", \"\")); \n      })\n      this.uniqueMetrics.sort();\n      // this.metricsColorScale = d3.interpolatePuOr(this.uniqueMetrics.length);\n      this.initializeColorScale();\n    }\n\n    rootElement.selectAll(\"g\").remove();\n\n    rootElement.selectAll(\"g\")\n      .data(stack).enter()\n      .append(\"g\")\n        .attr(\"class\", (stack:any) => stack.key.column.replace(\"column:\",\"\") + \" \" + stack.key.metric.replace(\"quality:\",\"\"))\n        // .attr(\"transform\", d3Transform.transform().translate(20,15))\n        .attr(\"fill\", (d:any) =>  this.determineColor(d.key.metric.replace(\"quality:\", \"\")))//d3.schemePastel2[this.uniqueMetrics.indexOf(d.key.metric.replace(\"quality:\", \"\"))])\n        .attr(\"stroke\", (d:any) =>  this.determineStrokeColor(d.key.metric.replace(\"quality:\", \"\")))//d3.schemeDark2[this.uniqueMetrics.indexOf(d.key.metric.replace(\"quality:\", \"\"))])\n        .attr(\"stroke-width\", .85)\n        .attr(\"stroke-opacity\", .6)\n      .selectAll(\"rect\")\n      .data((stack:any) => {\n        for (let entry of stack) {\n          let metricForColumns = entry.data.metrics.find((obj:any) => { return obj.name === stack.key.metric });\n          let metric = metricForColumns.values.find((obj => obj.column === stack.key.column));\n          let metricValue;\n          if (metric)\n            metricValue = metric.value;\n          else\n            metricValue = 0;\n          entry.data = {metric: stack.key.metric, \n            historyEntry: entry.data.historyEntry,\n            column: stack.key.column, \n            value: metricValue};\n        }\n        return stack;\n      }).enter()\n      .append(\"rect\")\n        .each((d: any, i: number, arr: any[]) => {\n          d3.select(arr[i]).classed(\"hist\" + d.data.historyEntry.id, true);\n        })\n        .attr(\"x\", (d:any) => {\n          // we don't use the regular bandwidth, so we need to do some calculations\n          // if (nodeHistory.indexOf(d.data.historyEntry) == 0)\n          //   return scale(d.data.historyEntry.id)\n          // else if (nodeHistory.indexOf(d.data.historyEntry) == nodeHistory.length-1)\n          //   return scale(d.data.historyEntry.id) + scale.bandwidth() - this.nodeWidth; \n          // else\n          //   return scale(d.data.historyEntry.id) + (scale.bandwidth()/2);\n\n          return scale(d.data.historyEntry.depth)\n        })\n        .attr(\"y\", (d) => { \n          return y(d[1]); \n        })\n        .attr(\"height\", (d) => {\n          return y(d[0]) - y(d[1]); \n        })\n        .attr(\"width\", scale.bandwidth())\n        .on(\"mouseover\", (quality:any, i:number, el:any) => {\n          if (quality.data.historyEntry.id != this.issueViewHistId) {\n            let rows:number = parseInt(this.provenanceOverlayModel.provenance.entity[\"project_info:dataset\"][\"other:\" + quality.data.historyEntry.id].$);\n            let shiftRows:number = 0;\n            if (this.shiftHistId)\n              shiftRows = parseInt(this.provenanceOverlayModel.provenance.entity[\"project_info:dataset\"][\"other:\" + this.shiftHistId].$);\n\n            // this.renderIssueViewForHistId(quality.data.historyEntry.id, d3.select(\"#issueView\"), this.issueViewOffset, rows > shiftRows ? rows : shiftRows, this.detailViewWidth - 25);\n          }\n          \n          d3.select(el[i])\n            .attr(\"stroke-width\", 1.5)\n            .attr(\"stroke-opacity\", 1);\n          this.div.transition()\n            .duration(100)\n            .style(\"opacity\", .9);\n          this.div.html(quality.data.column + \" \" + quality.data.metric + \"<br>measure: \" + quality.data.value)\n            .style(\"left\", (d3.event.pageX) + \"px\")\n            .style(\"top\", (d3.event.pageY - 28) + \"px\");\n            \n          d3.select(\"#comparisonView\").selectAll(\"g.\" + quality.data.column.replace(\"column:\", \"\") + \".\" + quality.data.metric.replace(\"quality:\", \"\"))\n            .attr(\"stroke-width\", 1.5)\n            .attr(\"stroke-opacity\", 1)\n            .attr(\"fill\", this.determineStrokeColor(quality.data.metric.replace(\"quality:\", \"\")));\n          let gr = d3.select(\"#comparisonView\").selectAll(\"g.issueLinks\").selectAll(\"g.\" + quality.data.column.replace(\"column:\", \"\") + \".\" + quality.data.metric.replace(\"quality:\", \"\") + \" rect\")\n            .attr(\"stroke-width\", 1)\n            .attr(\"stroke-opacity\", 1)\n          gr.selectAll(\"path\")\n            .classed(\"metric-link\", true)\n            .attr(\"fill\", this.determineStrokeColor(quality.data.metric.replace(\"quality:\", \"\")));\n          \n          if (parseInt(quality.data.historyEntry.id) === parseInt(this.histId) ||\n            parseInt(quality.data.historyEntry.id) === parseInt(this.shiftHistId)) {\n            d3.select(\"#issueView\")\n              // .select(\"g.\" + quality.data.column.replace(\"column:\", \"\").replace(/[^a-zA-Z ]/g, \"\"))\n              // .select(\"g.\" + quality.data.metric.replace(\"quality:\",\"\"))\n              .select(\"g.\" + quality.data.column.replace(\"column:\", \"\").replace(/[^a-zA-Z ]/g, \"\"))\n              .select(\"g.\" + quality.data.metric.replace(\"quality:\",\"\"))\n              .selectAll(\"rect\")\n                .attr(\"stroke-width\", \"2px\")\n                .raise();\n                // .attr(\"fill\", (d:any) =>  d3.schemeDark2[this.uniqueMetrics.indexOf(quality.data.metric.replace(\"quality:\", \"\"))])\n          }\n        })\n        .on(\"mousemove\", (data:any) => {\n          this.div\n            .style(\"left\", (d3.event.pageX) + \"px\")\n            .style(\"top\", (d3.event.pageY - 28) + \"px\");\n        })\n        .on(\"mouseout\", (quality:any, i:number, el:any) => {\n          d3.select(\"#comparisonView\").selectAll(\"g.\" + quality.data.column.replace(\"column:\", \"\") + \".\" + quality.data.metric.replace(\"quality:\", \"\"))\n            .attr(\"stroke-width\", null)\n            .attr(\"stroke-opacity\", null)\n            .attr(\"fill\", this.determineColor(quality.data.metric.replace(\"quality:\", \"\")));\n          // d3.select(el[i])\n          //   .attr(\"stroke-width\", null)\n          //   .attr(\"stroke-opacity\", null);\n          this.div.transition()\n            .duration(100)\n            .style(\"opacity\", 0);\n          // d3.select(\"#comparisonView\").selectAll(\"g.\" + quality.data.column.replace(\"column:\", \"\") + \".\" + quality.data.metric.replace(\"quality:\", \"\"))\n          //   .attr(\"stroke-width\", .85)\n          //   .attr(\"stroke-opacity\", .6)\n          //   .attr(\"fill\", this.determineColor(quality.data.metric.replace(\"quality:\", \"\")));\n\n          // let gr = d3.select(\"#comparisonView\").selectAll(\"g.issueLinks\").selectAll(\"g.\" + quality.data.column.replace(\"column:\", \"\") + \".\" + quality.data.metric.replace(\"quality:\", \"\") + \" rect\")\n          //   .attr(\"stroke-opacity\", 0);\n          // gr.selectAll(\"path\")\n          //   .classed(\"metric-link\", (quality:any) => quality.from.data.value != quality.to.data.value)\n          //   .attr(\"fill\", this.determineColor(quality.data.metric.replace(\"quality:\", \"\")));\n          \n          if (parseInt(quality.data.historyEntry.id) === parseInt(this.histId) ||\n            parseInt(quality.data.historyEntry.id) === parseInt(this.shiftHistId)) {\n            d3.select(\"#issueView\")\n              .select(\"g.\" + quality.data.column.replace(\"column:\", \"\").replace(/[^a-zA-Z ]/g, \"\"))\n              .select(\"g.\" + quality.data.metric.replace(\"quality:\",\"\"))\n              .selectAll(\"rect\")\n                .attr(\"stroke-width\", \"0px\");\n                // .attr(\"fill\", (d:any) =>  d3.schemePastel2[this.uniqueMetrics.indexOf(quality.data.metric.replace(\"quality:\", \"\"))])\n          }\n        });\n\n    let qualityYAxis = d3.axisLeft(y);\n    rootElement.append(\"g\")\n      .classed(\"y-axis\", true)\n      .attr(\"transform\", \"translate(\" + this.elementPadding + \",0)\")\n      .call((g:any) => {\n        g.call(qualityYAxis);\n      });\n    rootElement.append(\"text\")\n      .attr(\"text-anchor\", \"left\")\n      .attr(\"transform\", \"translate(0,15)\")\n      .text(\"Quality Issues Rate\");\n    // //** this is the right hand side axis for the quality flow\n    // let qualityYAxisRight = d3.axisRight(y);\n    // rootElement.append(\"g\")\n    //   .classed(\"y-axis\", true)\n    //   .attr(\"transform\", \"translate(\" + (scale.range()[1]) + \",0)\")\n    //   .call((g:any) => {\n    //     g.call(qualityYAxisRight);\n    //   });\n\n      // g.selectAll(\".tick line\").attr(\"transform\", \"translate(-\" + (scaleXColumn.bandwidth()/2) + \",0)\");\n      //   g.selectAll(\".tick text\")\n      //     .text((d:any) => {\n      //       return d.replace(\"column:\",\"\");\n      //     })\n      //     .attr(\"text-anchor\", \"start\")\n      //     .attr(\"transform\", \"translate(-\"+ scaleXColumn.bandwidth()/2 +\",0)rotate(-90)\");\n\n\n    const link = rootElement.append(\"g\")\n        .classed(\"issueLinks\", true)\n        .attr(\"fill\", \"none\")\n        .attr(\"stroke-opacity\", 0.25);\n\n    let paths = link.selectAll(\"g\")\n      .data(stack)\n      .enter().append(\"g\")\n        .attr(\"class\", (stack:any) => stack.key.column.replace(\"column:\", \"\") + \" \" + stack.key.metric.replace(\"quality:\", \"\"))\n        .attr(\"fill\", (stack:any) =>  this.determineColor(stack.key.metric.replace(\"quality:\", \"\")))\n        .attr(\"stroke\", (stack:any) =>  this.determineStrokeColor(stack.key.metric.replace(\"quality:\", \"\")))\n        .attr(\"stroke-opacity\", .4)\n        .attr(\"stroke-width\", .85)\n        .attr(\"fill-opacity\", 0.4)\n      .selectAll(\"path\")\n      .data(d => {\n        // build connections\n        let links = [];\n        for (let i = 1; i < d.length; i++) {\n          links.push({from: d[i-1], to: d[i], key: d.key, index: d.index});\n        }\n        return links;\n      })\n      .enter().append(\"path\")\n        .classed(\"metric-link\", (quality:any) => quality.from.data.value != quality.to.data.value)\n        .attr(\"d\", (d:any) => {\n          let x0;\n          let x1;\n          if (!inverted) {\n            x0 = scale(d.from.data.historyEntry.depth) + scale.bandwidth(),\n            x1 = scale(d.to.data.historyEntry.depth);\n          } else {\n            x0 = scale(d.from.data.historyEntry.depth);\n            x1 = scale(d.to.data.historyEntry.depth) + scale.bandwidth();\n          }\n          // x0 = scale(d.from.data.historyEntry.depth) + scale.bandwidth(),\n          // x1 = scale(d.to.data.historyEntry.depth);\n\n          return this.linkSkewed(d, y, x0, x1);\n        })\n        .on(\"mouseover\", (quality:any, i:number, el:any) => {\n          d3.select(\"#comparisonView\").selectAll(\"g.\" + quality.key.column.replace(\"column:\", \"\") + \".\" + quality.key.metric.replace(\"quality:\", \"\"))\n            .attr(\"stroke-width\", 1.5)\n            .attr(\"stroke-opacity\", 1)\n            .attr(\"fill\", this.determineStrokeColor(quality.key.metric.replace(\"quality:\", \"\")));\n          let gr = d3.select(\"#comparisonView\").selectAll(\"g.issueLinks\").selectAll(\"g.\" + quality.key.column.replace(\"column:\", \"\") + \".\" + quality.key.metric.replace(\"quality:\", \"\") + \" rect\")\n            .attr(\"stroke-width\", 1)\n            .attr(\"stroke-opacity\", 1)\n          gr.selectAll(\"path\")\n            .classed(\"metric-link\", true)\n            .attr(\"fill\", this.determineStrokeColor(quality.key.metric.replace(\"quality:\", \"\")));\n          // d3.select(el[i]).classed(\"metric-link\", true)\n          //   .attr(\"stroke-width\", 1);\n            // .attr(\"stroke-opacity\", 1);\n          this.div.transition()\n            .duration(100)\n            .style(\"opacity\", .9);\n          this.div.html(quality.key.column + \n            \" \" + quality.key.metric + \n            \" <br><b>Change</b> from \" + quality.from.data.value + \n            \" to \" + quality.to.data.value)\n            .style(\"left\", (d3.event.pageX) + \"px\")\n            .style(\"top\", (d3.event.pageY - 28) + \"px\");\n        })\n        .on(\"mousemove\", (data:any) => {\n          this.div.style(\"left\", (d3.event.pageX) + \"px\")\n            .style(\"top\", (d3.event.pageY - 28) + \"px\");\n        })\n        .on(\"mouseout\", (quality:any, i:number, el:any) => {\n          d3.select(\"#comparisonView\").selectAll(\"g.\" + quality.key.column.replace(\"column:\", \"\") + \".\" + quality.key.metric.replace(\"quality:\", \"\"))\n            .attr(\"stroke-width\", .85)\n            .attr(\"stroke-opacity\", .6)\n            .attr(\"fill\", this.determineColor(quality.key.metric.replace(\"quality:\", \"\")));\n          let gr = d3.select(\"#comparisonView\").selectAll(\"g.issueLinks\").selectAll(\"g.\" + quality.key.column.replace(\"column:\", \"\") + \".\" + quality.key.metric.replace(\"quality:\", \"\") + \" rect\")\n            .attr(\"stroke-opacity\", 0);\n          gr.selectAll(\"path\")\n            .classed(\"metric-link\", (quality:any) => quality.from.data.value != quality.to.data.value)\n            .attr(\"fill\", this.determineColor(quality.key.metric.replace(\"quality:\", \"\")));\n\n          // d3.select(el[i]).classed(\"metric-link\",  (quality:any) => quality.from.data.value != quality.to.data.value)\n          //   .attr(\"stroke-width\", null);\n          this.div.transition()\n            .duration(100)\n            .style(\"opacity\", 0);\n        });\n  }\n\n  private renderIssueViewForHistId(histId: any, selectElement: any, translate: number, rows: number, elementWidth: number):any {\n    let issues = [];\n    let issuesB = [];\n    for (let ent in this.provenanceOverlayModel.provenance.entity) {\n      // let histId = entity[0].replace(\"history_entry:\", \"\");\n      let errorIndices = [];\n      if (this.provenanceOverlayModel.provenance.entity[ent][\"error:\"+histId]) {\n        for (let errorArray of this.provenanceOverlayModel.provenance.entity[ent][\"error:\"+histId]) {\n          errorIndices.push({metric: errorArray.type, indices: JSON.parse(errorArray.$)});\n          if (!this.uniqueMetrics.includes(errorArray.type.replace(\"error:\",\"\"))) {\n            this.uniqueMetrics.push(errorArray.type.replace(\"error:\",\"\"));\n          }\n        }\n        issues.push({col: ent, issues: errorIndices});\n      }\n      let errorIndicesB = [];\n      if (this.shiftHistId && this.provenanceOverlayModel.provenance.entity[ent][\"error:\"+this.shiftHistId]) {\n        for (let errorArray of this.provenanceOverlayModel.provenance.entity[ent][\"error:\"+this.shiftHistId]) {\n          errorIndicesB.push({metric: errorArray.type, indices: JSON.parse(errorArray.$)});\n          if (!this.uniqueMetrics.includes(errorArray.type.replace(\"error:\",\"\"))) {\n            this.uniqueMetrics.push(errorArray.type.replace(\"error:\",\"\"));\n          }\n        }\n        issuesB.push({col: ent, issues: errorIndicesB});\n      }\n    };\n\n    if (issuesB.length > 0) {\n      let issuesLarger,\n          issuesSmaller;\n      if (issues.length > issuesB.length) {\n        issuesLarger = [].concat(issues);\n        issuesSmaller = [].concat(issuesB);\n      }\n      else {\n        issuesLarger = [].concat(issuesB);\n        issuesSmaller = [].concat(issues);\n      }\n\n      for (let arrIdx = 0; arrIdx < issuesLarger.length; arrIdx++) {\n        let issueSmArr = issuesSmaller.find((d:any) => issuesLarger[arrIdx].col === d.col);\n        if (issueSmArr) {\n          for (let m = 0; m < issuesLarger[arrIdx].issues.length; ++m) {\n            let smMetric = issueSmArr.issues.find((mVal:any) => issuesLarger[arrIdx].issues[m].metric === mVal.metric);\n            if (smMetric) {\n              for (let i = 0; i < issuesLarger[arrIdx].issues[m].indices.length;) {\n                let smMetricIndex = smMetric.indices.indexOf(issuesLarger[arrIdx].issues[m].indices[i]);\n                if (smMetricIndex >= 0) {\n                  issuesLarger[arrIdx].issues[m].indices.splice(i, 1);\n                  smMetric.indices.splice(smMetricIndex, 1);\n                }\n                else\n                  ++i;\n              }\n              for (let i = 0; i < smMetric.indices.length; i++) {\n                if (!issuesLarger[arrIdx].issues[m].indices.includes(smMetric.indices[i])) {\n                  issuesLarger[arrIdx].issues[m].indices.push(smMetric.indices[i]);\n                }\n              }\n              issuesLarger[arrIdx].issues[m].indices.sort(this.numericSort);\n            }\n          }\n        }\n      }\n      issues = issuesLarger;\n    }\n\n    this.uniqueMetrics.sort();\n    this.initializeColorScale();\n\n    issues.sort((colA: any, colB:any) => {\n      let fullColA = this.provenanceOverlayModel.columnIds.find((d:any) => d.localPart === colA.col.replace(\"column:\",\"\"));\n      let fullColB = this.provenanceOverlayModel.columnIds.find((d:any) => d.localPart === colB.col.replace(\"column:\",\"\"));\n\n      fullColA = this.columnModel.columns.find((d:any) => d.name === fullColA.columnName);\n      if (!fullColA)\n        return -1;\n      fullColB = this.columnModel.columns.find((d:any) => d.name === fullColB.columnName);\n      if (!fullColB)\n        return 1;\n      return fullColA.cellIndex - fullColB.cellIndex;\n    })\n\n    let scaleXColumn = d3.scaleBand()\n      .domain(issues.map(issuesEntry => issuesEntry.col))\n      .range([translate, translate + elementWidth - 35]);\n\n    let xAxis = d3.axisBottom(scaleXColumn);\n    d3.selectAll(\"#issueView g.axis g\").remove();\n    \n    selectElement.select(\"g.axis\").append(\"g\")\n      .classed(\"x-axis\", true)\n      // .attr(\"transform\", \"translate(0, 35)\")\n      .call((g:any) => {\n        g.call(xAxis);\n        // g.select(\".domain\").remove();\n        g.selectAll(\".tick line\").attr(\"transform\", \"translate(-\" + (scaleXColumn.bandwidth()/2) + \",0)\");\n        g.selectAll(\".tick text\")\n          .text((d:any) => {\n            return d.replace(\"column:\",\"\");\n          })\n          .attr(\"text-anchor\", \"start\")\n          .attr(\"transform\", \"translate(-\"+ scaleXColumn.bandwidth()/2 +\",0)rotate(-90)\");\n      });\n    let axisOffset;\n    selectElement.select(\"g.axis g.x-axis\")\n      .attr(\"transform\", (g:any) => {\n        let nodeEl: any = selectElement.select(\"g.axis g.x-axis\").node();\n        axisOffset = nodeEl.getBBox().height;\n        return \"translate(0, \" + nodeEl.getBBox().height + \")\";\n      })\n\n    let scaleYRows = d3.scaleLinear()\n      .domain([0, rows])\n      .range([axisOffset, this.compareView.nativeElement.scrollHeight - 20 - this.elementPadding]);\n\n    let yAxis = d3.axisLeft(scaleYRows);\n    d3.select(\"#issueView g.axis\").append(\"g\")\n      .classed(\"y-axis\", true)\n      .attr(\"transform\", \"translate(\" + this.issueViewOffset + \",0)\")\n      .call(yAxis);\n    let xAxisNode:any = d3.select(\"#issueView g.axis g.x-axis\").node();\n    let yAxisNode:any = d3.select(\"#issueView g.axis g.y-axis\").node();\n    if (xAxisNode && yAxisNode) {\n      d3.select('#issueView g.axis').append(\"text\")\n        .attr(\"text-anchor\", \"middle\")  // this makes it easy to centre the text as the transform is applied to the anchor\n        // this.compareView.nativeElement.scrollHeight\n        .attr(\"transform\", \"translate(\"+ (this.issueViewOffset - yAxisNode.getBBox().width) + \",\" + (axisOffset - 5) +\")\")  // (yAxisNode.getBBox().height/2 + axisOffset)\n        .text(\"Rows\");\n      d3.select('#issueView g.axis').append(\"text\")\n      .attr(\"text-anchor\", \"middle\")\n      .attr(\"transform\", \"translate(\" + (this.issueViewOffset + xAxisNode.getBBox().width/2 - this.elementPadding) + \",\" + 20 + \")\")\n      .text(\"Columns\");\n    }\n  \n    // // EXIT old elements not present in new data.\n    // issueView.exit()\n    //   // .attr(\"class\", \"exit\")\n    //   .transition(this.transition)\n    //     .style(\"fill-opacity\", 1e-6)\n    //     .remove();\n    // // UPDATE old elements present in new data.\n    // issueView//.attr(\"class\", \"update\")\n    //     .style(\"fill-opacity\", 1)\n    //   .transition(this.transition);\n    // ENTER new elements present in new data.\n    let gCols = selectElement.selectAll(\"g.column\")\n      .data(issues);\n    // EXIT old elements not present in new data.\n    gCols.exit()\n      .transition(this.transition)\n      .remove();\n    // UPDATE old elements present in new data.\n    gCols.transition(this.transition)\n        .attr(\"transform\", (d:any) => \"translate(\" + scaleXColumn(d.col) + \",0)\")\n    // ENTER new elements present in new data.\n    gCols.enter().append(\"g\")\n        .attr(\"class\", (d:any) => \"column \" + d.col.replace(\"column:\", \"\").replace(/[^a-zA-Z ]/g, \"\"))\n        .attr(\"stroke-width\", 0)\n      // .transition(this.transition)\n        .attr(\"transform\", (d:any) => \"translate(\" + scaleXColumn(d.col) + \",0)\")\n        .on(\"mouseover\", (data:any, i:number, el:any) => {\n          d3.selectAll(\"g.\" + data.col.replace(\"column:\", \"\").replace(/[^a-zA-Z ]/g, \"\") + \" rect.hist\" + this.histId)\n            .classed(\"metric-link\", true)\n            .attr(\"fill\", (data: any) => {\n              return this.determineStrokeColor(data.data.metric.replace(\"quality:\", \"\"));\n            });\n          d3.selectAll(\"g.\" + data.col.replace(\"column:\", \"\").replace(/[^a-zA-Z ]/g, \"\") + \" rect.hist\" + this.shiftHistId)\n            .classed(\"metric-link\", true)\n            .attr(\"fill\", (data: any) => {\n              return this.determineStrokeColor(data.data.metric.replace(\"quality:\", \"\"));\n            });\n        })\n        .on(\"mouseout\", (data:any, i:number, el:any) => {\n          d3.selectAll(\"g.\" + data.col.replace(\"column:\", \"\").replace(/[^a-zA-Z ]/g, \"\") + \" rect.hist\" + this.histId)\n            .classed(\"metric-link\", false)\n            .attr(\"fill\", (data: any) => this.determineColor(data.data.metric.replace(\"quality:\", \"\")))\n          d3.selectAll(\"g.\" + data.col.replace(\"column:\", \"\").replace(/[^a-zA-Z ]/g, \"\") + \" rect.hist\" + this.shiftHistId)\n            .classed(\"metric-link\", false)\n            .attr(\"fill\", (data: any) => this.determineColor(data.data.metric.replace(\"quality:\", \"\")))\n        });\n    \n    let gIssues = selectElement.selectAll(\"g.column\").selectAll(\"g\").data((d:any) => d.issues);\n    // EXIT old elements not present in new data.\n    gIssues.exit()\n      // .transition(this.transition)\n        .attr(\"fill\", \"none\")\n      .remove();\n    // UPDATE old elements present in new data.\n    // ENTER new elements present in new data.\n    gIssues.enter().append(\"g\")\n      .attr(\"class\", (d:any) => d.metric.replace(\"error:\", \"\") )\n      .attr(\"fill\", (d:any) =>  this.determineColor(d.metric.replace(\"error:\", \"\")))\n      .attr(\"stroke\", (d:any) =>  this.determineStrokeColor(d.metric.replace(\"error:\", \"\")));\n\n    let rectIssues = selectElement.selectAll(\"g.column\").selectAll(\"g\").selectAll(\"rect\")\n      .data((d:any) => d.indices);\n    // UPDATE old elements present in new data.\n    rectIssues\n      // .transition(this.transition)\n        .attr(\"width\", scaleXColumn.bandwidth())\n        .attr(\"height\", (d:any) => scaleYRows(d) - scaleYRows(d-1))\n        .attr(\"y\", (d:any) => scaleYRows(d));\n        // .attr(\"transform\", (d:any) => \"translate(0, \"+scaleYRows(d) + \")\");\n    rectIssues.enter()\n      .append(\"rect\")\n        .on(\"mouseover\", (data:any, i:number, el:any) => {\n          let col = d3.select(el[i].parentNode.parentNode).node();\n          let gs = d3.select(el[i].parentNode.parentNode).selectAll(\"g rect\")\n            .attr(\"stroke-width\", \"2px\")\n            // .attr(\"fill\", (d:any) => {\n            //   if(d.metric)\n            //     return d3.schemeDark2[this.uniqueMetrics.indexOf(d.metric.replace(\"error:\", \"\"))];\n            //   return null;\n            //   });\n\n          this.div.transition()\n            .duration(100)\n            .style(\"opacity\", 1);\n          if (col.__data__.col) {\n            let text = \"<b>Detected Issue </b><br><span>Column: \" + col.__data__.col.replace(\"column:\",\"\") + \"</span> <span>Row: \" + data + \"</span>\";\n            for (let issue of col.__data__.issues) {\n              if (issue.indices.includes(data))\n                text += \"<br><span>Metric: \" + issue.metric.replace(\"error:\", \"\") + \"</span>\";\n            }\n            \n            this.div.html(text)\n              .style(\"left\", (d3.event.pageX) + \"px\")\n              .style(\"top\", (d3.event.pageY - 28) + \"px\");\n          }\n        })\n        .on(\"mouseout\", (data:any, i:number, el:any) => {\n          d3.select(el[i].parentNode.parentNode).selectAll(\"g rect\")\n            .attr(\"stroke-width\", \"0px\");\n            // .attr(\"stroke\", \"none\")\n            // .attr(\"fill\", (d:any) => {\n            //   if(d.metric)\n            //     return d3.schemePastel2[this.uniqueMetrics.indexOf(d.metric.replace(\"error:\", \"\"))];\n            //   return null;\n            //   });\n              // d3.schemePastel2[this.uniqueMetrics.indexOf(d.metric.replace(\"error:\", \"\"))]);\n          this.div.transition()\n            .duration(100)\n            .style(\"opacity\", 0);\n        })\n      // .transition(this.transition)\n        .attr(\"height\", (d:any) => scaleYRows(d) - scaleYRows(d-1))\n        .attr(\"y\", (d:any) => scaleYRows(d))\n        .attr(\"width\", scaleXColumn.bandwidth())\n    rectIssues.exit()\n      // .transition(this.transition)\n        .attr(\"y\", scaleYRows(rows))\n      .remove();\n\n    // let colGroups = issueView;\n    // colGroups.exit()\n    //   .transition(this.transition)\n    //     .style(\"fill-opacity\", 1e-6)\n    //   .remove();\n    this.issueViewHistId = histId;\n  }\n\n\n  private renderIssueSelectionView() {\n    // let translX = 25 + this.compareView.nativeElement.scrollWidth - this.detailViewWidth;\n    let detailViewSvg = d3.select(\"#qualityComparison svg\");\n    d3.select(\"#issueView g.axis\").remove();\n    d3.select(\"#issueView\").append(\"g\").classed(\"axis\", true);\n    let rows:number = parseInt(this.provenanceOverlayModel.provenance.entity[\"project_info:dataset\"][\"other:\" + this.histId].$);\n    let shiftRows:number = 0;\n    if (this.shiftHistId)\n      shiftRows = parseInt(this.provenanceOverlayModel.provenance.entity[\"project_info:dataset\"][\"other:\" + this.shiftHistId].$);\n\n    this.renderIssueViewForHistId(this.histId, d3.select(\"#issueView\"), this.issueViewOffset, rows > shiftRows ? rows : shiftRows, this.detailViewWidth - 25);\n    // d3.select(\"#issueView\").attr(\"transform\", \"translate(\" + this.issueViewOffset + \",35)\");\n    // let scaleYRows = d3.scaleLinear()\n    //   .domain([0, rows > shiftRows ? rows : shiftRows])\n    //   .range([35, this.compareView.nativeElement.scrollHeight - 20 - this.elementPadding]);\n    \n\n    // d3.select('#issueView g.axis text')  // select all the text elements for the xaxis\n    //       .attr('transform', function(d) {\n    //          return \"translate(\" + this.getBBox().height*-2 + \",\" + this.getBBox().height + \")rotate(-45)\";\n    //      });\n  }\n\n  private renderHistoryLinks(element: any, history: any[], scale: any, classed: string, inverted: boolean) {\n\n    element.selectAll('rect')\n      .data(history).enter()\n      .append('rect')\n      .attr('x', (d:any) => scale(d.depth))\n      .attr('y', (d:any) => this.compareView.nativeElement.scrollHeight - 20 - (this.elementPadding - this.iconWidth))\n      .attr('width', scale.bandwidth())\n      .attr('height', this.elementPadding)\n      .classed(classed, true)\n      .classed('jointSelected', (d:any) => {\n        if(this.shiftNodeHistory && this.shiftNodeHistory.length > 0)\n          return this.shiftNodeHistory.map(node => node.id).includes(d.id) &&\n            this.nodeHistory.map(node => node.id).includes(d.id);\n        else\n          return this.nodeHistory.map(node => node.id).includes(d.id);\n      });\n\n      //TODO: links with mouseover\n    // this.sankeyDiag().links.forEach((link: any) => {\n\n    // })\n    if (scale.step() > this.iconWidth) {\n      element.selectAll(\"foreignObject\")\n        .data(history).enter()\n        .append(\"svg:foreignObject\")\n          .attr('x', (d:any) => {\n            if (d.depth > 0) {\n              if (inverted)\n                return d3.interpolate(scale(d.depth), scale(d.depth) + scale.step())(.5);\n              \n              return d3.interpolate(scale(d.depth), scale(d.depth) - scale.step())(.5);\n            } \n            if (inverted)\n              return scale(0) + this.iconWidth/4 + scale.bandwidth();\n          })\n          .attr('y', (d:any) => this.compareView.nativeElement.scrollHeight - 20 - this.elementPadding/2)\n          .attr('text-anchor', 'middle')\n          .attr('dominant-baseline', 'central')\n          .attr('font-family', 'Font Awesome 5 Free')\n          .attr('fill', 'black')\n          .attr('font-weight', 900)\n          .attr('overflow', 'visible')\n          .attr('height', this.iconWidth)\n          .attr('width', this.iconWidth)\n          .style('padding-left', '0px')\n          .html((data:any) => {\n            if (data.value)\n              return '<i class=\"fa fa-1x ' + iconCodes.default[data.value[\"prov:label\"]] + '\"></i>';\n            return '<i class=\"fa fa-1x fa-chart-bar\"></i>';\n          });\n    }\n  }\n\n  private linkShiftViews() {\n    let linkGroup = d3.select(\"#comparisonView\")\n      .append(\"g\").classed(\"selectionLinks\", true);\n    d3.selectAll(\"#comparisonView\")\n        .selectAll(\"g.compareA rect.hist\" + this.histId)\n      .each((d:any, i:number, arr:any[]) => {\n        // d3.select(arr[i]).classed();\n        let rect0 = d3.select(arr[i]);\n        let rect1 = d3.select(\"#comparisonView g.compareB g.\" + \n          d.data.metric.replace(\"quality:\", \"\") + \".\" + \n          d.data.column.replace(\"column:\", \"\") + \n          \" rect.hist\" + this.shiftHistId);\n        let x0 = parseInt(rect0.attr(\"x\")) + parseInt(rect0.attr(\"width\"));\n        let x1 = parseInt(rect1.attr(\"x\"));\n        let y0 = parseInt(rect0.attr(\"y\"));\n        let y1 = parseInt(rect1.attr(\"y\"));\n        let h0 = parseInt(rect0.attr(\"height\"));\n        let h1 = parseInt(rect1.attr(\"height\"));\n        linkGroup.append(\"g\")\n          .classed(d.data.metric.replace(\"quality:\", \"\"), true)\n          .classed(d.data.column.replace(\"column:\", \"\"), true)\n          .attr(\"fill\", this.determineColor(d.data.metric.replace(\"quality:\", \"\")))\n          .attr(\"stroke\", this.determineStrokeColor(d.data.metric.replace(\"quality:\", \"\")))\n          .attr(\"fill-opacity\", .4)\n          .classed(\"metric-link\", true)\n        .append(\"path\")\n          .attr(\"d\", this.linkRect(x0, x1, y0, y1, h0, h1))\n          .attr(\"stroke-width\", \"2px\");\n      })\n    d3.selectAll(\"#comparisonView\")\n      .selectAll(\"g.compareA rect.hist\" + this.histId)\n      .on(\"mouseover\", (d:any) => {\n\n      });\n  }\n\n  private scaleComparison() {\n    let histories = this.nodeHistory.map(hist => hist.depth);\n    let rate = 1;\n    d3.select(\"#comparisonView\").selectAll(\"g\").remove();\n    this.sankeyDiag().nodes.forEach((node:any) => {\n      let hist = this.nodeHistory.find((hist:any) => hist.id === parseInt(node.key.replace(\"history_entry:\", \"\")));\n      if (hist)\n        hist.depth = node.depth;\n      if(this.shiftNodeHistory && this.shiftNodeHistory.length > 0) {\n        hist = this.shiftNodeHistory.find((hist:any) => hist.id === parseInt(node.key.replace(\"history_entry:\", \"\")));\n        if (hist)\n          hist.depth = node.depth;\n      }\n    })\n    // let ratioScale = d3.scaleLinear().domain([0, 1]).range([this.elementPadding, this.scaleHistory(this.nodeHistory[this.nodeHistory.length-1].depth) + this.scaleHistory.bandwidth()]);\n    if(this.shiftNodeHistory && this.shiftNodeHistory.length > 0) {\n      let shiftNodeHistoryReversed = [];\n      shiftNodeHistoryReversed = shiftNodeHistoryReversed.concat(this.shiftNodeHistory);\n      shiftNodeHistoryReversed.reverse();\n      let shiftHistories = shiftNodeHistoryReversed.map(hist => hist.depth);\n      \n      // this scale determines how much space is available for both quality views\n      rate = histories.length/(histories.length + shiftHistories.length);\n\n      // d3.scaleLinear().domain(historyArray).range([35, parseFloat(this.compareView.nativeElement.scrollWidth) - this.nodeWidth - 15]);\n      let compareWidth = this.compareView.nativeElement.scrollWidth;\n      let detailWidth = 0;\n      if (this.showDetail)\n        detailWidth =  this.detailViewWidth/2;\n\n      let compareA = d3.select(\"#comparisonView\").append(\"g\").classed(\"compareA\", true);\n      let scaleA = d3.scaleBand().domain(histories)\n        .range([this.elementPadding, compareWidth/2 - detailWidth])\n        .paddingInner(this.innerPadding);\n      this.renderQualityView(this.nodeHistory, scaleA, compareA, false);\n      \n      let inverted = true;\n      let compareB = d3.select(\"#comparisonView\").append(\"g\").classed(\"compareB\", true);\n      // let compareShiftHistoryScale = d3.scaleBand().domain(shiftHistories)\n      // .range([this.elementPadding, this.scaleHistory(this.nodeHistory[this.nodeHistory.length-1].depth) + this.scaleHistory.bandwidth()])\n      // .paddingInner(this.innerPadding)\n      let scaleB = d3.scaleBand().domain(shiftHistories)\n        .range([this.elementPadding + compareWidth/2 + detailWidth, compareWidth - this.elementPadding])\n        .paddingInner(this.innerPadding);\n      this.renderQualityView(this.shiftNodeHistory, scaleB, compareB, inverted);\n\n      this.issueViewOffset = this.elementPadding + compareWidth/2 - detailWidth;\n      this.renderIssueSelectionView();\n\n      this.renderHistoryLinks(d3.select(\"#comparisonView\").append(\"g\").classed(\"iconsA\", true).classed(\"icons\", true), this.nodeHistory, scaleA, 'selected', false);\n      this.renderHistoryLinks(d3.select(\"#comparisonView\").append(\"g\").classed(\"iconsB\", true).classed(\"icons\", true), shiftNodeHistoryReversed, scaleB, 'shiftSelected', inverted);\n\n      if (!this.showDetail) {\n        this.linkShiftViews();\n        let lineGenerator = d3.line();\n        let path = lineGenerator([[this.elementPadding/2 + compareWidth/2 + detailWidth, 0], [this.elementPadding/2 + compareWidth/2 + detailWidth, this.compareView.nativeElement.scrollHeight]]);\n        // lineGenerator.context(d3.select(\"#comparisonView\"));\n        d3.select(\"#comparisonView\").append(\"path\")\n          .classed(\"separator\", true)\n          .attr(\"d\", path)\n          .attr(\"stroke\", \"gray\")\n          .attr(\"stroke-width\", \"2px\");\n      } else {\n        d3.select(\"#comparisonView g.selectionLinks\").remove();\n        d3.select(\"#comparisonView\").selectAll(\"path.separator\").remove();\n      }\n\n    } else {\n      d3.select(\"#comparisonView\").selectAll(\"path\").remove();\n      let compareA = d3.select(\"#comparisonView\").append(\"g\").classed(\"compareA\", true);\n      // let compareHistoryScale = d3.scaleBand().domain(histories)\n      //   .range([this.elementPadding, this.scaleHistory(this.nodeHistory[this.nodeHistory.length-1].depth) + this.scaleHistory.bandwidth()])\n      //   .paddingInner(this.innerPadding);\n      this.renderQualityView(this.nodeHistory, this.scaleHistory, compareA, false);\n      this.renderHistoryLinks(d3.select(\"#comparisonView\").append(\"g\").classed(\"icons\", true), this.nodeHistory, this.scaleHistory, 'selected', false);\n      this.issueViewOffset = this.elementPadding + this.compareView.nativeElement.scrollWidth - this.detailViewWidth;\n      this.renderIssueSelectionView();\n    }\n  }\n\n  private linkIssues(historyNodes: any[]): any[] {\n    if (historyNodes.length > 1) {\n      for(let i = 1; i < historyNodes.length; ++i) {\n        let hist0 = historyNodes[i-1];\n        let hist1 = historyNodes[i];\n\n      }\n    } else {\n      return [];\n    }\n  }\n\n  private linkRect(x0: any, x1:any, y0: any, y1: any, height0: any, height1: any): any {\n      var curvature = .6;\n\n      let xi = d3.interpolateNumber(x0, x1),\n          x2 = xi(curvature),\n          x3 = xi(1 - curvature);\n          // y0 = yFunction(d.from[0]),\n          // y1 = yFunction(d.to[0]);\n      return \"M\" + x0 + \",\" + y0\n           // + \"C\" + x2 + \",\" + y0\n           // + \" \" + x3 + \",\" + y1\n           + \" \" + x1 + \",\" + y1\n           + \"L\" + x1 + \",\" + (y1+ height1)\n           // + \"C\" + x3 + \",\" + (y1+ height1)\n           // + \" \" + x2 + \",\" + (y0+ height0)\n           + \" \" + x0 + \",\" + (y0+ height0)\n           + \"L\" + x0 + \",\" + y0;\n    // }\n    // return null;\n  }\n\n  private linkSkewed(d: any, yFunction: any, x0: any, x1:any): any {\n      var curvature = .6;\n\n      let xi = d3.interpolateNumber(x0, x1),\n          x2 = xi(curvature),\n          x3 = xi(1 - curvature),\n          y0 = yFunction(d.from[0]),\n          y1 = yFunction(d.to[0]);\n      return \"M\" + x0 + \",\" + y0\n           + \"C\" + x2 + \",\" + y0\n           + \" \" + x3 + \",\" + y1\n           + \" \" + x1 + \",\" + y1\n           + \"L\" + x1 + \",\" + (y1+ yFunction(d.to[1]) - yFunction(d.to[0]))\n           + \"C\" + x3 + \",\" + (y1+ yFunction(d.to[1]) - yFunction(d.to[0]))\n           + \" \" + x2 + \",\" + (y0+ yFunction(d.from[1]) - yFunction(d.from[0]))\n           + \" \" + x0 + \",\" + (y0+ yFunction(d.from[1]) - yFunction(d.from[0]))\n           + \"L\" + x0 + \",\" + y0;\n    // }\n    // return null;\n  }\n\n  private initializeColorScale() {\n    this.metricsColorScale = d3.scaleSequential(d3.interpolateViridis).domain([-1, this.uniqueMetrics.length+1]);\n    this.greyMetricsColorScale = d3.scaleSequential(d3.interpolateGreys).domain([-1, this.uniqueMetrics.length+1]);\n  }\n\n  private determineColor(metric: any): any {\n    return d3.color(this.metricsColorScale(this.uniqueMetrics.indexOf(metric))); //d.key.metric.replace(\"quality:\", \"\")\n  }\n\n  private determineGreyColor(metric: any): any {\n    return d3.color(this.greyMetricsColorScale(this.uniqueMetrics.indexOf(metric))); //d.key.metric.replace(\"quality:\", \"\")\n  }\n\n  private determineStrokeColor(metric: any): any {\n    return d3.color(this.metricsColorScale(this.uniqueMetrics.indexOf(metric))).brighter(.75); //d.key.metric.replace(\"quality:\", \"\")\n  }\n\n  private numericSort(a: number, b: number): number {\n      if (a > b)\n        return 1;\n      if (a < b)\n        return -1;\n      return 0;\n  }\n}\n","module.exports = \"div.d3tooltip {\\n  position: absolute;\\n  text-align: center;\\n  width: 160px;\\n  padding: 4px;\\n  font: 13px sans-serif;\\n  background: lightsteelblue;\\n  border: 2px;\\n  border-color: gray;\\n  border-radius: 8px;\\n  pointer-events: none;\\n  overflow: visible; }\\n\\nrect.selected {\\n  stroke: gray;\\n  fill: #ffffbf;\\n  stroke-width: 2px; }\\n\\nrect.selectedPath {\\n  stroke: gray;\\n  fill: #fc8d59;\\n  stroke-width: 2px; }\\n\\nrect.shiftSelectedPath {\\n  stroke: gray;\\n  fill: #91bfdb;\\n  stroke-width: 2px; }\\n\\nrect.selectedPath.shiftSelectedPath {\\n  stroke: gray;\\n  fill: #ffffbf;\\n  stroke-width: 2px; }\\n\\nrect.selectedNode {\\n  stroke: gray;\\n  stroke-width: 4px; }\\n\\nrect.shiftSelectedNode {\\n  stroke: gray;\\n  stroke-width: 4px; }\\n\\ng.icons rect.selected {\\n  fill: #fc8d59;\\n  stroke: gray;\\n  stroke-width: 2px; }\\n\\ng.icons rect.shiftSelected {\\n  fill: #91bfdb;\\n  stroke: gray;\\n  stroke-width: 2px; }\\n\\ng.icons rect.jointSelected {\\n  fill: #ffffbf;\\n  stroke: gray;\\n  stroke-width: 2px; }\\n\\ng.links foreignObject {\\n  text-anchor: middle;\\n  dominant-baseline: central;\\n  font-family: Font Awesome 5 Free;\\n  stroke: 2px;\\n  fill: none;\\n  white-space: nowrap;\\n  font-weight: 900;\\n  font-size: 1em;\\n  overflow: visible; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9jaHJpc3RpYW5ib3JzL1Byb2plY3RzL21ldHJpY2RvY19hbmd1bGFyL3NyYy9hcHAvcmVmaW5lLXByb3ZlbmFuY2UtZXhwbG9yZXIvcmVmaW5lLXByb3ZlbmFuY2UtZXhwbG9yZXIuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBSUE7RUFDSSxrQkFBa0I7RUFDbEIsa0JBQWtCO0VBQ2xCLFlBQVk7RUFDWixZQUFZO0VBQ1oscUJBQXFCO0VBQ3JCLDBCQUEwQjtFQUMxQixXQUFXO0VBQ1gsa0JBQWtCO0VBQ2xCLGtCQUFrQjtFQUNsQixvQkFBb0I7RUFDcEIsaUJBQWdCLEVBQUE7O0FBR3BCO0VBQ0ksWUFBWTtFQUNaLGFBbEJ5QjtFQW1CekIsaUJBQWlCLEVBQUE7O0FBR3JCO0VBQ0ksWUFBWTtFQUNaLGFBMUJvQjtFQTJCcEIsaUJBQWlCLEVBQUE7O0FBR3JCO0VBQ0ksWUFBWTtFQUNaLGFBL0IwQjtFQWdDMUIsaUJBQWlCLEVBQUE7O0FBR3JCO0VBQ0ksWUFBWTtFQUNaLGFBcEN5QjtFQXFDekIsaUJBQWlCLEVBQUE7O0FBR3JCO0VBQ0ksWUFBWTtFQUNaLGlCQUFpQixFQUFBOztBQUdyQjtFQUNJLFlBQVk7RUFDWixpQkFBaUIsRUFBQTs7QUFHckI7RUFDSSxhQXJEb0I7RUFzRHBCLFlBQVk7RUFDWixpQkFBaUIsRUFBQTs7QUFHckI7RUFDSSxhQTFEMEI7RUEyRDFCLFlBQVk7RUFDWixpQkFBaUIsRUFBQTs7QUFHckI7RUFDSSxhQS9EeUI7RUFnRXpCLFlBQVk7RUFDWixpQkFBaUIsRUFBQTs7QUFHckI7RUFDSSxtQkFBbUI7RUFDbkIsMEJBQTBCO0VBQzFCLGdDQUFnQztFQUNoQyxXQUFXO0VBQ1gsVUFBVTtFQUNWLG1CQUFtQjtFQUNuQixnQkFBZ0I7RUFDaEIsY0FBYztFQUNkLGlCQUFpQixFQUFBIiwiZmlsZSI6InNyYy9hcHAvcmVmaW5lLXByb3ZlbmFuY2UtZXhwbG9yZXIvcmVmaW5lLXByb3ZlbmFuY2UtZXhwbG9yZXIuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIkc2VsZWN0ZWQtY29sb3I6ICNmYzhkNTk7XG4kc2hpZnQtc2VsZWN0ZWQtY29sb3I6ICM5MWJmZGI7XG4kYm90aC1zZWxlY3RlZC1jb2xvcjogI2ZmZmZiZjtcblxuZGl2LmQzdG9vbHRpcCB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICB3aWR0aDogMTYwcHg7XG4gICAgcGFkZGluZzogNHB4O1xuICAgIGZvbnQ6IDEzcHggc2Fucy1zZXJpZjtcbiAgICBiYWNrZ3JvdW5kOiBsaWdodHN0ZWVsYmx1ZTtcbiAgICBib3JkZXI6IDJweDtcbiAgICBib3JkZXItY29sb3I6IGdyYXk7XG4gICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICAgIG92ZXJmbG93OnZpc2libGU7XG59XG5cbnJlY3Quc2VsZWN0ZWQge1xuICAgIHN0cm9rZTogZ3JheTtcbiAgICBmaWxsOiAkYm90aC1zZWxlY3RlZC1jb2xvcjtcbiAgICBzdHJva2Utd2lkdGg6IDJweDtcbn1cblxucmVjdC5zZWxlY3RlZFBhdGgge1xuICAgIHN0cm9rZTogZ3JheTtcbiAgICBmaWxsOiAkc2VsZWN0ZWQtY29sb3I7XG4gICAgc3Ryb2tlLXdpZHRoOiAycHg7XG59XG5cbnJlY3Quc2hpZnRTZWxlY3RlZFBhdGgge1xuICAgIHN0cm9rZTogZ3JheTtcbiAgICBmaWxsOiAkc2hpZnQtc2VsZWN0ZWQtY29sb3I7XG4gICAgc3Ryb2tlLXdpZHRoOiAycHg7XG59XG5cbnJlY3Quc2VsZWN0ZWRQYXRoLnNoaWZ0U2VsZWN0ZWRQYXRoIHtcbiAgICBzdHJva2U6IGdyYXk7XG4gICAgZmlsbDogJGJvdGgtc2VsZWN0ZWQtY29sb3I7XG4gICAgc3Ryb2tlLXdpZHRoOiAycHg7XG59XG5cbnJlY3Quc2VsZWN0ZWROb2RlIHtcbiAgICBzdHJva2U6IGdyYXk7XG4gICAgc3Ryb2tlLXdpZHRoOiA0cHg7XG59XG5cbnJlY3Quc2hpZnRTZWxlY3RlZE5vZGUge1xuICAgIHN0cm9rZTogZ3JheTtcbiAgICBzdHJva2Utd2lkdGg6IDRweDtcbn1cblxuZy5pY29ucyByZWN0LnNlbGVjdGVkIHtcbiAgICBmaWxsOiAkc2VsZWN0ZWQtY29sb3I7XG4gICAgc3Ryb2tlOiBncmF5O1xuICAgIHN0cm9rZS13aWR0aDogMnB4O1xufVxuXG5nLmljb25zIHJlY3Quc2hpZnRTZWxlY3RlZCB7XG4gICAgZmlsbDogJHNoaWZ0LXNlbGVjdGVkLWNvbG9yO1xuICAgIHN0cm9rZTogZ3JheTtcbiAgICBzdHJva2Utd2lkdGg6IDJweDtcbn1cblxuZy5pY29ucyByZWN0LmpvaW50U2VsZWN0ZWQge1xuICAgIGZpbGw6ICRib3RoLXNlbGVjdGVkLWNvbG9yO1xuICAgIHN0cm9rZTogZ3JheTtcbiAgICBzdHJva2Utd2lkdGg6IDJweDtcbn1cblxuZy5saW5rcyBmb3JlaWduT2JqZWN0IHtcbiAgICB0ZXh0LWFuY2hvcjogbWlkZGxlO1xuICAgIGRvbWluYW50LWJhc2VsaW5lOiBjZW50cmFsO1xuICAgIGZvbnQtZmFtaWx5OiBGb250IEF3ZXNvbWUgNSBGcmVlO1xuICAgIHN0cm9rZTogMnB4O1xuICAgIGZpbGw6IG5vbmU7XG4gICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgICBmb250LXdlaWdodDogOTAwO1xuICAgIGZvbnQtc2l6ZTogMWVtO1xuICAgIG92ZXJmbG93OiB2aXNpYmxlO1xufSJdfQ== */\"","import { Component, OnInit, Input, ViewEncapsulation, ElementRef, ViewChild } from '@angular/core';\nimport { Router, ActivatedRoute, ParamMap }     from '@angular/router';\nimport { DomSanitizer }                         from '@angular/platform-browser';\nimport { OpenRefineService }                    from './../shared/open-refine/open-refine.service';\nimport { OpenRefineProject }                    from './../shared/open-refine/model/open-refine-project';\nimport { ProjectMetadata }                      from './../shared/open-refine/model/project-metadata';\nimport { ProvenanceOverlayModel }               from './../refine-provenance/model/provenance-overlay-model';\n\nimport { ContextMenuComponent, ContextMenuService } from 'ngx-contextmenu';\n\nimport * as d3         from 'd3';\nimport * as d3Sankey   from './d3-sankey.js';\nimport * as iconCodes  from './icon-codes.json';\n\n@Component({\n  selector: 'app-refine-provenance-explorer',\n  templateUrl: './refine-provenance-explorer.component.html',\n  styleUrls: ['./refine-provenance-explorer.component.scss'],\n  providers: [ OpenRefineService ],\n  encapsulation: ViewEncapsulation.None\n})\nexport class RefineProvenanceExplorerComponent implements OnInit {\n\n  errorMessage: string;\n  projectId: string;\n  refineProjectUrl;\n  histId: any;\n  shiftHistId: any;\n  nodeHistory: any[];\n  shiftNodeHistory: any[];\n  projectMetadata: ProjectMetadata;\n  openRefineProject: OpenRefineProject;\n  provenanceOverlayModel: any;\n  loadFinished: boolean = false;\n  scaleHistory: any;\n  scaleFuture:any;\n\n  // percentage widths\n  pageWidth: number = 100;\n  provWidth: number = 100;\n  detailWidth: number = 25;\n  detailHeight: number = 45;\n  sankeyHeight: number = 55;\n  refineHeight: number = 35;\n  // absolute widths\n  qualityViewWidth: number = 0;\n  detailViewWidth: number = 0;\n  nodeWidth:number = 36;\n  iconWidth:number = 16;\n  elementPadding: number = 35;\n  innerPadding: number = .8;\n\n  sankeyColorScale: any;\n\n  showDetail: boolean = true;\n\n  @ViewChild('qualityMetric', {static: false}) public metricMenu: ContextMenuComponent;\n  @ViewChild('issue', {static: false}) public issueMenu: ContextMenuComponent;\n\n  //@ViewChild('provGraph') \n  provGraph:ElementRef;\n\n  // d3 sankey library\n  d3Sankey;\n  // this is the graph\n  sankeyDiag;\n  // these are the d3 elements of the graph\n  sankeyNodes;\n  sankeyLinks;\n  // d3 transition\n  transition;\n\n  metricColorScale: string[] = ['#f7fcf0','#e0f3db','#ccebc5','#a8ddb5','#7bccc4','#4eb3d3','#2b8cbe','#0868ac','#084081'];\n\n  constructor(protected route: ActivatedRoute,\n    protected router: Router,\n    protected openRefineService: OpenRefineService,\n    protected contextMenuService: ContextMenuService,\n    private domSanitizer : DomSanitizer) {\n  }\n\n  ngOnInit() {\n    this.transition = d3.transition()\n      .duration(1000)\n      .ease(d3.easeLinear);\n    this.projectId = this.route.snapshot.paramMap.get('projectId');\n    this.getOpenRefineProject();\n\n    this.refineProjectUrl = this.domSanitizer.bypassSecurityTrustResourceUrl(\"http://localhost:3333/project?project=\" + this.projectId);\n    this.openRefineService.getProjectMetadata(this.projectId)\n      .subscribe(\n        projectMetadata => this.projectMetadata = projectMetadata,\n        error => this.errorMessage = <any>error);\n  }\n\n  getOpenRefineProject() {\n    let iconPadding:number = 8;\n    let nodePadding:number = iconPadding*2 + this.iconWidth;\n\n    this.openRefineService.getRefineProject(this.projectId)\n      .subscribe(\n        openRefineProject => {\n          this.openRefineProject = openRefineProject;\n          this.provenanceOverlayModel = openRefineProject.overlayModels['qualityProvenance'];\n\n          if(this.provenanceOverlayModel && this.provGraph) {\n            let graph = this.buildGraph(this.provenanceOverlayModel);\n            this.histId = this.provenanceOverlayModel.currentHistoryEntry.localPart;\n\n            this.openRefineService.getHistory(this.projectId)\n            .subscribe((history: any) => {\n              this.nodeHistory = [];\n              this.nodeHistory.push({ id: 0, value: this.provenanceOverlayModel.provenance.entity[\"history_entry:0\"] });\n              for (let pastEntry of history.past) {\n                this.nodeHistory.push({ id: pastEntry.id, value: this.provenanceOverlayModel.provenance.entity[\"history_entry:\" + pastEntry.id] });\n              }\n              this.highlightProvGraph(this.nodeHistory, \"selectedPath\");\n\n              // this.scaleHistory = d3.scaleBand().domain(this.nodeHistory).range([35, parseFloat(this.provGraph.nativeElement.scrollWidth) - 15]).padding(0.8);        \n\n              let ops = [];\n              Object.entries(this.provenanceOverlayModel.provenance.activity).forEach((act:any) => {\n                if (act[0].includes(\"change:\") && !ops.includes(act[1][\"prov:label\"]))\n                  ops.push(act[1][\"prov:label\"]);\n              });\n\n              // first lets create the sankey\n              this.sankeyDiag = d3Sankey.sankey()\n                // .nodeWidth(this.nodeWidth)\n                .nodePadding(nodePadding)\n                .extent([[0, 5], [this.provGraph.nativeElement.scrollWidth - 5, this.provGraph.nativeElement.scrollHeight - (this.iconWidth + nodePadding)]])\n                .nodeAlign(d3Sankey.sankeyLeft);\n\n              this.sankeyDiag.nodes(graph.nodes)\n                .links(graph.links)\n                .nodeId((node:any) => node.key);\n\n              this.setSankeyScale();\n\n              this.sankeyLinks = d3.select(\"svg.provGraph\").append(\"g\")\n                // .attr(\"fill\", \"none\")\n                .attr(\"stroke-opacity\", 0.25)\n                .classed(\"links\", true)\n              .selectAll(\"g\")\n              .data(this.sankeyDiag().links)\n              .enter().append(\"g\");\n\n              // Define the div for the tooltip\n              var div = d3.select(\"body\").append(\"div\")\n                .attr(\"class\", \"d3tooltip\")\n                .style(\"opacity\", 0);\n              var divChange = d3.select(\"body\").append(\"div\")\n                .classed(\"d3tooltip\", true)\n                .style(\"opacity\", 0);\n\n              this.sankeyLinks.append(\"path\")\n                  .attr(\"d\", (d:any) => this.linkSkewed(d))\n                  .attr(\"class\", (d:any) => { \n                    return \"activity\" + d.target.key.replace(\"history_entry:\",\"\");\n                  })\n                  .attr(\"fill\", \"lightgray\")\n                  // .attr(\"stroke\", d => \"grey\")\n                  // .attr(\"fill\", d => {\n                  //   if (d.wdf) {\n                  //     let change = this.provenanceOverlayModel.provenance.activity[d.wdf[\"prov:activity\"]];\n                  //     return d3.schemeSet2[ops.indexOf(change[\"prov:label\"])];//this.sankeyColorScale(ops.indexOf(col));\n                  //   } \n                  //   return d3.schemePastel2[0];\n                  // })\n                  .attr(\"fill-opacity\", (d:any) => {\n                    // if(this.scaleHistory(d.source.depth))\n                      return 0.35;\n                    // return 0.2;\n                  })\n                  .attr(\"stroke\", (d:any) => {\n                    if(this.nodeHistory.map(node => node.id).includes(parseInt(d.target.key.replace(\"history_entry:\",\"\"))) ||\n                      (this.shiftNodeHistory && this.shiftNodeHistory.map(node => node.id).includes(parseInt(d.target.key.replace(\"history_entry:\",\"\")))))\n                      return \"gray\";\n                    else\n                      return null;\n                  })\n                  .attr(\"stroke-width\", 2);\n                  \n              this.sankeyLinks.append(\"svg:foreignObject\")\n                .classed(\"change\", true)\n                .html((d:any) => {\n                  let change = this.provenanceOverlayModel.provenance.activity[d.wdf[\"prov:activity\"]];\n                  let htmlText = \"<span>\";\n                  // if (d.source.sourceLinks && d.source.sourceLinks.length === 1) {\n                    htmlText += '<i class=\"fa fa-1x ' + iconCodes.default[change[\"prov:label\"]] + '\"></i></span>'; //iconCodes.default[d.entity[\"prov:label\"]]\n                    return htmlText;\n                  // } else {\n                  //   // remove all other \n                  //   return '<i class=\"fa fa-1x fa-ellipsis-v\"></i>';\n                  // }\n                })\n                .attr('x', (d:any) => {\n                  if(this.scaleHistory(d.source.depth) && this.scaleHistory(d.target.depth))\n                    return d3.interpolate(this.scaleHistory(d.source.depth)+this.scaleHistory.bandwidth(), this.scaleHistory(d.target.depth))(.85) - this.nodeWidth/4;\n                  else if (this.scaleHistory(d.source.depth) && this.scaleFuture(d.target.depth))\n                    return d3.interpolate(this.scaleHistory(d.source.depth)+this.scaleHistory.bandwidth(), this.scaleFuture(d.target.depth))(.85) - this.nodeWidth/4;\n                  else if (this.scaleFuture(d.source.depth))\n                    return d3.interpolate(this.scaleFuture(d.source.depth)+this.scaleFuture.bandwidth(), this.scaleFuture(d.target.depth))(.85) - this.nodeWidth/4;\n                })\n                .attr('y', (d:any) => {\n                  // if (d3.interpolate(d.target.y1, d.target.y0)(.5) > d.target.y1)\n                    return d3.interpolate(d.target.y1, d.target.y0)(.5) - this.nodeWidth/4;\n                  // return 0;\n                })\n                .on(\"mouseover\", (data:any) => {\n                  let ent = this.provenanceOverlayModel.provenance.entity[data.wdf[\"prov:generatedEntity\"]];\n                  let text = \"<span><b>Operation:</b> \"+ ent[\"prov:value\"].$ +\"</span>\";\n                  divChange.html(text)\n                    .style(\"left\", (d3.event.pageX - div.node().scrollWidth) + \"px\")\n                    .style(\"top\", (d3.event.pageY - 28) + \"px\");\n                  divChange.transition()\n                    .duration(100)\n                    .style(\"opacity\", .9);\n                  div.style(\"opacity\", 0);\n                })\n                .on(\"mousemove\", (data:any) => {\n                  divChange\n                    .style(\"left\", (d3.event.pageX - div.node().scrollWidth) + \"px\")\n                    .style(\"top\", (d3.event.pageY - 28) + \"px\");\n                })\n                .on(\"mouseout\", (data:any) => {\n                  divChange.transition()\n                    .duration(100)\n                    .style(\"opacity\", 0);\n                  div.style(\"opacity\", 0);\n                });\n              // these are the facets\n              this.sankeyLinks.filter((link: any) => this.provenanceOverlayModel.provenance.activity[\"facet:\" + link.target.key.replace(\"history_entry:\",\"\")]).append(\"svg:foreignObject\")\n                .classed(\"facet\", true)\n                .attr('x', (d:any) => {\n                    if(this.scaleHistory(d.source.depth) && this.scaleHistory(d.target.depth))\n                      return d3.interpolate(this.scaleHistory(d.source.depth)+this.scaleHistory.bandwidth(), this.scaleHistory(d.target.depth))(.5) - this.nodeWidth/4;\n                    else if (this.scaleHistory(d.source.depth) && this.scaleFuture(d.target.depth))\n                      return d3.interpolate(this.scaleHistory(d.source.depth)+this.scaleHistory.bandwidth(), this.scaleFuture(d.target.depth))(.5) - this.nodeWidth/4;\n                    else if (this.scaleFuture(d.source.depth))\n                      return d3.interpolate(this.scaleFuture(d.source.depth)+this.scaleFuture.bandwidth(), this.scaleFuture(d.target.depth))(.5) - this.nodeWidth/4;\n                  })\n                .attr('y', (d:any) => {\n                  return d.source.y1;\n                })\n                .html((d:any) => '<i class=\"fa fa-1x fa-filter\"></i> ')\n                .on(\"mouseover\", (data:any) => {\n                  let id = data.target.key.replace(\"history_entry:\",\"\");\n                  let facet:any[] = [].concat(this.provenanceOverlayModel.provenance.activity[\"facet:\" + id]);\n                  if(facet) {}\n                  let text: string[] = [];\n                  let htmlText = \"\";\n                  for (let f of facet) {\n                    text = text.concat(Object.entries(f)\n                      .map((d:any) => { \n                        if (d[0].includes(\"facet:_\")) {\n                          if(d[1].$ == \"true\") {\n                            return d[0].replace(\"facet:_\",\"\");\n                          } else if (d[1].$ == \"false\")\n                          {\n                            // do nothing\n                          }\n                          else {\n                            return d[0].replace(\"facet:_\", \"\") + \": \" + d[1].$;\n                          }\n                        }\n                        if (d[0].includes(\"facet:\")) {\n                          if(d[1].$ == \"true\") {\n                            return d[0].replace(\"facet:\",\"\");\n                          } else if (d[1].$ == \"false\")\n                          {\n                            // do nothing\n                          }\n                          else {\n                            return d[0].replace(\"facet:\", \"\") + \": \" + d[1].$;\n                          }\n                          // return d[0].replace(\"facet:\", \"\") + \": \" + d[1].$\n                        }\n                      }).filter(d => d != null));\n                      div.transition()\n                        .duration(100)\n                        .style(\"opacity\", .9);\n                    htmlText += \"<span><b>Filter \" + f[\"other:\" + id].$ + \" rows</b></span><br><span>\" + text.join(\"<br>\") + \"</span>\";\n                  }\n                  // if(facet[\"other:\" + id]) {\n                  div.html(htmlText)//\"<span><b>Filter \" + facet[\"other:\" + id].$ + \" rows</b></span><br><span>\" + text.join(\"<br>\") + \"</span>\")\n                      .style(\"left\", (d3.event.pageX - div.node().scrollWidth) + \"px\")\n                      .style(\"top\", (d3.event.pageY - 28) + \"px\");\n\n                  // }\n                  divChange.style(\"opacity\", 0);\n                  return text;\n                })\n                .on(\"mousemove\", (data:any) => {\n                  div\n                    .style(\"left\", (d3.event.pageX - div.node().scrollWidth) + \"px\")\n                    .style(\"top\", (d3.event.pageY - 28) + \"px\");\n                })\n                .on(\"mouseout\", (d:any, i, el:any[]) => {\n                  div.transition()\n                    // .duration(100)\n                    .style(\"opacity\", 0);\n                });\n\n              this.sankeyLinks.selectAll(\"path\").on(\"mouseover\", (data:any, i, el:any[]) => {\n                let id = data.target.key.replace(\"history_entry:\",\"\");\n                d3.select(el[i].parentNode).raise();\n\n                let change = this.provenanceOverlayModel.provenance.entity[data.wdf[\"prov:generatedEntity\"]];\n                let text = \"<span><b>Operation:</b> \"+ change[\"prov:value\"].$ +\"</span>\";\n                divChange.html(text)\n                  .style(\"top\", (d3.event.pageY - 28) + \"px\")\n                  .style(\"left\", (d3.event.pageX - div.node().scrollWidth) + \"px\");\n                divChange.transition()\n                  .duration(100)\n                  .style(\"opacity\", .9);\n\n                if(this.provenanceOverlayModel.provenance.activity[\"facet:\" + id]) {\n                  // let facet = this.provenanceOverlayModel.provenance.activity[\"facet:\" + id];\n                  let htmlText = \"\";\n                  let textFacet: string[] = [];\n                  let facet:any[] = [].concat(this.provenanceOverlayModel.provenance.activity[\"facet:\" + id]);\n                  for (let f of facet) {\n                    textFacet = textFacet.concat(Object.entries(f)\n                      .map((d:any) => { \n                        if (d[0].includes(\"facet:_\")) {\n                          if(d[1].$ == \"true\") {\n                            return d[0].replace(\"facet:_\",\"\");\n                          } else if (d[1].$ == \"false\")\n                          {\n                            // do nothing\n                          }\n                          else {\n                            return d[0].replace(\"facet:_\", \"\") + \": \" + d[1].$;\n                          }\n                        }\n                        if (d[0].includes(\"facet:\")) {\n                          if(d[1].$ == \"true\") {\n                            return d[0].replace(\"facet:\",\"\");\n                          } else if (d[1].$ == \"false\")\n                          {\n                            // do nothing\n                          }\n                          else {\n                            return d[0].replace(\"facet:\", \"\") + \": \" + d[1].$;\n                          }\n                          // return d[0].replace(\"facet:\", \"\") + \": \" + d[1].$\n                        }\n                      }).filter(d => d != null));\n                      div.transition()\n                        .duration(100)\n                        .style(\"opacity\", .9);\n                    htmlText += \"<span><b>Filter \" + f[\"other:\" + id].$ + \" rows</b></span><br><span>\" + textFacet.join(\"<br>\") + \"</span>\";\n                  }\n                  div.html(htmlText)//\"<span><b>Filter \" + facet[\"other:\" + id].$ + \" rows</b></span><br><span>\" + text.join(\"<br>\") + \"</span>\")\n                      .style(\"left\", (d3.event.pageX - div.node().scrollWidth) + \"px\")\n                      .style(\"top\", (d3.event.pageY - 28) + \"px\");\n                  // let text = Object.entries(facet)\n                  //   .map((d:any) => { \n                  //     if (d[0].includes(\"facet:_\"))\n                  //       return d[0].replace(\"facet:_\", \"\") + \": <i>\" + d[1].$.split(\",\").join(\"<br>\") + \"</i>\";\n                  //     if (d[0].includes(\"facet:\"))\n                  //       return d[0].replace(\"facet:\", \"\") + \": \" + d[1].$.split(\",\").join(\"<br>\") + \"</i>\";\n                  //   }).filter(d => d != null);\n                  \n                  // // \"test test test\".split(\",\").join()\n                  // if(facet[\"other:\" + id]) {\n                  //   div.html(\"<span><b>Filter \" + facet[\"other:\" + id].$ + \" rows</b></span><br><span>\" + text.join(\"<br>\") + \"</span>\")\n                  //     .style(\"left\", (d3.event.pageX - div.node().scrollWidth) + \"px\")\n                  //     .style(\"top\", (d3.event.pageY - 28 - div.node().scrollHeight) + \"px\");\n                  // }\n                  div.transition()\n                    .duration(100)\n                    .style(\"opacity\", .9);\n                  return text;\n                }\n              })\n              .on(\"mousemove\", (data:any) => {\n                div\n                  .style(\"left\", (d3.event.pageX - div.node().scrollWidth) + \"px\")\n                  .style(\"top\", (d3.event.pageY - 28 - div.node().scrollHeight) + \"px\");\n                divChange\n                  .style(\"left\", (d3.event.pageX - div.node().scrollWidth) + \"px\")\n                  .style(\"top\", (d3.event.pageY - 28) + \"px\");\n                })\n              .on(\"mouseout\", (d:any, i, el:any[]) => {\n                div.transition()\n                  // .duration(100)\n                  .style(\"opacity\", 0);\n                divChange.transition()\n                  // .duration(100)\n                  .style(\"opacity\", 0);\n              });\n\n              // -1 prevents drawing of color white\n              this.sankeyColorScale = d3.scaleSequential(d3.interpolateBlues).domain([-1, ops.length]);\n              // let scale = d3.scaleOrdinal(d3.schemeCategory10).domain(ops);\n\n              let cols:any = {};\n              for(let k of Object.keys(this.provenanceOverlayModel.provenance.entity)) {\n                if(k.includes(\"column:\"))\n                  cols[k] = this.provenanceOverlayModel.provenance.entity[k];\n              }\n\n              this.sankeyNodes = d3.select(\"svg.provGraph\").append(\"g\")\n                .classed(\"nodes\", true)\n                // .attr(\"stroke\", \"#000\")\n              .selectAll(\".history_nodes\")\n              .data(this.sankeyDiag().nodes)\n              .enter().append(\"g\")\n                .attr(\"class\", \"history_nodes\");\n\n              this.sankeyNodes.append(\"rect\")\n                  .attr(\"id\", (data:any) => {\n                    return data.key.replace(\":\",\"\");\n                  })\n                  .attr(\"x\", (d:any) => {\n                    if(this.scaleHistory(d.depth))\n                      return this.scaleHistory(d.depth);\n                    else\n                      return this.scaleFuture(d.depth);\n                  })\n                  .attr(\"y\", (data:any) => data.y0)\n                  .attr(\"height\", (data:any) => {\n                    return data.y1 - data.y0\n                  })\n                  .attr(\"width\", (d:any) => {\n                    if(this.scaleHistory(d.depth)) {\n                      if (d.activity)\n                        return this.scaleHistory.bandwidth()/2;\n                      return this.scaleHistory.bandwidth();\n                    }\n                    return this.scaleFuture.bandwidth();\n                  })\n                  .attr(\"stroke\", \"none\")\n                  .attr(\"fill\", (d:any) => {\n                    return \"lightgray\";\n                  });\n\n              this.sankeyNodes.on(\"mouseover\", (data:any) => {\n                  div.transition()\n                    .duration(100)\n                    .style(\"opacity\", .9);\n                  // let id = data.key.replace(\"history_entry:\",\"\")\n\n                  let datasetRows = this.provenanceOverlayModel.provenance.entity[\"project_info:dataset\"][\"other:\" + data.key.replace(\"history_entry:\",\"\")]\n                  // if (data.entity) {\n                    div.html(\"<span>Rows: \"+ datasetRows.$ +\"</span>\")\n                      .style(\"left\", (d3.event.pageX) + \"px\")\n                      .style(\"top\", (d3.event.pageY - 28) + \"px\");\n                })\n                .on(\"mousemove\", (data:any) => {\n                  div\n                    .style(\"left\", (d3.event.pageX) + \"px\")\n                    .style(\"top\", (d3.event.pageY - 28) + \"px\");\n                })\n                .on(\"mouseout\", (d:any) => {\n                  div.transition()\n                    .duration(100)\n                    .style(\"opacity\", 0);\n                })\n                .on(\"click\", (data:any, index:number, entries:any[]) => {\n                  if (data.entity) {\n                    let histIdClicked = data.key.replace(\"history_entry:\", \"\");\n                    if (d3.event.shiftKey) {\n                      this.shiftHistId = histIdClicked;\n                      // we need to remove the previously shift selected path\n                      this.clearProvGraphHighlights();\n\n                      this.shiftNodeHistory = this.determineNodeHistory(histIdClicked);\n                      this.setSankeyScale();\n                      this.highlightProvGraph(this.nodeHistory, \"selectedPath\")\n                      this.highlightProvGraph(this.shiftNodeHistory, \"shiftSelectedPath\");\n                      d3.select(\"svg.provGraph g.nodes\").select(\"rect#history_entry\" + histIdClicked)\n                        .classed(\"shiftSelectedNode\", true);\n                    } else {\n                      this.shiftHistId = null;\n                      this.histId = histIdClicked;\n                      this.clearProvGraphHighlights();\n                      this.shiftNodeHistory = []\n                      this.nodeHistory = this.determineNodeHistory(histIdClicked);\n                      this.setSankeyScale();\n                      this.highlightProvGraph(this.nodeHistory, \"selected\");\n                      d3.select(\"svg.provGraph g.nodes\").select(\"rect#history_entry\" + histIdClicked)\n                        .classed(\"selectedNode\", true);\n                    }\n                  }\n                });\n\n              this.highlightProvGraph(this.nodeHistory, \"selected\");\n              this.loadFinished = true;\n            });\n          }\n        },\n        error => this.errorMessage = <any>error\n      );\n  }\n\n  buildGraph(provenanceOverlayModel: any):any {\n    let links:any[] = [];\n\n    // nodes are the history entries, stored as entities\n    let nodeEntries:any[] = Object.entries(provenanceOverlayModel.provenance.entity).filter((entity: any) => entity[0].includes('history_entry'));\n\n    for (let wdf of Object.values(provenanceOverlayModel.provenance.wasDerivedFrom)) {\n      let value = Object.values(provenanceOverlayModel.provenance.wasDerivedFrom).filter((wdf_filter: any) => wdf_filter[\"prov:usedEntity\"] === wdf[\"prov:usedEntity\"]).length;\n      let endValue = Object.values(provenanceOverlayModel.provenance.wasDerivedFrom).filter((wdf_filter: any) => wdf_filter[\"prov:usedEntity\"] === wdf[\"prov:generatedEntity\"]).length;\n      if (endValue == 0)\n        value = 1;\n\n      if (wdf[\"prov:usedEntity\"] && !wdf[\"prov:generatedEntity\"].includes(\"quality\")) {\n        links.push({\n          source: wdf[\"prov:usedEntity\"],\n          target: wdf[\"prov:generatedEntity\"],\n          // generated: provenanceOverlayModel.provenance.entity[wdf[\"prov:generatedEntity\"]],\n          out: null,\n          in: null,\n          value: 1,\n          // depth: Object.values(provenanceOverlayModel.provenance.wasDerivedFrom).indexOf(wdf),\n          wdf: wdf\n        });\n      }\n    }\n\n    let cols:any = {};\n    for(let k of Object.keys(this.provenanceOverlayModel.provenance.entity)) {\n      if(k.includes(\"column:\"))\n        cols[k] = this.provenanceOverlayModel.provenance.entity[k];\n    }\n\n    let nodes:any[] = [];\n    for (let entry of nodeEntries) {\n      let activityId = entry[0].replace(\"history_entry:\", \"\");\n      let colMetrics:any = {};\n      let colNames:any[] = [];\n      let mNames:string[] = [];\n      Object.keys(cols).forEach((k:any) => {\n        let qEntry = cols[k][\"quality:\"+activityId];\n        if(qEntry) {\n          colMetrics[k] = qEntry;\n          for(let m of qEntry) {\n            colNames.push({col:k, metric: m.type});\n            if(!mNames.includes(m.type))\n              mNames.push(m.type);\n          }\n        }\n      });\n      \n      let rowSize = 0;\n      let histInfo = this.provenanceOverlayModel.provenance.entity[\"project_info:dataset\"][\"other:\" + entry[0].replace(\"history_entry:\",\"\")];\n      if(histInfo)\n        rowSize = parseInt(histInfo.$);\n      nodes.push({key: entry[0], value: rowSize, entity: entry[1], depth: 2});\n    }\n\n    // for (let activity of Object.entries(this.provenanceOverlayModel.provenance.activity).filter((a: any) => a[0].includes(\"facet:\"))) {\n    //   let id = activity[0].replace(\"facet:\", \"\");\n    //   let rowSize = 0;\n    //   if (activity[1][\"other:\"+id])\n    //     rowSize = parseInt(activity[1][\"other:\"+id].$);\n\n    //   nodes.push({\n    //     key: activity[0],\n    //     value: rowSize,\n    //     activity: activity[1]\n    //   })\n    // }\n\n    let graph = {\n      nodes: nodes,\n      links: links\n    };\n    return graph;\n  }\n\n  linkSkewed(d: any): any {\n    var curvature = .6;\n    let id = parseInt(d.target.key.replace(\"history_entry:\",\"\"));\n    let facet = [].concat(this.provenanceOverlayModel.provenance.activity[\"facet:\" + id]);\n    // var x0 = d.source.x1,\n    //     x1 = d.target.x0;\n    let x0 = this.scaleHistory(d.source.depth) + this.scaleHistory.bandwidth(),\n        x1 = this.scaleHistory(d.target.depth);\n    if (this.scaleHistory(d.source.depth) && d.source.activity) {\n      x0 -= (this.scaleHistory.bandwidth()/2);\n    } else if (this.scaleFuture(d.source.depth) && d.source.activity) {\n      x0 -= (this.scaleFuture.bandwidth()/2);\n    }\n    if (!x0)\n      x0 = this.scaleFuture(d.source.depth) + this.scaleFuture.bandwidth();\n    if (!x1)\n      x1 = this.scaleFuture(d.target.depth);\n    \n    let xi = d3.interpolateNumber(x0, x1),\n        x2 = xi(curvature),\n        x3 = xi(1 - curvature),\n        y0 = d.source.y0,\n        y1 = d.target.y0;\n\n    let path =  \"M\" + x0 + \",\" + y0\n    \n    if (facet[0] && facet[0][\"other:\"+id]) {\n      let heightRatio = parseInt(facet[0][\"other:\"+id].$)/d.source.value;\n      path += \"C\" + xi(.2) + \",\" + y0\n        + \" \" + xi(.3) + \",\" + (y0+ (d.source.y1 - d.source.y0)*(1-heightRatio))\n        + \" \" + xi(.5) + \",\" + (y0+ (d.source.y1 - d.source.y0)*(1-heightRatio))\n        + \"L\" + xi(.5) + \",\" + (y0+ (d.source.y1 - d.source.y0)*(1-heightRatio))\n        + \"C\" + xi(.7) + \",\" + (y0+ (d.source.y1 - d.source.y0)*(1-heightRatio))\n        + \" \" + xi(.8) + \",\" + y1\n        + \" \" + x1 + \",\" + y1\n        + \"L\" + x1 + \",\" + (y1+ (d.target.y1 - d.target.y0))\n        + \"C\" + xi(.8) + \",\" + (y1+ (d.target.y1 - d.target.y0))\n        + \" \" + xi(.7) + \",\" + (y0+ (d.source.y1 - d.source.y0))\n        + \" \" + xi(.5) + \",\" + (y0+ (d.source.y1 - d.source.y0))\n        + \"L\" + xi(.5) + \",\" + (y0+ (d.source.y1 - d.source.y0));\n    }\n    // if (facet) {\n    //   // facet calculations\n    //   let xMiddle = xi(.5);\n    //   x2 = xi(curvature*.5),\n    //   x3 = xi(1 - curvature*.5),\n    //   // console.log((y1-y0)*(parseInt(facet[\"other:\"+id].$)/d.source.value));\n    //   // console.log((y1+(y1-y0)*(parseInt(facet[\"other:\"+id].$)/d.source.value)));\n    //   path += \"C\" + x2 + \",\" + y0\n    //     + \" \" + xMiddle + \",\" + (y0+(d.source.y1-d.source.y0)*(parseInt(facet[\"other:\"+id].$)/d.source.value)) //(x2 + this.scaleHistory.bandwidth()/2)\n    //     + \" \" + x1 + \",\" + y1;\n    // } else {\n    else{\n      path += \"C\" + x2 + \",\" + y0\n        + \" \" + x3 + \",\" + y1\n        + \" \" + x1 + \",\" + y1\n        + \"L\" + x1 + \",\" + (y1+ (d.target.y1 - d.target.y0))\n        + \"C\" + x3 + \",\" + (y1+ (d.target.y1 - d.target.y0))\n        + \" \" + x2 + \",\" + (y0+ (d.source.y1 - d.source.y0))\n        + \" \" + x0 + \",\" + (y0+ (d.source.y1 - d.source.y0))\n        + \"L\" + x0 + \",\" + y0;\n    }\n    // }\n    return path\n        + \" \" + x0 + \",\" + (y0+ (d.source.y1 - d.source.y0))\n        + \"L\" + x0 + \",\" + y0;\n    // return \"M\" + x0 + \",\" + y0\n    //      + \"C\" + x2 + \",\" + y0\n    //      + \" \" + x3 + \",\" + y1\n    //      + \" \" + x1 + \",\" + y1\n    //      + \"L\" + x1 + \",\" + (y1+ (d.target.y1 - d.target.y0))\n    //      + \"C\" + x3 + \",\" + (y1+ (d.target.y1 - d.target.y0))\n    //      + \" \" + x2 + \",\" + (y0+ (d.source.y1 - d.source.y0))\n    //      + \" \" + x0 + \",\" + (y0+ (d.source.y1 - d.source.y0))\n    //      + \"L\" + x0 + \",\" + y0;\n  }\n\n  determineNodeHistory(historyId: any):any[] {\n    // let histories = Object.entries(this.provenanceOverlayModel.provenance.entity).filter((entity: any) => { if (entity[0].includes(\"history_entry:\")) return entity; });\n    let nodeHistory = [];\n    let parent = \"history_entry:\" + historyId;\n    while (parent) {\n      nodeHistory.splice(0, 0, { id: parseInt(parent.replace(\"history_entry:\", \"\")), value: this.provenanceOverlayModel.provenance.entity[parent] });\n      let wdfParent = Object.values(this.provenanceOverlayModel.provenance.wasDerivedFrom).find((wdf: any) => {\n        return wdf[\"prov:generatedEntity\"] == parent;\n      });\n      if (!wdfParent[\"prov:usedEntity\"])\n        parent = null;\n      parent = wdfParent[\"prov:usedEntity\"];\n      // nodeHistory.push(this.provenanceOverlayModel.provenance.entity[parent[\"prov:generatedEntity\"]]);\n    }\n    let depths:any[] = this.sankeyDiag().nodes.filter(node => {\n      let mapNode = this.nodeHistory.find((mapNode:any) => {\n        return mapNode.id === parseInt(node.key.replace(\"history_entry:\", \"\"));\n      });\n      if (mapNode) {\n        mapNode.depth = node.depth;\n        return true;\n      }\n        // return .includes(parseInt(node.key.replace(\"history_entry:\",\"\")));\n      })\n    return nodeHistory;\n  }\n\n  setSankeyScale() {\n    // create scales based on node depths\n    let maxDepth = 0;\n    this.sankeyDiag().nodes.forEach((node: any) => {\n      if (node.depth > maxDepth)\n        maxDepth = node.depth;\n    });\n    let depths:any[] = this.sankeyDiag().nodes.filter((node: any, i: number, nodesArray: any[]) => {\n      let mapNode = this.nodeHistory.find((mapNode:any) => {\n        return mapNode.id === parseInt(node.key.replace(\"history_entry:\", \"\")) || mapNode.id === parseInt(node.key.replace(\"facet:\", \"\"));\n      });\n      if (mapNode) {\n        mapNode.depth = node.depth;\n        return true;\n      }\n        // return .includes(parseInt(node.key.replace(\"history_entry:\",\"\")));\n      })\n      .map(node => node.depth).sort(this.numericSort);\n    if (depths[depths.length-1] < maxDepth)\n      depths.push(-1);\n    if(this.showDetail)\n      this.scaleHistory = d3.scaleBand().domain(depths).range([this.elementPadding, parseFloat(this.provGraph.nativeElement.scrollWidth)*((this.provWidth-this.detailWidth)/100) - this.elementPadding]).paddingInner(this.innerPadding);\n    else\n      this.scaleHistory = d3.scaleBand().domain(depths).range([this.elementPadding, parseFloat(this.provGraph.nativeElement.scrollWidth)*.8 - this.elementPadding]).paddingInner(this.innerPadding);\n\n    let depthsFuture = [];\n    depthsFuture.push(-1);\n    this.sankeyDiag().nodes.forEach(node => {\n      if (!depths.includes(node.depth) && !depthsFuture.includes(node.depth))\n        depthsFuture.push(node.depth);\n    });\n    depthsFuture.sort(this.numericSort);\n    \n    let futureWidth\n    if (this.showDetail && depthsFuture.length < depths.length-1)\n      futureWidth = this.scaleHistory(depths[depths.length-2]) + this.scaleHistory.step()*(depthsFuture.length-1);//this.provGraph.nativeElement.scrollWidth - (this.scaleHistory(depths[depths.length-2]) + this.scaleHistory(depths[depths.length-(depthsFuture.length)]) - this.scaleHistory(depths[depths.length-(depthsFuture.length+1)]) - this.elementPadding);\n    else\n      futureWidth = this.provGraph.nativeElement.scrollWidth;\n    this.scaleFuture = d3.scaleBand().domain(depthsFuture).range([this.scaleHistory(depths[depths.length-2]) + this.scaleHistory.bandwidth(), futureWidth]).paddingInner(this.innerPadding);\n    // let nodes = d3.select(\"svg.provGraph\").selectAll(\"g.nodes\").selectAll(\"g.history_nodes\");\n\n    if(depths[depths.length-1] === -1) {\n      this.qualityViewWidth = this.scaleHistory(depths[depths.length-2]) + this.scaleHistory.bandwidth();\n      this.detailViewWidth = parseFloat(this.provGraph.nativeElement.scrollWidth) - this.scaleHistory(depths[depths.length-2]) - 2*this.scaleHistory.bandwidth();\n    } else {\n      this.qualityViewWidth = this.scaleHistory(depths[depths.length-1]) + this.scaleHistory.bandwidth();\n      this.detailViewWidth = parseFloat(this.provGraph.nativeElement.scrollWidth)*(this.detailWidth/100) - this.scaleHistory.bandwidth();\n    }\n    // we don't want the detail view to be to wide\n    // if (this.detailViewWidth > this.provGraph.nativeElement.scrollWidth * 0.35) {\n    //   this.detailViewWidth = this.provGraph.nativeElement.scrollWidth * 0.35;\n    // }\n\n    if (this.sankeyNodes) {\n      this.sankeyNodes.selectAll(\"rect\")\n        .attr(\"x\", (d:any) => {\n          if(this.scaleHistory(d.depth))\n            return this.scaleHistory(d.depth);\n          else\n            return this.scaleFuture(d.depth);\n        })\n        .attr(\"width\", (d:any) => {\n          if(this.scaleHistory(d.depth)) {\n            if (d.activity)\n              return this.scaleHistory.bandwidth()/2;\n            return this.scaleHistory.bandwidth();\n          }\n          return this.scaleFuture.bandwidth();\n        })\n        .transition(this.transition);\n\n      this.sankeyNodes.selectAll(\"foreignObject\")\n        .attr(\"x\", (d:any) => {\n          if(this.scaleHistory(d.depth))\n            return this.scaleHistory(d.depth);\n          else\n            return this.scaleFuture(d.depth);\n        })\n        .style('padding-left', (d:any) => {\n          let w;\n          if (this.scaleHistory(d.depth))\n            w = this.scaleHistory.bandwidth();\n          else\n            w = this.scaleFuture.bandwidth();\n          \n          if (w > this.iconWidth)\n            return (w - this.iconWidth)/2 + 'px';\n\n          return '0px';\n        })\n\n    }\n    if (this.sankeyLinks) {\n      this.sankeyLinks.selectAll(\"path\")\n        .attr(\"d\", (d:any) => this.linkSkewed(d))\n        // .attr(\"class\", (d:any) => { \n        //   return \"activity\" + d.activity.replace(\"change:\",\"\");\n        // })\n        .attr(\"stroke\", (d:any) => {\n          if(this.nodeHistory.map(node => node.id).includes(parseInt(d.target.key.replace(\"history_entry:\",\"\"))) ||\n            (this.shiftNodeHistory && this.shiftNodeHistory.map(node => node.id).includes(parseInt(d.target.key.replace(\"history_entry:\",\"\")))))\n            return \"gray\";\n          else\n            return null;\n        })\n        .transition(this.transition);\n\n      this.sankeyLinks.selectAll(\"foreignObject.change\")\n        .attr('x', (d:any) => {\n          if(this.scaleHistory(d.source.depth) && this.scaleHistory(d.target.depth))\n            return d3.interpolate(this.scaleHistory(d.source.depth)+this.scaleHistory.bandwidth(), this.scaleHistory(d.target.depth))(.85) - this.nodeWidth/4;\n          else if (this.scaleHistory(d.source.depth) && this.scaleFuture(d.target.depth))\n            return d3.interpolate(this.scaleHistory(d.source.depth)+this.scaleHistory.bandwidth(), this.scaleFuture(d.target.depth))(.85) - this.nodeWidth/4;\n          else if (this.scaleFuture(d.source.depth))\n            return d3.interpolate(this.scaleFuture(d.source.depth)+this.scaleFuture.bandwidth(), this.scaleFuture(d.target.depth))(.85) - this.nodeWidth/4;\n        });\n\n      this.sankeyLinks.selectAll(\"foreignObject.facet\")\n        .attr('x', (d:any) => {\n            if(this.scaleHistory(d.source.depth) && this.scaleHistory(d.target.depth))\n              return d3.interpolate(this.scaleHistory(d.source.depth)+this.scaleHistory.bandwidth(), this.scaleHistory(d.target.depth))(.5) - this.nodeWidth/4;\n            else if (this.scaleHistory(d.source.depth) && this.scaleFuture(d.target.depth))\n              return d3.interpolate(this.scaleHistory(d.source.depth)+this.scaleHistory.bandwidth(), this.scaleFuture(d.target.depth))(.5) - this.nodeWidth/4;\n            else if (this.scaleFuture(d.source.depth))\n              return d3.interpolate(this.scaleFuture(d.source.depth)+this.scaleFuture.bandwidth(), this.scaleFuture(d.target.depth))(.5) - this.nodeWidth/4;\n          })\n    }\n  }\n\n  clearProvGraphHighlights() {\n    // d3.select(\"svg.provGraph\").selectAll(\"nodes\").classed(\"selected\", false).classed(\"shiftSelected\", false);\n      // .classed(\"selected\", false)\n      // .classed(\"shiftSelected\", false);\n    d3.selectAll(\"svg.provGraph g.nodes g.history_nodes rect\")\n      .classed(\"selected\", false)\n      .classed(\"shiftSelected\", false)\n      .classed(\"selectedNode\", false)\n      .classed(\"shiftSelectedNode\", false)\n      .classed(\"selectedPath\", false)\n      .classed(\"shiftSelectedPath\", false);\n      // .classed(\"selected\", false)\n      // .classed(\"shiftSelected\", false);\n  }\n\n  highlightProvGraph(hist: any[], classString: string):void {\n    for (let node of hist) {\n      let idString = node.id;\n      d3.select(\"svg.provGraph g.nodes\").select(\"rect#history_entry\" + idString)\n        .classed(classString, true);\n        // .attr('stroke', 'gray')\n        // .attr('stroke-width', '2px');\n\n      // let path = d3.selectAll(\"path.activity\" + idString)\n      // if(!path.empty())// && !path.classed(\"selected\"))\n      //   path.classed(classString, true);\n        // .attr(\"fill\", \"#a2b9bc\")\n        // .attr('stroke', 'gray')\n        // .attr(\"fill-opacity\", 0.85)\n        // .attr('stroke-width', '2px');\n    }\n    d3.select(\"svg.provGraph g.nodes\").select(\"rect#history_entry\" + this.histId)\n      .classed(\"selectedNode\", true);\n  }\n\n  private onContextMenu($event: MouseEvent, item: any, metric: any): void {\n    let metricContext = item.metrics[metric];\n    if (metricContext) {\n      this.contextMenuService.show.next({\n        // Optional - if unspecified, all context menu components will open\n        contextMenu: this.metricMenu,\n        event: $event,\n        item: metricContext\n      });\n    } else {\n      this.contextMenuService.show.next({\n        contextMenu: this.issueMenu,\n        event: $event,\n        item: metric\n      })\n    }\n    $event.preventDefault();\n    $event.stopPropagation();\n    // this.contextMenuService.show.next({\n    //   actions: this.menuOptions,\n    //   event: $event,\n    //   item: item\n    // });\n  }\n  \n  @ViewChild('provGraph', {static: false}) set content(content: ElementRef) {\n    this.provGraph = content;\n    console.log(\"set graph\");\n    if(this.provGraph && this.provenanceOverlayModel) {\n      this.setSankeyScale();\n    }\n  }\n\n  toggleShowDetail() {\n    this.showDetail = !this.showDetail;\n    // if (this.showDetail)\n    //   this.provWidth = this.pageWidth - this.detailWidth;\n    // else \n    //   this.provWidth = this.pageWidth;\n    // this.nodeHistory = this.determineNodeHistory(this.histId);\n    this.setSankeyScale();\n  }\n\n  private numericSort(a: number, b: number): number {\n      if (a > b)\n        return 1;\n      if (a < b)\n        return -1;\n      return 0;\n  }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n  name: 'provenanceProjectList'\n})\nexport class ProvenanceProjectListPipe implements PipeTransform {\n\n  transform(value: any, args?: any): any {\n    let keys = [];\n    for (let key in value) {\n      if (value[key].customMetadata[\"hasProvenance\"] && value[key].customMetadata[\"hasProvenance\"] === true) {\n        keys.push({key: key, value: value[key]});\n      }\n    }\n    return keys;\n  }\n}\n\n@Pipe({\n  name: 'nonProvenanceProjectList'\n})\nexport class NonProvenanceProjectListPipe implements PipeTransform {\n\n  transform(value: any, args?: any): any {\n    let keys = [];\n    for (let key in value) {\n      if (!value[key].customMetadata[\"hasProvenance\"] || value[key].customMetadata[\"hasProvenance\"] === false) {\n        keys.push({key: key, value: value[key]});\n      }\n    }\n    return keys;\n  }\n\n}\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3JlZmluZS1wcm92ZW5hbmNlL3JlZmluZS1wcm92ZW5hbmNlLmNvbXBvbmVudC5zYXNzIn0= */\"","import { Component, OnInit } from '@angular/core';\nimport { OpenRefineService } from '../shared/open-refine/open-refine.service';\n\n@Component({\n  selector: 'app-provenance',\n  templateUrl: './refine-provenance.component.html',\n  styleUrls: ['./refine-provenance.component.sass'],\n  providers: [ OpenRefineService ]\n})\nexport class RefineProvenanceComponent implements OnInit {\n\n  refineProjects:any;\n  errorMessage:String;\n\n  constructor(protected openRefineService: OpenRefineService) { \n\n    this.openRefineService.getAllProjectMetadata().subscribe(\n      refineProjects => {\n          this.refineProjects = refineProjects.projects;\n          // console.log(this.refineProjects.projects);\n      },\n      error => this.errorMessage = <any>error\n    );\n  }\n\n  ngOnInit() {\n  }\n\n}\n","module.exports = \".d3-chart {\\n  width: 100%;\\n  height: 400px;\\n}\\n \\n.d3-chart .axis path,\\n.d3-chart .axis line {\\n  stroke: #999;\\n}\\n \\n.d3-chart .axis text {\\n  fill: #999;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvc2hhcmVkL2JhcmNoYXJ0L2JhcmNoYXJ0LmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxXQUFXO0VBQ1gsYUFBYTtBQUNmOztBQUVBOztFQUVFLFlBQVk7QUFDZDs7QUFFQTtFQUNFLFVBQVU7QUFDWiIsImZpbGUiOiJzcmMvYXBwL3NoYXJlZC9iYXJjaGFydC9iYXJjaGFydC5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmQzLWNoYXJ0IHtcbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogNDAwcHg7XG59XG4gXG4uZDMtY2hhcnQgLmF4aXMgcGF0aCxcbi5kMy1jaGFydCAuYXhpcyBsaW5lIHtcbiAgc3Ryb2tlOiAjOTk5O1xufVxuIFxuLmQzLWNoYXJ0IC5heGlzIHRleHQge1xuICBmaWxsOiAjOTk5O1xufSJdfQ== */\"","import { Component, OnInit, OnChanges, ViewChild, ElementRef, Input, ViewEncapsulation } from '@angular/core';\nimport * as d3 from 'd3';\n\n@Component({\n  selector: 'app-barchart',\n  templateUrl: './barchart.component.html',\n  styleUrls: ['./barchart.component.css']\n})\n\nexport class BarchartComponent implements OnInit, OnChanges {\n  @ViewChild('chart', {static: false}) private chartContainer: ElementRef;\n  @Input() private data: Array<any>;\n  private margin: any = { top: 20, bottom: 20, left: 20, right: 20};\n  private chart: any;\n  private width: number;\n  private height: number;\n  private xScale: any;\n  private yScale: any;\n  private colors: any;\n  private xAxis: any;\n  private yAxis: any;\n\n  constructor() { }\n\n  ngOnInit() {\n  \tthis.createChart();\n    if (this.data) {\n      this.updateChart();\n    }\n  }\n\n  ngOnChanges() {\n    if (this.chart) {\n      this.updateChart();\n    }\n  }\n\n  createChart() {\n    let element = this.chartContainer.nativeElement;\n    this.width = element.offsetWidth - this.margin.left - this.margin.right;\n    this.height = element.offsetHeight - this.margin.top - this.margin.bottom;\n    let svg = d3.select(element).append('svg')\n      .attr('width', element.offsetWidth)\n      .attr('height', element.offsetHeight);\n\n    // chart plot area\n    this.chart = svg.append('g')\n      .attr('class', 'bars')\n      .attr('transform', `translate(${this.margin.left}, ${this.margin.top})`);\n\n    // define X & Y domains\n    let xDomain = this.data.map(d => d[0]);\n    let yDomain = [0, d3.max(this.data, d => d[1])];\n\n    // create scales\n    this.xScale = d3.scaleBand().padding(0.1).domain(xDomain).rangeRound([0, this.width]);\n    this.yScale = d3.scaleLinear().domain(yDomain).range([this.height, 0]);\n\n    // bar colors\n    this.colors = d3.scaleLinear().domain([0, this.data.length]).range(<any[]>['red', 'blue']);\n\n    // x & y axis\n    this.xAxis = svg.append('g')\n      .attr('class', 'axis axis-x')\n      .attr('transform', `translate(${this.margin.left}, ${this.margin.top + this.height})`)\n      .call(d3.axisBottom(this.xScale));\n    this.yAxis = svg.append('g')\n      .attr('class', 'axis axis-y')\n      .attr('transform', `translate(${this.margin.left}, ${this.margin.top})`)\n      .call(d3.axisLeft(this.yScale));\n  }\n\n  updateChart() {\n    // update scales & axis\n    this.xScale.domain(this.data.map(d => d[0]));\n    this.yScale.domain([0, d3.max(this.data, d => d[1])]);\n    this.colors.domain([0, this.data.length]);\n    this.xAxis.transition().call(d3.axisBottom(this.xScale));\n    this.yAxis.transition().call(d3.axisLeft(this.yScale));\n\n    let update = this.chart.selectAll('.bar')\n      .data(this.data);\n\n    // remove exiting bars\n    update.exit().remove();\n\n    // update existing bars\n    this.chart.selectAll('.bar').transition()\n      .attr('x', d => this.xScale(d[0]))\n      .attr('y', d => this.yScale(d[1]))\n      .attr('width', d => this.xScale.bandwidth())\n      .attr('height', d => this.height - this.yScale(d[1]))\n      .style('fill', (d, i) => this.colors(i));\n\n    // add new bars\n    update\n      .enter()\n      .append('rect')\n      .attr('class', 'bar')\n      .attr('x', d => this.xScale(d[0]))\n      .attr('y', d => this.yScale(0))\n      .attr('width', this.xScale.bandwidth())\n      .attr('height', 0)\n      .style('fill', (d, i) => this.colors(i))\n      .transition()\n      .delay((d, i) => i * 10)\n      .attr('y', d => this.yScale(d[1]))\n      .attr('height', d => this.height - this.yScale(d[1]));\n  }\n}\n","import { Directive } from '@angular/core';\nimport { NG_VALIDATORS } from '@angular/forms';\n\n@Directive({\n  selector: '[appCheckInputDirective]',\n  providers: [{provide: NG_VALIDATORS, useExisting: CheckInputDirectiveDirective, multi: true}]\n})\nexport class CheckInputDirectiveDirective {\n\n  constructor() { }\n\n  \n}\n","module.exports = \"ngb-accordion.metric-info-panel {\\n  width: 35%; }\\n\\nngb-accordion.checks-panel {\\n  width: 65%; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9jaHJpc3RpYW5ib3JzL1Byb2plY3RzL21ldHJpY2RvY19hbmd1bGFyL3NyYy9hcHAvc2hhcmVkL21ldHJpYy1jaGVja3Mtb3ZlcnZpZXcvbWV0cmljLWNoZWNrcy1vdmVydmlldy5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLFVBQVUsRUFBQTs7QUFHWjtFQUNFLFVBQVUsRUFBQSIsImZpbGUiOiJzcmMvYXBwL3NoYXJlZC9tZXRyaWMtY2hlY2tzLW92ZXJ2aWV3L21ldHJpYy1jaGVja3Mtb3ZlcnZpZXcuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJuZ2ItYWNjb3JkaW9uLm1ldHJpYy1pbmZvLXBhbmVsIHtcbiAgd2lkdGg6IDM1JTtcbn1cblxubmdiLWFjY29yZGlvbi5jaGVja3MtcGFuZWwge1xuICB3aWR0aDogNjUlO1xufSJdfQ== */\"","import { Component, OnInit, Input, Output, EventEmitter } from '@angular/core';\nimport { FormBuilder, FormGroup } from '@angular/forms';\n\nimport { MetricsOverlayModel } from '../open-refine/model/metrics-overlay-model';\nimport { OpenRefineService } from '../open-refine/open-refine.service';\nimport { OpenRefineProject }  from '../open-refine/model/open-refine-project';\n\nimport { NgbModule, NgbPanelChangeEvent } from '@ng-bootstrap/ng-bootstrap';\n\n@Component({\n  selector: 'metric-accordion',\n  templateUrl: './metric-checks-overview.component.html',\n  styleUrls: ['./metric-checks-overview.component.scss'],\n  providers: [ OpenRefineService ]\n})\nexport class MetricChecksOverviewComponent implements OnInit {\n\n  @Input() metricSelection;\n  @Input() columnSelection;\n  @Input() selectedEvaluable;\n  @Input() project: OpenRefineProject;\n  @Input() projectId: string;\n\n  @Output() onSelectionUpdated = new EventEmitter();\n\n\n  selectionInvalid: boolean;\n  checkFeedback: string;\n  alertType: string;\n\n  constructor(protected openRefineService: OpenRefineService) { }\n\n  public status: any = {\n    isFirstOpen: false,\n    isFirstDisabled: false\n  };\n\n  ngOnInit() {\n  }\n\n  public beforeChange($event: NgbPanelChangeEvent) {\n\n  };\n\n  onSelectionChange(entry) {\n    this.metricSelection[0].datatype = entry;\n    this.selectionInvalid = false;\n    this.checkFeedback = null;\n  }\n\n  clickConcat(event, concat) {\n    this.metricSelection[0].concat = concat;\n    event.stopPropagation();\n  }\n\n  addCheck() {\n    this.metricSelection[0].evalTuples.push({column: \"\", \n      comment:\"\",\n      disabled:false,\n      evaluable:\"\"\n    });\n  }\n\n  removeEvaluableSelection() {\n    let idx: number = this.metricSelection[0].evalTuples.indexOf(this.selectedEvaluable, 0);\n    if (idx > -1) {\n      this.metricSelection[0].evalTuples.splice(idx, 1);\n    } else {\n      if (this.metricSelection[0].spanningEvaluable === this.selectedEvaluable) {\n        this.metricSelection[0].spanningEvaluable = null;\n      }\n    }\n  }\n\n  disableEvaluableSelection() {\n    this.selectedEvaluable.disabled = !this.selectedEvaluable.disabled;\n  }\n\n  onSelectEvaluable(evaluable) {\n    this.selectedEvaluable = evaluable;\n  }\n\n  checkValidity(event) {\n    if(event.key === \"Enter\") {\n      //TODO: save evaluable to metric\n      this.metricSelection[0].dirtyIndices = [];\n      this.openRefineService.updateMetric(this.projectId, this.metricSelection[0], this.columnSelection[0])\n        .subscribe(response => {\n          // console.log(\"success\");\n          this.metricSelection[0] = response;\n          this.openRefineService.evaluateSelection(this.projectId, this.metricSelection, this.columnSelection)\n            .subscribe(response => {\n              this.metricSelection = response.metricList;\n              this.onSelectionUpdated.emit({metrics: this.metricSelection, columns: this.columnSelection});\n            });\n        });\n    }\n    let col = this.project.columnModel.columns.find((value, idx, col) => {\n      let colName = this.columnSelection[0];\n      if (typeof colName != \"string\" && this.columnSelection[0].length > 1) {\n        colName = this.columnSelection[0][0];\n      }\n      return value.name == colName;\n    });\n    this.openRefineService.previewExpression(this.projectId, this.selectedEvaluable.evaluable, col.cellIndex)\n      .subscribe(response => {\n        this.checkFeedback = response.message;\n\n        if(response.code === \"error\") {\n          this.selectionInvalid = true;\n          this.alertType = \"danger\";\n        } else {\n          this.selectionInvalid = false;\n          this.alertType = \"info\";\n        }\n      });\n  }\n\n}\n","module.exports = \"svg.heatmap {\\n  width: 100%;\\n  height: 540px; }\\n  svg.heatmap rect {\\n    width: 100%;\\n    height: 400px; }\\n  rect.pos-overlay {\\n  fill: lightgrey;\\n  opacity: 30%;\\n  pointer-events: none; }\\n  svg.legend {\\n  margin-right: 8px;\\n  height: 12px;\\n  width: 16px; }\\n  svg.legend rect {\\n    height: 12px;\\n    width: 12px; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9jaHJpc3RpYW5ib3JzL1Byb2plY3RzL21ldHJpY2RvY19hbmd1bGFyL3NyYy9hcHAvc2hhcmVkL21ldHJpYy1kZXRhaWwtdmlzdWFsaXphdGlvbi9tZXRyaWMtZGV0YWlsLXZpc3VhbGl6YXRpb24uY29tcG9uZW50LnNjc3MiLCIvVXNlcnMvY2hyaXN0aWFuYm9ycy9Qcm9qZWN0cy9tZXRyaWNkb2NfYW5ndWxhci9zcmMvYXBwL3NoYXJlZC9fZ2xvYmFscy5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBO0VBQ0UsV0FBVztFQUNYLGFBQWtDLEVBQUE7RUFGcEM7SUFLSSxXQUFXO0lBQ1gsYUNSbUIsRUFBQTtFRFl2QjtFQUNFLGVBQWU7RUFDZixZQUFZO0VBQ1osb0JBQW9CLEVBQUE7RUFHdEI7RUFDRSxpQkFBaUI7RUFDakIsWUFBWTtFQUNaLFdBQVcsRUFBQTtFQUhiO0lBTUksWUFBWTtJQUNaLFdBQVcsRUFBQSIsImZpbGUiOiJzcmMvYXBwL3NoYXJlZC9tZXRyaWMtZGV0YWlsLXZpc3VhbGl6YXRpb24vbWV0cmljLWRldGFpbC12aXN1YWxpemF0aW9uLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiQGltcG9ydCBcIi4uL2dsb2JhbHNcIjtcblxuc3ZnLmhlYXRtYXAge1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiAkcmF3LWRhdGEtaGVpZ2h0ICsgNTAgKyA5MDtcblxuICByZWN0IHtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBoZWlnaHQ6ICRyYXctZGF0YS1oZWlnaHQ7XG4gIH1cbn1cblxucmVjdC5wb3Mtb3ZlcmxheSB7XG4gIGZpbGw6IGxpZ2h0Z3JleTtcbiAgb3BhY2l0eTogMzAlO1xuICBwb2ludGVyLWV2ZW50czogbm9uZTtcbn1cblxuc3ZnLmxlZ2VuZCB7XG4gIG1hcmdpbi1yaWdodDogOHB4O1xuICBoZWlnaHQ6IDEycHg7XG4gIHdpZHRoOiAxNnB4O1xuXG4gIHJlY3Qge1xuICAgIGhlaWdodDogMTJweDtcbiAgICB3aWR0aDogMTJweDtcbiAgfVxufSIsIiRyYXctZGF0YS1oZWlnaHQ6IDQwMHB4OyJdfQ== */\"","import { Component, OnInit, Input, Output, EventEmitter, ElementRef, OnChanges, SimpleChanges, ViewChild } from '@angular/core';\nimport { EvalTuple } from '../open-refine/model/eval-tuple';\n\nimport * as d3 from 'd3';\nimport * as d3tip from 'd3-tip';\n\n@Component({\n  selector: 'metric-detail-view',\n  templateUrl: './metric-detail-visualization.component.html',\n  styleUrls: ['./metric-detail-visualization.component.scss']\n})\nexport class MetricDetailVisualizationComponent implements OnInit, OnChanges {\n\n  @Input() viewOffsetTop;\n  @Input() metricsOverlayModel;\n  @Input() rowModel;\n  @Input() metricSelection;\n  @Input() selectedColumns;\n  @Input() columnMetricColors;\n  @Input() spanMetricColors;\n  @Input() rowsFrom;\n  @Input() rowsTo;\n\n  @ViewChild('visParent', {static: true}) svg;\n\n  @Output() onDataRowsSelected = new EventEmitter();\n\n  private detailViewHeight: number;\n  private detailViewWidth: number;\n  private visOffset: number = 50;\n  private axisOffset: number = 90;\n  private columnOffset: number = 40;\n  private axisWidths: number[];\n  private evalTupleColors: any[];\n\n  private dirtyArray: any[];\n  private htmlElement: HTMLElement;\n  private maxErrorCount: number[];\n  private detailViewY: any;\n  private x: any;\n  private xAxis: any;\n  private yScale: any;\n  private activeEvalTuples: EvalTuple[];\n  \n  constructor(private element: ElementRef) {\n    this.htmlElement = this.element.nativeElement;\n  }\n\n  ngOnInit() {\n    let boundingRect = this.svg.nativeElement.getBoundingClientRect();\n    this.detailViewHeight = boundingRect.height;\n    this.detailViewWidth = boundingRect.width - this.columnOffset;\n    d3.select(this.svg.nativeElement).select('rect')\n      .attr('x', 0)\n      .attr('y', 0)\n      .attr('class', 'rect-disabled')\n      .attr('fill', 'transparent');\n    this.drawDetailView();\n    var div = d3.select(\"body\").append(\"div\")\n      .attr(\"class\", \"d3tooltip\")\n      .style(\"opacity\", 0);\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    let boundingRect = this.svg.nativeElement.getBoundingClientRect();\n    this.detailViewHeight = boundingRect.height;\n    this.detailViewWidth = boundingRect.width - this.columnOffset;\n    d3.select(this.svg.nativeElement).select('rect')\n      .attr('x', 0)\n      .attr('y', this.visOffset)\n      // .attr('class', 'rect-disabled')\n      .attr('fill', 'transparent');\n\n    if ('metricsOverlayModel' in changes) {\n      this.redrawDetailView();\n    } else if ('rowModel' in changes || 'metricSelection' in changes) {\n      this.updateDirtyArray();\n      this.drawDetailView();\n    }\n    if ('viewOffsetTop' in changes && this.rowModel) {\n      this.detailViewY = d3.scaleLinear()\n          .domain([this.rowModel.filtered, 0])\n          .rangeRound([this.detailViewHeight-this.axisOffset, this.visOffset]);\n    }\n\n    if ('rowsFrom' in changes && this.x) {\n      d3.select('rect.pos-overlay')\n        .attr('y', (d, i) => {\n          let y = this.detailViewY(this.rowsFrom);\n          return this.detailViewY(this.rowsFrom);\n        });\n    }\n  }\n\n  private redrawDetailView() {\n    this.updateDirtyArray();\n  }\n\n  private updateDirtyArray() {\n    this.maxErrorCount = [];\n    this.dirtyArray = [];\n    if (this.rowModel && this.metricSelection) {\n\n      this.activeEvalTuples = [];\n      this.evalTupleColors = [];\n      for (let m of this.metricSelection) {\n        if (m.spanningEvaluable && !m.spanningEvaluable.disabled) {\n          this.evalTupleColors.push(this.getColor(m));\n          this.activeEvalTuples.push(m.spanningEvaluable);\n        }\n        for (let et of m.evalTuples) {\n          this.evalTupleColors.push(this.getColor(m));\n          if(!et.disabled) this.activeEvalTuples.push(et);\n        }\n      }\n      let ordinalScale = [];\n      for (let i = 0; i <= this.activeEvalTuples.length; ++i) ordinalScale.push(i);\n      let tupleAxis = [];\n      for (let tuple of this.activeEvalTuples) tupleAxis.push(tuple.evaluable);\n\n      let detailWidths = [];\n\n      for (let i in this.activeEvalTuples) {\n        detailWidths.push(this.detailViewWidth/this.activeEvalTuples.length);\n      }\n      this.axisWidths = [40];\n      for (let i = 1; i <= this.activeEvalTuples.length; ++i) {\n        this.axisWidths.push(detailWidths[i-1] + this.axisWidths[i-1]);\n      }\n\n      this.detailViewY = d3.scaleLinear()\n        .domain([this.rowModel.filtered, 0])\n        .rangeRound([this.detailViewHeight-this.axisOffset, this.visOffset]);\n      \n      this.x = d3.scaleOrdinal()\n        .domain(ordinalScale)\n        .range(this.axisWidths);\n\n      this.xAxis = d3.scaleOrdinal()\n        .domain(tupleAxis)\n        .range(this.axisWidths);\n\n      for (let dirtyIdx = 0; dirtyIdx < this.rowModel.filtered; dirtyIdx++) {\n        let dirtyEntry = { index: dirtyIdx, dirty: [] };\n        for(let metricIdx = 0; metricIdx < this.metricSelection.length; metricIdx++) {\n          let dirtyEvals = []\n          if(this.metricSelection[metricIdx] && this.metricSelection[metricIdx].dirtyIndices) {\n            let dirtyRow = this.metricSelection[metricIdx].dirtyIndices.filter(function(d) {\n              return d.index == dirtyIdx;\n            })[0];\n            if (dirtyRow) {\n              dirtyEntry.dirty = dirtyEntry.dirty.concat(dirtyRow.dirty);\n            } else {\n              let cleanEval: boolean[] = [];\n              if(this.metricSelection[metricIdx].spanningEvaluable) \n                dirtyEntry.dirty.push(true);\n              for(let bool in this.metricSelection[metricIdx].evalTuples) dirtyEntry.dirty.push(true);\n            }\n          }\n        }\n        if (dirtyEntry.dirty.length > 0 && dirtyEntry.dirty.indexOf(false) != -1) {\n          let viewY = this.detailViewY(dirtyIdx);\n          if(this.dirtyArray[viewY] == null) {\n            this.dirtyArray[viewY] = {};\n            this.dirtyArray[viewY].dirty = [];\n            this.dirtyArray[viewY].index = [];\n          }\n          this.dirtyArray[viewY].index.push(dirtyEntry.index);\n          for(let i = 0; i < dirtyEntry.dirty.length; ++i) {\n            if(!this.maxErrorCount[i]) this.maxErrorCount[i] = 0;\n            if(this.dirtyArray[viewY].dirty[i] == null) {\n              this.dirtyArray[viewY].dirty[i] = [];\n            }\n            this.dirtyArray[viewY].dirty[i].push(dirtyEntry.dirty[i]);\n            if(this.dirtyArray[viewY].dirty[i].length >= this.maxErrorCount[i]) {\n              let errorCount = this.dirtyArray[viewY].dirty[i].reduce((total, x) => { return !x ? total + 1 : total }, 0);\n              if (errorCount > this.maxErrorCount[i])\n                this.maxErrorCount[i] = errorCount;\n            }\n          }\n        }\n      }\n    }\n  }\n\n  private drawDetailView() {\n    let container = d3.select(this.svg.nativeElement);\n    container.selectAll('g.metric-detail-row')\n      .remove();\n    container.select('g.x.axis').remove();\n    container.select('g.y.axis').remove();\n    if (this.dirtyArray.length > 0) {\n      let rows = container.selectAll('g.metric-detail-row')\n        .data(this.dirtyArray)\n        .enter().append('g')\n        .attr('class', 'metric-detail-row')\n        .attr('transform', (d, i) => {\n          if(d) return 'translate(0,' + i + ')';\n        })\n        .style('fill', 'white')\n        .on('click', (d, i, el) => {\n          this.onDataRowsSelected.emit(d.index);\n        })\n        .on('mouseover', (d, i, el) => {\n          let rec = d3.select(el[i]).append('rect')\n          .attr('class', 'mouseover')\n          .style('fill', 'steelblue')\n          .style('width', (d, i, el) => {\n            let parent:any = (<any>el[i]).parentElement;\n            let parentSelection:any = d3.select(parent).node();\n            let bb = parentSelection.getBoundingClientRect();\n            return bb.width;\n          })\n          .attr('x', this.x(0))\n          .style('height', '1');\n\n          let htmlText;\n          if (d.index.length > 1) {\n            htmlText = '<span style=\"color:steelblue\">Rows: </span><span>'+ (d.index[0] + 1) + ' - ' + (d.index[d.index.length-1] + 1) + ' </span>' ;\n          } else {\n            htmlText = '<span style=\"color:steelblue\">Row: </span><span>'+ (d.index[0] + 1) + ' </span>' ;\n          }\n\n          let tooltipNode:any = d3.select(\"body\").select(\"div.d3tooltip\").node();\n          d3.select(\"body\").select(\"div.d3tooltip\").html(htmlText)//\"<span><b>Filter \" + facet[\"other:\" + id].$ + \" rows</b></span><br><span>\" + text.join(\"<br>\") + \"</span>\")\n            .style(\"left\", (d3.event.pageX - tooltipNode.scrollWidth) + \"px\")\n            .style(\"top\", (d3.event.pageY) + \"px\")\n            .style(\"opacity\", .9);\n        })\n        .on(\"mousemove\", (data:any) => {\n          let tooltipNode:any = d3.select(\"body\").select(\"div.d3tooltip\").node();\n          d3.select(\"body\").select(\"div.d3tooltip\")\n            .style(\"left\", (d3.event.pageX - tooltipNode.scrollWidth) + \"px\")\n            .style(\"top\", (d3.event.pageY) + \"px\");\n        })\n        .on('mouseleave', (d:any, i:any, el:any) => {\n          d3.select(\"body\").select(\"div.d3tooltip\")\n            .style(\"opacity\", 0);\n          // this.tooltip.hide();\n          d3.select(el[i]).selectAll('rect.mouseover').remove();\n        });\n      let bins = rows.selectAll('.bin')\n        .data((d) => {\n          if(d != null) {\n            return d.dirty;\n          } else {\n            return [];\n          }\n        })\n        .enter( ).append('rect')\n        .attr('class', 'bin')\n        .attr('x', (d, i) => {\n          return this.x(i);\n        }).attr('width', (d, i) => {\n          return this.x(i + 1) - this.x(i);\n        }).style('fill', (d:any[], i) => {\n          if (d.indexOf(false) == -1) {\n            return 'white';\n          } else {\n            return this.evalTupleColors[i];\n          }\n        }).style('opacity', (d:any[], i) => {\n          var count = d.reduce(function(n, val) {\n            return n + (val === false);\n          }, 0);\n          return count/this.maxErrorCount[i];\n        })\n        .attr('height', 1);\n\n      container.append('g')\n        .attr('class', 'x axis')\n        .attr('transform', 'translate(0,' + (this.detailViewHeight-this.axisOffset) + ')')\n        .attr('x', this.detailViewHeight-this.axisOffset)\n        .attr('y', 0)\n      .call(d3.axisBottom(this.x))\n        .style('font-size', 12)\n        .style('text-anchor', 'start')\n        .selectAll('.tick text')\n        .each((d, i, g) => {\n          if(this.activeEvalTuples[(<any>d)]) {\n            d3.select(g[i]).text(this.activeEvalTuples[(<any>d)].evaluable);\n          } else {\n            d3.select(g[i]).text('');\n          }\n        })\n        .attr('x', -8)\n        .attr('y', (d, i, g) => {\n          return 6 + 12*(i%2);\n        });\n      container.append('g')\n        .attr('class', 'y axis')\n        .attr('transform', 'translate('+ this.columnOffset + ',' + 0 + ')')\n        .call(d3.axisLeft(this.detailViewY));\n\n      // position overlay\n      container.selectAll('rect.pos-overlay').remove();\n      container.insert('rect', 'g')\n        .attr('class', 'pos-overlay')\n        .attr('x', this.x(0))\n        .attr('y', this.detailViewY(this.rowsFrom))\n        .attr('height', (d, i) => {\n          let h = this.detailViewY(this.rowsTo - this.rowsFrom);\n          return h - this.visOffset;\n        })\n        .attr('width', (d, i) => {\n          return this.x(this.metricSelection.length) - this.x(0);\n        })\n        .attr('fill', 'lightgrey')\n        .attr('opacity', 0.7);\n    }\n  }\n\n  private getColor(metric: any): string {\n    if (metric.spanningColumns) {\n      if (this.spanMetricColors[metric.name])\n        return this.spanMetricColors[metric.name];\n    } else {\n      if (this.columnMetricColors[metric.name])\n        return this.columnMetricColors[metric.name];\n    }\n    return \"#ce6dbd\";\n  }\n}\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3NoYXJlZC9tZXRyaWMtb3ZlcnZpZXcvbWV0cmljLW92ZXJ2aWV3LmNvbXBvbmVudC5jc3MifQ== */\"","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-metric-overview',\n  templateUrl: './metric-overview.component.html',\n  styleUrls: ['./metric-overview.component.css']\n})\nexport class MetricOverviewComponent implements OnInit {\n\n  constructor() { }\n\n  public status: any = {\n    isFirstOpen: false,\n    isFirstDisabled: false\n  };\n\n  ngOnInit() {\n  }\n\n}\n","import { ColumnModel } from './column-model';\n\nexport class OpenRefineProject {\n\tconstructor(\n\t\tpublic id: number,\n\t    public rows: string[],\n\t    public columnModel: ColumnModel,\n\t    public recordModel: any,\n\t    public overlayModels: any) { }\n}","module.exports = \"footer.footer {\\n  position: fixed;\\n  bottom: 0;\\n  width: 100%;\\n  background-color: #f5f5f5; }\\n\\nmetric-accordion {\\n  width: 95%; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9jaHJpc3RpYW5ib3JzL1Byb2plY3RzL21ldHJpY2RvY19hbmd1bGFyL3NyYy9hcHAvc2hhcmVkL29wZW4tcmVmaW5lL29wZW4tcmVmaW5lLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsZUFBZTtFQUNmLFNBQVM7RUFDVCxXQUFXO0VBQ1gseUJBQXlCLEVBQUE7O0FBRzNCO0VBQ0ksVUFBVSxFQUFBIiwiZmlsZSI6InNyYy9hcHAvc2hhcmVkL29wZW4tcmVmaW5lL29wZW4tcmVmaW5lLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiZm9vdGVyLmZvb3RlciB7XG4gIHBvc2l0aW9uOiBmaXhlZDtcbiAgYm90dG9tOiAwO1xuICB3aWR0aDogMTAwJTtcbiAgYmFja2dyb3VuZC1jb2xvcjogI2Y1ZjVmNTtcbn1cblxubWV0cmljLWFjY29yZGlvbiB7XG4gICAgd2lkdGg6IDk1JTtcbn0iXX0= */\"","// Observable Version\nimport { Component, OnInit, Input, OnChanges, SimpleChanges, ViewChild } from '@angular/core'; // trigger, state, transition, style, animate, keyframes\nimport { Router, ActivatedRoute, ParamMap } from '@angular/router';\nimport { Subscription }   from 'rxjs/Subscription';\n\nimport { MetricsOverlayModel }\tfrom './model/metrics-overlay-model';\nimport { Metric } from './model/metric';\nimport { ProjectMetadata }\t\tfrom './model/project-metadata';\nimport { OpenRefineProject }\tfrom './model/open-refine-project';\nimport { OpenRefineService }\tfrom './open-refine.service';\nimport { RawDataTableComponent } from '../raw-data-table/raw-data-table.component'\nimport { GlobalNavService } from '../../global-nav.service';\n\nimport { NgbModule, NgbAccordion, NgbRadioGroup } from '@ng-bootstrap/ng-bootstrap';\n\n@Component({\n  selector: 'metrics-overlay-model',\n  templateUrl: './open-refine.component.html',\n  providers: [ OpenRefineService ],\n  styles: ['.error {color:red;}'],\n  styleUrls: ['./open-refine.component.scss']//,\n  // animations: [\n  //   trigger('shrinkOut', [\n  //       state('inactive', style({\n  //           height: '*'\n  //           // backgroundColor: '#eee'\n  //       })),\n  //       state('active', style({\n  //           height: 120\n  //           // backgroundColor: '#cfd8dc'\n  //       })),\n  //       transition('inactive => active', animate('100ms ease-in')),\n  //       transition('active => inactive', animate('100ms ease-out'))\n  //   ])\n  // ]\n})\nexport class OpenRefineComponent implements OnInit, OnChanges {\n  errorMessage: string;\n  mode = 'Observable';\n  subscription: Subscription;\n\n  state: string = 'inactive';\n  expanded: boolean = false;\n\n  projectId: string\n\n  @ViewChild(RawDataTableComponent, {static: false})\n  rawDataTable: RawDataTableComponent;\n\n  projectMetadata: ProjectMetadata;\n  openRefineProject: OpenRefineProject;\n  rowModel: any;\n\n  columnMetricColors: any;\n  spanMetricColors: any;\n\n  selectedMetrics: Metric[];\n  selectedColumns: string[];\n  rowsFrom:number;\n  rowsTo: number;\n\n  detailViewOffsetTop: number;\n\n  sortBy: string = \"none\";\n\n  constructor ( protected route: ActivatedRoute,\n    protected router: Router,\n    protected openRefineService: OpenRefineService,\n    protected globalNavService: GlobalNavService\n  ) {\n    globalNavService.recalc$.subscribe(\n      recalc => {\n        this.openRefineService.evaluateMetrics(this.projectId)\n        .subscribe(\n          metricsOverlayModel => {\n            this.openRefineProject.overlayModels['metricsOverlayModel'] = metricsOverlayModel;\n            this.updateProjectData(this.openRefineProject);\n          },\n          error => this.errorMessage = <any>error\n        );\n      });\n    // this.subscription = routineHelperService.sidebarShown$.subscribe(\n    //   sidebarShown => {\n    //     this.sidebarShown = sidebarShown;\n    // });\n  }\n\n  ngOnInit() { \n    this.projectId = this.route.snapshot.paramMap.get('projectId');\n\n  \tthis.getOpenRefineProject();\n  \tthis.getProjectMetadata();\n    this.openRefineService.getRows(this.projectId, 0, 1).subscribe(rowModel => this.rowModel = rowModel);\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    console.log('change in comp');\n    if('metricsOverlayModel' in changes) {\n      // this.openRefineService.evaluateMetrics(this.projectId)\n      //   .subscribe(\n      //     openRefineProject => updateProjectData(openRefineProject),\n      //     error => this.errorMessage = <any>error\n      //   );\n      console.log('metrics overlay model changed');\n    }\n  }\n\n  getOpenRefineProject() {\n    this.openRefineService.getRefineProject(this.projectId)\n      .subscribe(\n        openRefineProject => {\n          this.openRefineProject = openRefineProject;\n          this.updateProjectData(openRefineProject);\n        },\n        error => this.errorMessage = <any>error\n      );\n  }\n\n  getProjectMetadata() {\n    this.openRefineService.getProjectMetadata(this.projectId)\n      .subscribe(\n        projectMetadata => this.projectMetadata = projectMetadata,\n        error => this.errorMessage = <any>error);\n  }\n\n  sortMetricColumns() {\n    let currentMetricColumns = this.openRefineProject.overlayModels.metricsOverlayModel.metricColumnNames;\n    let sortedMetricColumns = [];\n    let sortedColumns = [];\n    for (let col of this.openRefineProject.columnModel.columns) {\n      let metricColumn = this.openRefineProject.overlayModels.metricsOverlayModel.metricColumnNames.filter(mCol => {\n        return col.name == mCol.columnName;\n      });\n      if (metricColumn[0]) {\n        sortedMetricColumns.push(metricColumn[0]);\n      } else {\n        sortedMetricColumns.push({columnName: col.name, metrics: {}});\n      }\n    }\n\n    if (this.sortBy == \"sortByDirtiness\") {\n      sortedColumns = [];\n      sortedMetricColumns = sortedMetricColumns.sort((a: any, b: any) => {\n        let valA = Object.keys(a.metrics).map((d:any) => { return parseFloat(a.metrics[d].measure)}).reduce((pv, cv) => pv+cv, 0);;\n        let valB = Object.keys(b.metrics).map((d:any) => { return parseFloat(b.metrics[d].measure)}).reduce((pv, cv) => pv+cv, 0);;\n        // if(a.value < b.value)\n        //   return -1;\n        // if (a.value > b.value)\n        //   return 1;\n        // return 0;\n        return valB - valA;\n      });\n\n      for (let metricCol of sortedMetricColumns) {\n      let col = this.openRefineProject.columnModel.columns.find((value, idx, col) => { return metricCol.columnName === value.name });\n      if (col) \n          sortedColumns.push(col);\n      }\n      for (let col of this.openRefineProject.columnModel.columns) {\n        let modelCol = sortedColumns.find((value, idx) => {\n          return col.name === value.name;\n        });\n        if(!modelCol)\n          sortedColumns.push(modelCol);\n      }\n    } else if (this.sortBy == \"sortByName\") {\n      //TODO\n    } else {\n      sortedColumns = [];\n      sortedColumns.push.apply(sortedColumns, this.openRefineProject.columnModel.columns);\n      sortedColumns = sortedColumns.sort((a: any, b: any) => {\n        return a.cellIndex - b.cellIndex;\n      })\n      sortedMetricColumns = [];\n      for (let col of sortedColumns) {\n        let metricCol = this.openRefineProject.overlayModels.metricsOverlayModel.metricColumnNames.filter(mCol => { return col.name == mCol.columnName });\n        if (metricCol[0])\n          sortedMetricColumns.push(metricCol[0]);\n      }\n    }\n    this.openRefineProject.columnModel.columns = sortedColumns;\n    this.openRefineProject.overlayModels.metricsOverlayModel.metricColumnNames = sortedMetricColumns;\n  }\n\n  handleTableHeightUpdated(newOffsetTop) {\n    this.detailViewOffsetTop = newOffsetTop;\n  }\n\n  handleSelectionUpdated(selection: any) {\n    this.selectedMetrics = selection.metrics;\n    this.selectedColumns = selection.columns;\n\n    for (let i = 0; i < this.selectedColumns.length; ++i) {\n      if (Array.isArray(this.selectedColumns[i])) {\n        for (let spanIdx = 0; spanIdx < this.openRefineProject.overlayModels.metricsOverlayModel.spanningMetrics.length; spanIdx++) {\n          if (this.openRefineProject.overlayModels.metricsOverlayModel.spanningMetrics[spanIdx].name == this.selectedMetrics[i].name) {\n            this.openRefineProject.overlayModels.metricsOverlayModel.spanningMetrics[spanIdx] = this.selectedMetrics[i];\n            break;\n          }\n        }\n      } else {\n        let metricColumn = this.openRefineProject.overlayModels.metricsOverlayModel.metricColumnNames.filter(mCol => {\n          return this.selectedColumns[i] == mCol.columnName;\n        });\n        metricColumn[0].metrics[this.selectedMetrics[i].name] = this.selectedMetrics[i];\n      }\n    }\n  }\n\n  handleOverviewSelection(selectedMetrics: any) {\n    this.selectedMetrics = selectedMetrics.metrics;\n    this.selectedColumns = selectedMetrics.columns\n  }\n\n  handleDataRowsSelected(selectedRows: any[]) {\n    this.rawDataTable.scrollRows(selectedRows);\n  }\n\n  handleDataRowsPageChanged(pages: any) {\n    this.rowsFrom = pages.from;\n    this.rowsTo = pages.to;\n  }\n\n  handleSort(sortBy: string) {\n    this.sortBy = sortBy;\n    this.updateProjectData(this.openRefineProject);\n  }\n\n  toggleMove() {\n    this.state = (this.state === 'inactive' ? 'active' : 'inactive');\n    this.expanded = (this.state === 'inactive' ? false : true);\n  }\n  //TODO: add edit commands with @Output functions\n\n  updateProjectData(openRefineProject: OpenRefineProject) {\n    this.sortMetricColumns();\n    // this.openRefineService.model = this.openRefineProject.overlayModels.metricsOverlayModel;\n\n    let colorbrewer = require('colorbrewer');\n    let colColors = colorbrewer.Reds[((this.openRefineProject.overlayModels.metricsOverlayModel.availableSpanningMetrics.length < 3) ? 3 : this.openRefineProject.overlayModels.metricsOverlayModel.availableSpanningMetrics.length)];\n    let spanColors = colorbrewer.Oranges[((this.openRefineProject.overlayModels.metricsOverlayModel.availableMetrics.length < 3) ? 3 : this.openRefineProject.overlayModels.metricsOverlayModel.availableMetrics.length)];\n    this.columnMetricColors = {};\n    this.spanMetricColors = {};\n    for(let m in this.openRefineProject.overlayModels.metricsOverlayModel.availableMetrics) {\n      this.columnMetricColors[this.openRefineProject.overlayModels.metricsOverlayModel.availableMetrics[m]] = colColors[m];\n    }\n    for (let m in this.openRefineProject.overlayModels.metricsOverlayModel.availableSpanningMetrics) {\n      this.spanMetricColors[this.openRefineProject.overlayModels.metricsOverlayModel.availableSpanningMetrics[m]] = spanColors[m];\n    }\n  }\n}","import { Injectable } from '@angular/core';\nimport { Http, Headers, Response, Jsonp, URLSearchParams }\tfrom '@angular/http';\nimport { FormsModule, FormControl } from '@angular/forms';\n\nimport { Observable } from 'rxjs/Rx';\n\nimport 'rxjs/add/operator/catch';\nimport 'rxjs/add/operator/map';\n\nimport { MetricsOverlayModel } from './model/metrics-overlay-model';\nimport { OpenRefineProject } from './model/open-refine-project';\nimport { MetricFunction } from './model/metric-function';\n\n// import { Component, OnInit } from '@angular/core';\n\n// @Component({\n//   selector: 'app-open-refine',\n//   templateUrl: './open-refine.component.html',\n//   styleUrls: ['./open-refine.component.css']\n// })\n@Injectable()\nexport class OpenRefineService {\n  private openRefineServerUrl = 'http://localhost:3333/command/';\n  private isSuccess;\n\n  private model: MetricsOverlayModel;\n\n  constructor (private http: Http, private jsonp: Jsonp) {\n  \t// this.params = new URLSearchParams();\n  \t// //TODO: replace with variable parameter\n  }\n\n  private extractData(res: Response) {\n  \t// response => <string[]> response.json()[1];\n\n    let body = res.json();\n    if(body.availableMetrics \n      && body.availableSpanningMetrics \n      && body.computeDuplicates\n      && body.metricColumnNames\n      && body.spanningMetrics) {\n      this.model = body;\n    }\n    return body || { };\n  }\n\n  createOpenRefineMetricsProject(projectName: any, projectId: string, commit_short: any, format: string, separator: string, content: any) : Observable<MetricsOverlayModel> {\n    let params:URLSearchParams = new URLSearchParams();\n\n    // let data = {\n    //   'project-name': projectName,\n    //   'format': format,\n    //   'project-file': content\n    // }\n    \n    let opt = {\n      guessCellValueTypes:true,\n      projectTags:[projectId, commit_short],\n      ignoreLines:-1,\n      processQuotes:true,\n      fileSource: content,\n      encoding:\"\",\n      separator: separator,\n      storeBlankCellsAsNulls:true,\n      storeBlankRows:true,\n      skipDataLines:0,\n      includeFileSources:false,\n      headerLines:1,\n      limit:-1,\n      projectName: projectName\n    };\n\n    let body = new FormData();\n    body.append(\"download\", content);\n\n    params.set(\"project-name\", projectName);\n    params.set(\"format\", format);\n    params.set(\"options\", JSON.stringify(opt));\n    params.set(\"project-file\", content);\n\n\n    return this.http.post(this.openRefineServerUrl + 'core/create-project-from-upload', body, { search: params })\n      .map(this.extractData)\n      .catch(this.handleError);\n  }\n\n  setupProject(projectId: any, metricFunctions: any) : Observable<MetricsOverlayModel> {\n    let params = this.initializeParams(projectId);\n    params.set('computeDuplicates', 'false');\n    // new HttpParams().set('metricsConfigList', JSON.stringify(metricFunctions))\n    if (metricFunctions)\n      params.set('metricsConfigList', JSON.stringify(metricFunctions));\n    // let body = new FormData();\n    // body.append(\"metricsConfigList\", );\n\n    return this.http.post(this.openRefineServerUrl + 'metric-doc/createMetricsExtension', params)//{ metricsConfigList: JSON.stringify(metricFunctions)}, { search: params })\n      .map(this.extractData)\n      .catch(this.handleError);\n  }\n\n  recommendMetrics(projectId: any) : Observable<MetricFunction[]> {\n    let params = this.initializeParams(projectId);\n    return this.http.get(this.openRefineServerUrl + 'metric-doc/recommend-metrics', { search: params })\n      .map(this.extractData)\n      .catch(this.handleError);\n  }\n\n  getAllProjectMetadata() : Observable<any> {\n    return this.http.get(this.openRefineServerUrl + 'core/get-all-project-metadata', {})\n      .map(this.extractData)\n      .catch(this.handleError);\n  }\n\n  getOverlayModel (projectId: any) : Observable<MetricsOverlayModel> {\n\n  \treturn this.http.get(this.openRefineServerUrl + 'metric-doc/getMetricsOverlayModel', { search: this.initializeParams(projectId) })\n  \t\t.map(this.extractData)\n  \t\t.catch(this.handleError);\n  }\n\n  getProjectMetadata (projectId: any) {\n  \treturn this.http.get(this.openRefineServerUrl + 'core/get-project-metadata', { search: this.initializeParams(projectId) })\n  \t\t.map(this.extractData)\n  \t\t.catch(this.handleError);\n  }\n\n  getRefineProject (projectId: any) : Observable<OpenRefineProject> {\n  \treturn this.http.get(this.openRefineServerUrl + 'core/get-models', { search: this.initializeParams(projectId) })\n  \t\t.map(this.extractData)\n  \t\t.catch(this.handleError);\n  }\n\n  getHistory (projectId: any) {\n    return this.http.get(this.openRefineServerUrl + 'core/get-history', { search: this.initializeParams(projectId) })\n      .map(this.extractData)\n      .catch(this.handleError);\n  }\n\n  getRows (projectId: any, first: any, limit: any) {\n    let params = this.initializeParams(projectId);\n    params.set('project', projectId);\n  \tparams.set('start', first);\n  \tparams.set('limit', limit);\n  \treturn this.http.get(this.openRefineServerUrl + 'core/get-rows', { search: params })\n  \t\t.map(this.extractData)\n  \t\t.catch(this.handleError);\n  }\n\n  updateMetric (projectId: any, metric: any, column: any) {\n    let params = this.initializeParams(projectId);\n    params.set('metric', JSON.stringify(metric));\n    if(column instanceof Array) {\n      params.set('columns', JSON.stringify(column));\n    } else {\n      params.set('column', column);\n    }\n    return this.http.post(this.openRefineServerUrl + 'metric-doc/updateMetric', params)\n      .map(this.extractData)\n      .catch(this.handleError);\n  }\n\n  deleteMetric (projectId: any, metric: any, column: any) {\n    let params = this.initializeParams(projectId)\n    params.set('metricName', metric.name);\n    if(column instanceof Array) {\n      params.set('columns', JSON.stringify(column));\n    } else {\n      params.set('column', column);\n    }\n    return this.http.post(this.openRefineServerUrl + 'metric-doc/deleteMetric', params)\n      .map(this.extractData)\n      .catch(this.handleError);\n  }\n\n  evaluateMetrics (projectId: string) :Observable<MetricsOverlayModel> {\n    return this.http.post(this.openRefineServerUrl + 'metric-doc/evaluateMetrics', this.initializeParams(projectId))\n      .map(this.extractData)\n      .catch(this.handleError);\n  }\n\n  evaluateSelection (projectId: any, metricSelection: any[], columnSelection: any[]) {\n    let selection = [];\n    for (let selIdx = 0; selIdx < metricSelection.length; ++selIdx) {\n      metricSelection[selIdx].dirtyIndices = [];\n      metricSelection[selIdx].measure = 0;\n      if(columnSelection[selIdx] instanceof Array) {\n        selection.push({ metric: JSON.stringify(metricSelection[selIdx]), columns: JSON.stringify(columnSelection[selIdx]) });\n      } else {\n        selection.push({metric: JSON.stringify(metricSelection[selIdx]), column: columnSelection[selIdx]});\n      }\n    }\n    let params = this.initializeParams(projectId);\n    params.set('selection', JSON.stringify(selection));\n    return this.http.post(this.openRefineServerUrl + 'metric-doc/evaluateSelectedMetric', params)\n      .map(this.extractData)\n      .catch(this.handleError);\n  }\n\n  previewExpression (projectId: any, expression: string, cellIdx: any) {\n    let rowIdx: number[] = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];\n\n    let params = this.initializeParams(projectId);\n    params.set('rowIndices', JSON.stringify(rowIdx));\n    params.set('expression', 'grel:'+ expression);\n    params.set('cellIndex', cellIdx);\n    return this.http.post(this.openRefineServerUrl + 'core/preview-expression', params)\n      .map(this.extractData)\n      .catch(this.handleError);\n  }\n\n  getMetricDocFunctionsOverview () {\n    return this.http.get(this.openRefineServerUrl + 'metric-doc/get-metricdoc-language-info')\n      .map(this.extractData)\n      .catch(this.handleError);\n  }\n\n  getProvenanceJSON(path: string) {\n    this.http.get(path)\n      .toPromise()\n      .then((response) => {\n        return response.json();\n      }).catch((err) => {\n      console.log(err);\n    });\n  }\n\n  public handleError (error: Response | any) {\n    // In a real world app, we might use a remote logging infrastructure\n    let errMsg: string;\n    if (error instanceof Response) {\n      const body = error.json() || '';\n      const err = body.error || JSON.stringify(body);\n      const errormsg = JSON.parse(body.message);\n      errMsg = `${errormsg.message || ''}`;\n    } else {\n      errMsg = error.message ? error.message : error.toString();\n    }\n    console.error(errMsg);\n    return Observable.throw(errMsg);\n  }\n\n  private initializeParams(projectId: any):URLSearchParams {\n    let params:URLSearchParams = new URLSearchParams();\n    params.set('project', projectId);\n    return params;\n  }\n}\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3NoYXJlZC9xdWFsaXR5LWhlYWRlci1jb2wvcXVhbGl0eS1oZWFkZXItY29sLmNvbXBvbmVudC5jc3MifQ== */\"","import { Component, Directive, OnChanges, AfterContentChecked, SimpleChanges, Input, HostListener, ElementRef } from '@angular/core';\n\nimport * as d3 from 'd3';\n\n@Component({\n  selector: '[metric-col]',\n  templateUrl: './quality-header-col.component.html',\n  styleUrls: ['./quality-header-col.component.css']\n})\nexport class QualityHeaderColComponent implements OnChanges, AfterContentChecked {\n\n  @Input() metricCol;\n  @Input() metric;\n  @Input() metricsOverlayModel;\n  @Input() columnMetricColors;\n  @Input() svgWidth;\n\n  host;\n  htmlElement: HTMLElement;\n\n  constructor(protected element: ElementRef) {\n    this.htmlElement = this.element.nativeElement;\n    this.host = d3.select(this.element.nativeElement);\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    let cellWidth = this.htmlElement.offsetWidth - 1;\n    let svg = d3.select(this.htmlElement).select(\"svg\");\n\n    svg.data(this.metricsOverlayModel.metrics[this.metricCol][this.metric]);\n    svg.attr(\"height\", 26)\n      .on(\"mouseover\", d => {\n        if(this.metricsOverlayModel.metrics[this.metricCol][this.metric]) {\n          let currentMetric = this.metricsOverlayModel.metrics[this.metricCol][this.metric];\n          \n          let tooltipNode:any = d3.select(\"body\").select(\"div.d3tooltip\").node();\n          d3.select(\"body\").select(\"div.d3tooltip\").html(function(d) {\n              var text = \"<span style='color:steelblue'>\" + currentMetric.name + \"</span><br>\" +\n                \"Metric Value: <span style='color:steelblue'>\" + currentMetric.measure + \"</span><br>\" + \n                \"Number of Checks: <span style='color:steelblue'>\" + currentMetric.evalTuples.length + \"</span><br>\";\n              if(currentMetric.dirtyIndices != null) {\n                text += \"Erroneous Entries: <span style='color:steelblue'>\" + currentMetric.dirtyIndices.length + \"</span><br>\";\n              }\n              text += \"Data Type: <span style='color:steelblue'>\" + currentMetric.datatype + \"</span>\";\n              return text;\n            })\n            // .transition()\n            //   .duration(100)\n              .style(\"left\", (d3.event.pageX - tooltipNode.scrollWidth) + \"px\")\n              .style(\"top\", (d3.event.pageY) + \"px\")\n              .style(\"opacity\", .9);\n            // //offset is strangely dependent on elements in svg, hence we need to offset it so the proper position\n            // .offset([-10, (this.htmlElement.offsetWidth/2) - ((this.metricCol.metrics[this.metric].measure*cellWidth)/2)])\n            // .show(svg.data(), svg.node());\n        }\n      })\n      .on(\"mouseout\", () => {\n        d3.select(\"body\").select(\"div.d3tooltip\").transition()\n          .duration(100)\n          .style(\"opacity\", 0);\n      })\n      .on(\"mouseleave\", () => {\n        d3.select(\"body\").select(\"div.d3tooltip\").transition()\n          .duration(100)\n          .style(\"opacity\", 0);\n      });\n\n    if(this.metricsOverlayModel.metrics[this.metricCol][this.metric]) {\n      svg.selectAll(\"rect\").remove();\n      let rect = svg.append(\"rect\")\n        .classed(\"metric\", true)\n        .attr(\"height\", 26)\n        .attr(\"width\", this.metricsOverlayModel.metrics[this.metricCol][this.metric].measure * cellWidth)\n        .style(\"fill\", (d, i, siblings) => {\n          // let metric = siblings[i].parentNode.__data__;\n          return this.columnMetricColors[this.metric];\n        });\n    }\n  }\n  ngAfterContentChecked() {\n    let cellWidth = this.htmlElement.offsetWidth - 1;\n    let svg = d3.select(this.htmlElement).select(\"svg\");\n    if(this.metricsOverlayModel.metrics[this.metricCol][this.metric]) {\n      svg.selectAll(\"rect\").attr(\"width\", this.metricsOverlayModel.metrics[this.metricCol][this.metric].measure * cellWidth);\n    }\n  }\n}\n\n\n","module.exports = \"rect {\\n  pointer-events: all;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvc2hhcmVkL3Jhdy1kYXRhLXNjcm9sbC1iYXItdmlzdWFsaXphdGlvbi9yYXctZGF0YS1zY3JvbGwtYmFyLXZpc3VhbGl6YXRpb24uY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLG1CQUFtQjtBQUNyQiIsImZpbGUiOiJzcmMvYXBwL3NoYXJlZC9yYXctZGF0YS1zY3JvbGwtYmFyLXZpc3VhbGl6YXRpb24vcmF3LWRhdGEtc2Nyb2xsLWJhci12aXN1YWxpemF0aW9uLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyJyZWN0IHtcbiAgcG9pbnRlci1ldmVudHM6IGFsbDtcbn0iXX0= */\"","import { Component, Input, ViewChild, ElementRef, OnInit, OnChanges, SimpleChanges } from '@angular/core';\nimport { Metric } from '../open-refine/model/metric'\n\nimport * as d3 from 'd3';\n\n@Component({\n  selector: '[scroll-bar-vis]',\n  template: '',\n  styleUrls: ['./raw-data-scroll-bar-visualization.component.css']\n})\nexport class RawDataScrollBarVisualizationComponent implements OnInit, OnChanges {\n\n  @Input() private metricsOverlayModel;\n  @Input() private colWidths: number[];\n  @Input() private bodyHeight;\n  @Input() private rowsFrom: number;\n  @Input() private itemsPerPage: number;\n  @Input() columnMetricColors;\n  @Input() spanMetricColors;\n  private htmlElement: HTMLElement;\n  private host;\n\n  private overlayScaleY;\n\n  private overlay;\n  private columns;\n  private frameContainer;\n  private metricElements;\n\n  private colOffset: number[] = [];\n\n  constructor(private element: ElementRef) {\n    this.htmlElement = this.element.nativeElement;\n    this.host = d3.select(this.element.nativeElement);\n  }\n\n  ngOnInit() {\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if('metricsOverlayModel' in changes) {\n      this.fillCols();\n    }\n    if('rowsFrom' in changes) {\n      this.fillScrollVis();\n      this.updateOverlayPositions();\n    }\n    if ('colWidths' in changes && 'bodyHeight' in changes) {\n      this.updateOverlayPositions();\n    }\n  }\n\n  public fillCols() {\n    d3.select(this.htmlElement)\n      .selectAll('g.metrics-overlay')\n      .remove();\n    this.overlay = d3.select(this.htmlElement)\n      .selectAll('g.metrics-overlay')\n      .data(d => {\n        return Object.keys(this.metricsOverlayModel.metrics);\n      })\n      .enter().append('g')\n      .attr('class', 'metrics-overlay');\n      // .attr('transform', (d, i) => { return 'translate(' + d.offset + ',0)' })\n    \n    this.columns = this.overlay.selectAll('.metrics-overlay-col')\n      .data((d:any) => {\n        if(d) {\n          let metrics = [];\n          for (let key in d.metrics) {\n            if (d.metrics[key].dirtyIndices) {\n              metrics.push(d.metrics[key]);\n            }\n          }\n          if(this.metricsOverlayModel.spanningMetrics) {\n            for (let spanMetric of this.metricsOverlayModel.spanningMetrics) {\n              if (spanMetric.spanningColumns.indexOf(d.columnName) > -1) {\n                metrics.push(spanMetric);\n              }\n            }\n          }\n          return metrics;\n        }\n        return [];\n      })\n      .enter().append('g')\n      .attr('class', 'metrics-overlay-col')\n      .attr('class', (d, i) => { return d.name })\n      .attr('transform', (d, i) => {\n        let colOffset = 0;\n        if (d.dirtyIndices != null) {\n          colOffset = colOffset + (12*(i+1));\n        }\n        return 'translate(-' + colOffset + ',0)';\n      })\n      .attr('display', (d, i) => {\n        if (!d.dirtyIndices) return 'none';\n      });\n\n    // set background\n    this.columns.append('rect')\n      .attr('height', this.bodyHeight)\n      .attr('width', 12)\n      .attr('fill', (d:any) => {\n        let from = this.rowsFrom;\n        let to = this.rowsFrom + this.itemsPerPage;\n        if (d.dirtyIndices) {\n          let inRange = d.dirtyIndices.filter(function(d, i) {\n            return d.index >= from && d.index <= to;\n          });\n          if (inRange.length > 0) {\n            return 'white';\n          }\n        }\n        return 'transparent';\n      });\n\n    // left line\n    this.frameContainer = this.overlay.filter((d:any, i) => {\n      let from = this.rowsFrom;\n      let to = this.rowsFrom + this.itemsPerPage;\n      for (let key in d.metrics) {\n        if (d.metrics[key].dirtyIndices) {\n          let inRange = d.metrics[key].dirtyIndices.filter(function(d, i) {\n            return d.index >= from && d.index <= to;\n          });\n          if (inRange.length > 0)\n            return d;\n        }\n      }\n      if (this.metricsOverlayModel.spanningMetrics) {\n        for (let spanMetric of this.metricsOverlayModel.spanningMetrics) {\n          if (spanMetric.spanningColumns.indexOf(d.columnName) > -1 && spanMetric.dirtyIndices) {\n            let inRange = spanMetric.dirtyIndices.filter(function(d, i) {\n              return d.index >= from && d.index <= to;\n            });\n            if (inRange.length > 0)\n              return d;\n          }\n        }\n      }\n    });\n  }\n\n  public updateOverlayPositions() {    \n    let from = this.rowsFrom;\n    let to = this.rowsFrom + this.itemsPerPage;\n    this.overlayScaleY = d3.scaleLinear()\n      .domain([to, from])\n      .rangeRound([(this.bodyHeight), 0]);\n    if (this.frameContainer)\n      this.frameContainer.selectAll('line').remove();\n\n    this.frameContainer = this.overlay.filter((d:any, i) => {\n      let from = this.rowsFrom;\n      let to = this.rowsFrom + this.itemsPerPage;\n      for (let key in d.metrics) {\n        if (d.metrics[key].dirtyIndices) {\n          let inRange = d.metrics[key].dirtyIndices.filter(function(d, i) {\n            return d.index >= from && d.index <= to;\n          });\n          if (inRange.length > 0)\n            return d;\n        }\n      }\n      if (this.metricsOverlayModel.spanningMetrics) {\n        for (let spanMetric of this.metricsOverlayModel.spanningMetrics) {\n          if (spanMetric.spanningColumns.indexOf(d.columnName) > -1 && spanMetric.dirtyIndices) {\n            if (spanMetric.dirtyIndices.length > 0) {\n              let inRange = spanMetric.dirtyIndices.filter(function(d, i) {\n                return d.index >= from && d.index <= to;\n              });\n              if (inRange.length > 0)\n                return d;\n            }\n          }\n        }\n      }\n    });\n\n    this.overlay.attr('transform', (d, i, elements) => {\n      if(this.colWidths.length > 0) {\n          let width = 0;\n          for (let colIt = 0; colIt <= i+1; colIt++) {\n            width += this.colWidths[colIt];\n          }\n          return 'translate(' + (width - 4) + ',0)'; \n      }\n    });\n\n    this.columns.selectAll('rect')\n      .attr('height', this.bodyHeight);\n\n    this.metricElements.attr('height', this.bodyHeight/this.itemsPerPage)\n      .attr('y', d => { \n        return this.overlayScaleY(d.index)\n      });\n\n    if (this.colWidths.length > 0) {\n      this.frameContainer.append('line')\n        .attr('x1', (d:any) => {\n          let colWidth = 1;\n          for (let key in d.metrics) {\n            if (d.metrics[key].dirtyIndices) {\n              colWidth += 12;\n            }\n          }\n          if (this.metricsOverlayModel.spanningMetrics) {\n            for (let spanMetric of this.metricsOverlayModel.spanningMetrics) {\n              if (spanMetric.spanningColumns.indexOf(d.columnName) > -1) {\n                if (spanMetric.dirtyIndices)\n                  colWidth += 12;\n              }\n            }\n          }\n          return - colWidth;\n        })\n        .attr('x2', (d:any) => {\n          let colWidth = 1;\n          for (let key in d.metrics) {\n            if (d.metrics[key].dirtyIndices) {\n              colWidth += 12;\n            }\n          }\n          if (this.metricsOverlayModel.spanningMetrics) {\n            for (let spanMetric of this.metricsOverlayModel.spanningMetrics) {\n              if (spanMetric.spanningColumns.indexOf(d.columnName) > -1) {\n                if (spanMetric.dirtyIndices)\n                  colWidth += 12;\n              }\n            }\n          }\n          return - colWidth;\n        })\n        .attr('y1', 0)\n        .attr('y2', this.bodyHeight)\n        .attr('stroke', '#ddd')\n        .attr('stroke-width', '2');\n\n      // right line line\n      this.frameContainer.append('line')\n        .attr('x1', 0)\n        .attr('x2', 0)\n        .attr('y1', 0)\n        .attr('y2', this.bodyHeight)\n        .attr('stroke', '#ddd')\n        .attr('stroke-width', '2');\n    }\n  }\n\n  private fillScrollVis(): void {\n    let from = this.rowsFrom;\n    let to = this.rowsFrom + this.itemsPerPage;\n\n    let cols = d3.select(this.htmlElement)\n      .selectAll('g.metrics-overlay')\n      .selectAll('g')\n      .selectAll('g');\n    d3.selectAll('rect.metrics-bin').remove();\n\n    // Define the div for the tooltip\n    this.metricElements = cols.data((d:Metric) => {\n        if (d.dirtyIndices) {\n          if (d.concat === 'AND' && d.dirtyIndices.length > 1) {\n            return d.dirtyIndices.filter(function(d, i) {\n              return (d.index >= from && d.index <= to) && d.dirty.indexOf(true) == -1;\n            });\n          } else {\n            return d.dirtyIndices.filter(function(d, i) {\n              return d.index >= from && d.index <= to;\n            });\n          }\n        } else {\n          return [];\n        }\n      })\n      .enter()\n      .append('rect')\n      .attr('class', 'metrics-bin')\n      .attr('width', 12)\n      .attr('pointer-events', 'all')\n      .style('fill', (d, i, siblings:any[]) => {\n        return this.fillRect(siblings[i].parentNode.__data__);\n      })\n      .on('mouseover', (d, i, siblings) => {\n        let rec = d3.select(siblings[i]).style('fill', 'steelblue');\n        // this.tooltip.html( d => {\n        //     var text = '<span style=\"color:steelblue\">Row: </span><span>'+ (d[0].index + 1) + ' </span>' ;\n        //     return text;\n        //   })\n        //   //offset is strangely dependent on elements in svg, hence we need to offset it to the proper position\n        //   .offset([-10, 0])\n        //   .show(rec.data(), rec.node());\n        let tooltipNode:any = d3.select(\"body\").select(\"div.d3tooltip\").node();\n        d3.select(\"body\").select(\"div.d3tooltip\")\n          .html('<span style=\"color:steelblue\">Row: </span><span>'+ (d.index + 1) + ' </span>')\n          .transition()\n          .duration(100)\n          .style(\"opacity\", .9)\n          .style(\"left\", (d3.event.pageX - tooltipNode.scrollWidth) + \"px\")\n          .style(\"top\", d3.event.clientY + \"px\");\n      })\n      .on('mouseout', (d, i, siblings) => {\n        let rec = d3.select(siblings[i]).style('fill', (d, i, siblings:any[]) => {\n          return this.fillRect(siblings[i].parentNode.__data__);\n        });\n        // this.tooltip.hide();\n        d3.select(\"body\").select(\"div.d3tooltip\").transition()\n          .duration(100)\n          .style(\"opacity\", 0);\n      })\n      .on('mouseleave', (data:any) => {\n        d3.select(\"body\").select(\"div.d3tooltip\").transition()\n          .duration(100)\n          .style(\"opacity\", 0);\n        });\n  }\n  \n  fillRect(metric: any): string {\n    if (metric.spanningColumns) {\n      if (this.spanMetricColors[metric.name])\n        return this.spanMetricColors[metric.name];\n    } else {\n      if (this.columnMetricColors[metric.name])\n        return this.columnMetricColors[metric.name];\n    }\n    return \"#ce6dbd\";\n  }\n}\n","module.exports = \"div.raw-data-table-footer {\\n  /*border: 1px solid black;*/\\n  width: 100%;\\n  overflow-x: auto;\\n  overflow-y: hidden;\\n  white-space: nowrap;\\n  position: relative; }\\n\\ndiv.raw-data-container {\\n  overflow-x: scroll;\\n  position: relative;\\n  width: 100%; }\\n\\nth.metric-overview-col:hover {\\n  background: lightgrey; }\\n\\nth.metric-overview-col.active {\\n  background: lightgrey;\\n  border-color: steelblue; }\\n\\ntable.metrics-overview {\\n  margin: 0px; }\\n\\ntable.metrics-overview thead, table.metrics-overview tbody {\\n    display: block;\\n    margin-right: 15px; }\\n\\ntable.metrics-overview thead th.active {\\n    background: lightgrey;\\n    border-color: steelblue; }\\n\\ntable.metrics-overview tbody {\\n    height: 400px;\\n    overflow-y: auto;\\n    margin-right: 0px; }\\n\\ntable.metrics-overview tbody tr.highlight {\\n      background: lightgrey;\\n      color: steelblue; }\\n\\ntable.metrics-overview tbody.disabled {\\n    background: lightgrey; }\\n\\ntable.metrics-overview tbody.disabled tr {\\n      color: darkgrey; }\\n\\ntable.spanning-metrics-overview {\\n  margin-right: 0px;\\n  margin-bottom: 0px; }\\n\\nsvg.table-overlay {\\n  height: 400px;\\n  position: absolute;\\n  pointer-events: none; }\\n\\nsvg.table-overlay.disabled {\\n  display: none; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9jaHJpc3RpYW5ib3JzL1Byb2plY3RzL21ldHJpY2RvY19hbmd1bGFyL3NyYy9hcHAvc2hhcmVkL3Jhdy1kYXRhLXRhYmxlL3Jhdy1kYXRhLXRhYmxlLmNvbXBvbmVudC5zY3NzIiwiL1VzZXJzL2NocmlzdGlhbmJvcnMvUHJvamVjdHMvbWV0cmljZG9jX2FuZ3VsYXIvc3JjL2FwcC9zaGFyZWQvX2dsb2JhbHMuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFQTtFQUNJLDJCQUFBO0VBQ0EsV0FBVztFQUNYLGdCQUFnQjtFQUNoQixrQkFBa0I7RUFDbEIsbUJBQW1CO0VBQ25CLGtCQUFrQixFQUFBOztBQUd0QjtFQUNJLGtCQUFrQjtFQUNsQixrQkFBa0I7RUFDbEIsV0FBVyxFQUFBOztBQUdmO0VBQ0kscUJBQXFCLEVBQUE7O0FBR3pCO0VBQ0kscUJBQXFCO0VBQ3JCLHVCQUF1QixFQUFBOztBQUczQjtFQUNJLFdBQVcsRUFBQTs7QUFEZjtJQUlRLGNBQWM7SUFDZCxrQkFBa0IsRUFBQTs7QUFMMUI7SUFVWSxxQkFBcUI7SUFDckIsdUJBQXVCLEVBQUE7O0FBWG5DO0lBZ0JRLGFDMUNlO0lEMkNmLGdCQUFnQjtJQUNoQixpQkFBaUIsRUFBQTs7QUFsQnpCO01BcUJZLHFCQUFxQjtNQUNyQixnQkFBZ0IsRUFBQTs7QUF0QjVCO0lBMkJRLHFCQUFxQixFQUFBOztBQTNCN0I7TUE4QlksZUFBZSxFQUFBOztBQUszQjtFQUNJLGlCQUFpQjtFQUNqQixrQkFBa0IsRUFBQTs7QUFHdEI7RUFDSSxhQ25FbUI7RURvRW5CLGtCQUFrQjtFQUNsQixvQkFBb0IsRUFBQTs7QUFHeEI7RUFDSSxhQUFhLEVBQUEiLCJmaWxlIjoic3JjL2FwcC9zaGFyZWQvcmF3LWRhdGEtdGFibGUvcmF3LWRhdGEtdGFibGUuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJAaW1wb3J0IFwiLi4vZ2xvYmFsc1wiO1xuXG5kaXYucmF3LWRhdGEtdGFibGUtZm9vdGVyIHtcbiAgICAvKmJvcmRlcjogMXB4IHNvbGlkIGJsYWNrOyovXG4gICAgd2lkdGg6IDEwMCU7XG4gICAgb3ZlcmZsb3cteDogYXV0bztcbiAgICBvdmVyZmxvdy15OiBoaWRkZW47XG4gICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG59XG5cbmRpdi5yYXctZGF0YS1jb250YWluZXIge1xuICAgIG92ZXJmbG93LXg6IHNjcm9sbDtcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgd2lkdGg6IDEwMCU7XG59XG5cbnRoLm1ldHJpYy1vdmVydmlldy1jb2w6aG92ZXIge1xuICAgIGJhY2tncm91bmQ6IGxpZ2h0Z3JleTtcbn1cblxudGgubWV0cmljLW92ZXJ2aWV3LWNvbC5hY3RpdmUge1xuICAgIGJhY2tncm91bmQ6IGxpZ2h0Z3JleTtcbiAgICBib3JkZXItY29sb3I6IHN0ZWVsYmx1ZTtcbn1cblxudGFibGUubWV0cmljcy1vdmVydmlldyB7XG4gICAgbWFyZ2luOiAwcHg7XG5cbiAgICB0aGVhZCwgdGJvZHkgeyBcbiAgICAgICAgZGlzcGxheTogYmxvY2s7IFxuICAgICAgICBtYXJnaW4tcmlnaHQ6IDE1cHg7XG4gICAgfVxuXG4gICAgdGhlYWQge1xuICAgICAgICB0aC5hY3RpdmUge1xuICAgICAgICAgICAgYmFja2dyb3VuZDogbGlnaHRncmV5O1xuICAgICAgICAgICAgYm9yZGVyLWNvbG9yOiBzdGVlbGJsdWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB0Ym9keSB7XG4gICAgICAgIGhlaWdodDogJHJhdy1kYXRhLWhlaWdodDtcbiAgICAgICAgb3ZlcmZsb3cteTogYXV0bztcbiAgICAgICAgbWFyZ2luLXJpZ2h0OiAwcHg7XG5cbiAgICAgICAgdHIuaGlnaGxpZ2h0IHtcbiAgICAgICAgICAgIGJhY2tncm91bmQ6IGxpZ2h0Z3JleTtcbiAgICAgICAgICAgIGNvbG9yOiBzdGVlbGJsdWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB0Ym9keS5kaXNhYmxlZCB7XG4gICAgICAgIGJhY2tncm91bmQ6IGxpZ2h0Z3JleTtcblxuICAgICAgICB0ciB7XG4gICAgICAgICAgICBjb2xvcjogZGFya2dyZXk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbnRhYmxlLnNwYW5uaW5nLW1ldHJpY3Mtb3ZlcnZpZXcge1xuICAgIG1hcmdpbi1yaWdodDogMHB4O1xuICAgIG1hcmdpbi1ib3R0b206IDBweDtcbn1cblxuc3ZnLnRhYmxlLW92ZXJsYXkge1xuICAgIGhlaWdodDogJHJhdy1kYXRhLWhlaWdodDtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG59XG5cbnN2Zy50YWJsZS1vdmVybGF5LmRpc2FibGVkIHtcbiAgICBkaXNwbGF5OiBub25lO1xufSIsIiRyYXctZGF0YS1oZWlnaHQ6IDQwMHB4OyJdfQ== */\"","import { Component, Directive, Injectable, HostListener, \n  OnInit, AfterContentChecked, AfterViewChecked,\n  Input, ViewChild, Output, EventEmitter } from '@angular/core';\n\nimport { OpenRefineService } from '../open-refine/open-refine.service';\n\nimport { OpenRefineProject } from '../open-refine/model/open-refine-project';\nimport { ColumnModel } from '../open-refine/model/column-model';\nimport { MetricsOverlayModel } from '../open-refine/model/metrics-overlay-model';\nimport { Metric } from '../open-refine/model/metric';\nimport { Row } from '../data-model/row';\n\nimport { ContextMenuComponent, ContextMenuService } from 'ngx-contextmenu';\n\nimport * as d3 from 'd3';\n\n@Injectable()\n@Component({\n  selector: 'app-raw-data-table',\n  templateUrl: './raw-data-table.component.html',\n  styleUrls: ['./raw-data-table.component.scss'],\n  providers: [ OpenRefineService ]\n})\nexport class RawDataTableComponent implements OnInit, AfterContentChecked, AfterViewChecked {\n  @Input() projectId:any;\n  @Input() project:OpenRefineProject;\n  @Input() columnMetricColors;\n  @Input() spanMetricColors;\n  // metricsOverlayModel:MetricsOverlayModel;\n\n  objectKeys = Object.keys;\n\n  colWidths: number[] = [];\n  rowModel:any[];\n  maxSize:number = 5;\n  page:number = 1;\n  itemsPerPage:number = 100;\n  rowsFrom:number = 0;\n  disabled:boolean = false;\n\n  @ViewChild('headerCols', {static: false}) headerCols;\n  @ViewChild('bodyCols', {static: false}) bodyCols;\n  @ViewChild('rawDataBody', {static: false}) dataBody;\n  @ViewChild('colOverviewHead', {static: false}) colHead;\n  @ViewChild('spanOverviewHead', {static: false}) spanHead;\n  @ViewChild('tableOverlay', {static: false}) tableOverlay;\n  overlayOffsetTop:number = 0;\n  overlayWidth:number = 0;\n  bodyHeight: number = 0;\n  colOffset: number[] = [];\n\n  @Output() onOverviewMetricSelected = new EventEmitter();\n  @Output() tableHeightChanged = new EventEmitter();\n  @Output() pageChangedEmitter = new EventEmitter();\n  @Output() sortEmitter = new EventEmitter();\n\n  @ViewChild('existingMetric', {static: false}) public existingMenu: ContextMenuComponent;\n  @ViewChild('newMetric', {static: false}) public newMenu: ContextMenuComponent;\n\n  selectedMetricCells: any;\n  selectedMetrics: Metric[];\n  selectedColumns: string[];\n  highlightedRows: number[];\n  contextColumn: any;\n\n  updated: boolean = false;\n  changeDetected: boolean = false;\n  oldColumns: any[];\n\n  constructor(protected openRefineService: OpenRefineService,\n    protected contextMenuService: ContextMenuService) { }\n\n  ngOnInit() {\n    this.pageChanged({ \n      page: this.page, \n      itemsPerPage: this.itemsPerPage \n    });\n\n    this.selectedMetricCells = {};\n    this.selectedMetrics = [];\n  }\n\n  ngAfterContentChecked() {\n    // the header widhts are added to the column widths only after initializing offsets\n    this.calculateColWidths();\n  }\n\n  ngAfterViewChecked() {\n    if(this.updated) {\n      this.highlightRows();\n      if(this.highlightedRows && this.highlightedRows.length > 0)\n        this.scrollToRow(this.highlightedRows[0]);\n      this.updated = false;\n    }\n    d3.selectAll('table.metrics-overview thead tr.overview-row th')\n      .data(this.colWidths)\n      .each(function(data, index) {\n        d3.select(this).select('svg')\n          .style('width', data);\n      });\n  }\n\n  ngDoCheck() {\n    if(this.project) {\n      if (this.project.columnModel.columns !== this.oldColumns) {\n        this.changeDetected = true;\n        this.colOffset = [];\n        this.oldColumns = this.project.columnModel.columns;\n      }\n\n      this.changeDetected = false;\n    }\n  }\n\n  pageChanged(event:any):void {\n    this.page = event.page;\n    this.rowsFrom = ( (this.page-1) * this.itemsPerPage);\n    this.openRefineService.getRows(this.projectId, this.rowsFrom, this.itemsPerPage)\n      .subscribe(rowModel => {\n        this.rowModel = rowModel;\n        this.updated = true;\n        this.disabled = false;\n      });\n    this.pageChangedEmitter.emit({from: this.rowsFrom, to: (this.rowsFrom + this.itemsPerPage)});\n  }\n\n  private onContextMenu($event: MouseEvent, item: any, metric: any): void {\n    this.contextColumn = item.columnName;\n    let metricContext = item.metrics[metric];\n    if (metricContext) {\n      this.contextMenuService.show.next({\n        // Optional - if unspecified, all context menu components will open\n        contextMenu: this.existingMenu,\n        event: $event,\n        item: metricContext\n      });\n    } else {\n      this.contextMenuService.show.next({\n        contextMenu: this.newMenu,\n        event: $event,\n        item: metric\n      })\n    }\n    $event.preventDefault();\n    $event.stopPropagation();\n    // this.contextMenuService.show.next({\n    //   actions: this.menuOptions,\n    //   event: $event,\n    //   item: item\n    // });\n  }\n\n  private onClickOverview($event: MouseEvent, item: any, cellIndex: any): void {\n    let previousMetrics = this.selectedMetrics;\n    let previousColumns = this.selectedColumns;\n    this.selectedColumns = [];\n    this.selectedMetrics = [];\n\n    if ($event.shiftKey) {\n      this.selectedMetrics = this.selectedMetrics.concat(previousMetrics);\n      this.selectedColumns = this.selectedColumns.concat(previousColumns);\n    } else {\n      this.selectedMetricCells = {};\n    }\n    if (!this.selectedMetricCells[item]) {\n      this.selectedMetricCells[item] = [cellIndex];\n    } else {\n      this.selectedMetricCells[item].push(cellIndex);\n    }\n    if(item.spanningColumns) {\n      this.selectedMetrics.push(item);\n      this.selectedColumns.push(item.spanningColumns);\n    } else {\n      this.selectedMetrics.push(this.project.overlayModels.metricsOverlayModel.metricColumnNames[cellIndex].metrics[item]);\n      this.selectedColumns.push(this.project.overlayModels.metricsOverlayModel.metricColumnNames[cellIndex].columnName);\n    }\n    this.onOverviewMetricSelected.emit({metrics: this.selectedMetrics, columns: this.selectedColumns});\n    this.tableHeightChanged.emit(this.colHead.nativeElement.getBoundingClientRect().height + this.spanHead.nativeElement.getBoundingClientRect().height);\n  }\n\n  private onClickRect($event: MouseEvent) {\n    let rect:any = $event.target;\n    this.highlightedRows = [];\n    this.highlightedRows.push(rect.__data__.index);\n    this.scrollToRow(rect.__data__.index);\n    this.highlightRows();\n  }\n\n  public scrollRows(rows: number[]) {\n    this.disabled = true;\n    this.highlightedRows = [];\n    for (let it in rows) {\n      this.highlightedRows.push(rows[it]%this.itemsPerPage);\n    }\n    if(rows[0] < this.rowsFrom || rows[0] > (this.rowsFrom + this.itemsPerPage)) {\n      this.page = Math.floor(rows[0]/this.itemsPerPage)+1;\n      this.rowsFrom = ( (this.page-1) * this.itemsPerPage);\n    } else {\n      this.highlightRows();\n      this.scrollToRow(rows[0]);\n    }\n  }\n\n  private highlightRows() {\n    if(this.highlightedRows && this.highlightedRows.length > 0) {\n      d3.select(this.dataBody.nativeElement).selectAll('tr').classed('highlight', false);\n      for (let rowIdx of this.highlightedRows) {\n        let truncRow = rowIdx%this.itemsPerPage;\n        d3.select(this.dataBody.nativeElement.childNodes[truncRow + 2]).classed('highlight', true);\n      }\n    }\n  }\n\n  private scrollToRow(row: number) {\n    let truncRow = row%this.itemsPerPage;\n    let selectedRow = this.dataBody.nativeElement.childNodes[truncRow + 2];\n    let scrollHeight = selectedRow.offsetTop - this.dataBody.nativeElement.offsetTop;\n    let duration = (Math.abs(this.dataBody.nativeElement.scrollTop - scrollHeight))*0.5;\n\n    d3.select('tbody.metrics-overview')\n      .transition()\n      .duration(duration)\n      .ease(d3.easeLinear)\n      .tween('scroll', (offset:number, {}) => {\n        let i = d3.interpolateNumber(this.dataBody.nativeElement.scrollTop, scrollHeight);\n        return t => this.dataBody.nativeElement.scrollTop = i(t);\n      });\n  }\n\n  public changePage($event: MouseEvent) {\n    this.highlightedRows = [];\n    this.scrollToRow(0);\n    this.disabled = true;\n  }\n\n  // public checkHighlighted(rowIndex: number): string {\n  //   if (this.highlightedRows && this.highlightedRows.indexOf(rowIndex) != -1) {\n  //     return 'highlight';\n  //   }\n  // }\n\n  public checkValues(item: any, cellIndex: any): string {\n    if (this.selectedMetricCells[item]) {\n      if (this.selectedMetricCells[item].indexOf(cellIndex) >= 0)\n        return 'active';\n    }\n  }\n\n  public handleSelectionUpdated($event: any) {\n    console.log(\"selection updated... do something?\");\n  }\n\n  public handleSort($event: MouseEvent, sortBy: string) {\n    this.sortEmitter.emit(sortBy);\n  }\n\n  // public updateTableOverlay() {\n  //   this.tableOverlay.fillCols();\n  //   this.tableOverlay.fillScrollVis();\n  //   this.tableOverlay.updateOverlayPositions();\n  // }\n\n  deleteMetric(metric: Metric) {\n    console.log('test delete metric' + metric.name);\n    this.openRefineService.deleteMetric(this.projectId, metric, this.contextColumn).subscribe(d => console.log(d));\n  }\n\n  private calculateColWidths() {\n    if (this.headerCols && this.colOffset.length > 0) {\n      for (let i = 1; i < this.headerCols.nativeElement.children.length; ++i) {\n        if (this.colWidths[i] < this.headerCols.nativeElement.children[i].offsetWidth) {\n          this.colWidths[i] = this.headerCols.nativeElement.children[i].offsetWidth;\n        }\n      }\n    }\n    if (this.headerCols && this.bodyCols && this.colOffset.length == 0) {\n      this.colWidths = [];\n      \n      // push first empty column width\n      this.colWidths.push(this.headerCols.nativeElement.children[0].offsetWidth);\n\n      for (let i = 1; i < this.bodyCols.nativeElement.children.length; ++i) {\n        this.colWidths.push(this.bodyCols.nativeElement.children[i].offsetWidth);\n      }\n\n      this.colOffset = [];\n      this.colOffset.push(0);\n      for (let metricColumn of Object.entries(this.project.overlayModels.metricsOverlayModel.metrics)) {\n        let offsetWidth = 4;\n        for (let key of Object.keys(metricColumn[1])) {\n          if (metricColumn[1][key].dirtyIndices) {\n            offsetWidth += 12;\n          }\n        }\n        this.colOffset.push(offsetWidth);\n      }\n      if (this.project.overlayModels.metricsOverlayModel.spanningMetrics) {\n        for (let spanMetric of this.project.overlayModels.metricsOverlayModel.spanningMetrics) {\n          for (let columnName of spanMetric.spanningColumns) {\n            for (let i = 0; i < this.project.overlayModels.metricsOverlayModel.metricColumnNames.length; i++) {\n              if (this.project.overlayModels.metricsOverlayModel.metricColumnNames[i].columnName === columnName)\n                this.colOffset[i+1] += 12;\n            }\n          }\n        }\n      }\n      for (let i = 0; i < this.colWidths.length; ++i) {\n        this.colWidths[i] += this.colOffset[i];\n      }\n      \n      d3.selectAll('table.metrics-overview thead tr.overview-row th')\n        .data(this.colWidths)\n        .each(function(data, index) {\n          d3.select(this).select('svg')\n            .style('paddingTop', 0)\n            .style('paddingBottom', 0)\n            .style('paddingRight', 0)\n            .style('paddingLeft', 6);\n        });\n      d3.selectAll('table.metrics-overview thead tr.column-names *')\n        .data(this.colWidths)\n        .each(function(data, index) {\n          d3.select(this)\n            .style('paddingTop', 0)\n            .style('paddingBottom', 0)\n            .style('paddingRight', 0)\n            .style('paddingLeft', 6);\n      });\n      this.tableOverlay.fillCols();\n      this.tableOverlay.fillScrollVis();\n    }\n    if (this.tableOverlay) {\n      this.tableOverlay.updateOverlayPositions();\n    }\n    if (this.colHead && this.dataBody) {\n        let colBox = this.colHead.nativeElement.getBoundingClientRect();\n        this.overlayOffsetTop = colBox.height;\n        this.overlayWidth = colBox.width;\n        this.bodyHeight = this.dataBody.nativeElement.getBoundingClientRect().height;\n      }\n  }\n}\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3NoYXJlZC9zcGFuLXF1YWxpdHktaGVhZGVyLWNvbC9zcGFuLXF1YWxpdHktaGVhZGVyLWNvbC5jb21wb25lbnQuY3NzIn0= */\"","import { Component, OnChanges, SimpleChanges, Input, ElementRef } from '@angular/core';\n\nimport * as d3 from 'd3';\n\n@Component({\n  selector: '[span-metric-col]',\n  template: '<svg width=\"0\"></svg>',\n  styleUrls: ['./span-quality-header-col.component.css']\n})\nexport class SpanQualityHeaderColComponent implements OnChanges {\n\n  @Input() private metricCol\n  @Input() private metric;\n  @Input() private tooltip;\n  @Input() private spanMetricColors;\n  @Input() private metricsOverlayModel;\n  @Input() private colWidths;\n  \n  private host;\n  private htmlElement: HTMLElement;\n\n  constructor(private element: ElementRef) {\n    this.htmlElement = this.element.nativeElement;\n    this.host = d3.select(this.element.nativeElement);\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (changes.colWidths && this.colWidths.length > 0) {\n      let cellWidth = this.htmlElement.parentElement.offsetWidth - (this.colWidths[0]) - 1;\n      let svg = d3.select(this.htmlElement).select(\"svg\");\n\n      let div = d3.select(\"body\").append(\"div\")\n        .attr(\"class\", \"d3tooltip\")\n        .style(\"opacity\", 0);\n      svg.data(this.metric);\n      svg.attr(\"width\", cellWidth)\n        .attr(\"height\", 26)\n        .on(\"mouseover\", d => {\n          if(this.metric) {\n            let currentMetric = this.metric;\n            let evalTuplesCount = currentMetric.evalTuples.length;\n            if(currentMetric.spanningEvaluable) \n              evalTuplesCount++;\n            \n            div.transition()\n              .duration(100)\n              .style(\"opacity\", .9);\n            div.html(function(d) {\n                var text = \"<span style='color:steelblue'>\" + currentMetric.name + \"</span><br>\" +\n                  \"Metric Value: <span style='color:steelblue'>\" + currentMetric.measure + \"</span><br>\" + \n                  \"Number of Checks: <span style='color:steelblue'>\" + evalTuplesCount + \"</span><br>\";\n                if(currentMetric.dirtyIndices != null) {\n                  text += \"Erroneous Entries: <span style='color:steelblue'>\" + currentMetric.dirtyIndices.length + \"</span><br>\";\n                }\n                text += \"Data Type: <span style='color:steelblue'>\" + currentMetric.datatype + \"</span>\";\n                return text;\n              });\n          }\n        })\n        .on(\"mouseout\", () => {\n          div.transition()\n            .duration(100)\n            .style(\"opacity\", 0);\n        })\n        .on(\"mouseleave\", () => {\n          div.transition()\n            .duration(100)\n            .style(\"opacity\", 0);\n        });\n\n      svg.call(this.tooltip);\n\n      if(this.metric) {\n        svg.selectAll(\"rect\").remove();\n        let rect = svg.append(\"rect\")\n          .classed(\"metric\", true)\n          .attr(\"height\", 26)\n          .attr(\"width\", this.metric.measure * cellWidth)\n          .style(\"fill\", (d, i, siblings) => {\n            if(this.spanMetricColors[this.metric.name])\n              return this.spanMetricColors[this.metric.name];\n            return \"#ce6dbd\";\n          });\n      }\n    }\n  }\n\n}\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3Rlc3QvbWV0cmljLXByZXZpZXcvbWV0cmljLXByZXZpZXcuY29tcG9uZW50LnNhc3MifQ== */\"","import { Component, OnInit, OnChanges, Input, SimpleChanges, ElementRef } from '@angular/core';\n\nimport { OpenRefineService } from '../../shared/open-refine/open-refine.service';\nimport { OpenRefineProject } from '../../shared/open-refine/model/open-refine-project';\n\nimport * as d3 from 'd3';\n\n@Component({\n  selector: 'metric-preview',\n  templateUrl: './metric-preview.component.html',\n  styleUrls: ['./metric-preview.component.sass']\n})\nexport class MetricPreviewComponent implements OnInit, OnChanges {\n\n  @Input() private projectId: string;\n  @Input() private project: OpenRefineProject;\n  \n  @Input() private svgHeight:number;\n\n  private htmlElement: HTMLElement;\n  \n  private columnMetricColors: any;\n  private spanMetricColors: any;\n\n  constructor(private element: ElementRef, private openRefineService: OpenRefineService) {\n    this.htmlElement = this.element.nativeElement;\n  }\n\n  ngOnInit() {\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if(changes[\"projectId\"] && !this.project) {\n      this.openRefineService.getRefineProject(this.projectId).subscribe(\n        (project:any) => {\n          // console.log(project.overlayModels[\"metricsOverlayModel\"]);\n          this.project = project;\n          this.drawMetricOverview();\n        },\n        error => {\n          console.log(error);\n        }\n      );\n    } else if (changes[\"project\"]) {\n      this.drawMetricOverview();\n    }\n  }\n\n  private drawMetricOverview() {\n    let svg = d3.select(this.htmlElement).select(\"svg\");\n\n    if(this.project.overlayModels[\"metricsOverlayModel\"]) {\n      let overlayModel = this.project.overlayModels[\"metricsOverlayModel\"];\n\n      let colorbrewer = require('colorbrewer');\n      let colColors = colorbrewer.Reds[overlayModel.availableMetrics.length];\n      let spanColors = colorbrewer.Oranges[overlayModel.availableMetrics.length];\n      this.columnMetricColors = {};\n      this.spanMetricColors = {};\n      for(let m in overlayModel.availableMetrics) {\n        this.columnMetricColors[overlayModel.availableMetrics[m]] = colColors[m];\n      }\n      for (let m in overlayModel.availableSpanningMetrics) {\n        this.spanMetricColors[overlayModel.availableSpanningMetrics[m]] = spanColors[m];\n      }\n\n      let stack = d3.stack().keys(overlayModel.availableMetrics) //.concat(this.metricsOverlayModel.availableSpanningMetrics)\n        .order(d3.stackOrderNone)\n        .offset(d3.stackOffsetNone)\n        .value(function(d, key) {\n          if(d) {\n            if (d.metrics && d.metrics[key])\n              return d.metrics[key].measure;\n          }\n        });\n\n      let metrics = stack(<any[]>overlayModel.metricColumnNames);\n      var bandScale = d3.scaleBand()\n        .domain(this.project.columnModel.columns.map(function(d) { return d.name }))\n        .range([0, 500])\n        .padding(0);\n      var y = d3.scaleLinear().domain([0,overlayModel.availableMetrics.length]).range([this.svgHeight, 0])\n      \n      let colorrange = [\"#B30000\", \"#E34A33\", \"#FC8D59\", \"#FDBB84\", \"#FDD49E\", \"#FEF0D9\"];\n\n      // let area = d3.area()\n      //   .x(function(d:any) {\n      //     console.log(bandScale(d.data.columnName));\n      //     return bandScale(d.data.columnName); \n      //   })\n      //   .y0(function(d:any) {\n      //     // console.log(y(d[0]));\n      //     return y(d[1]); \n      //   })\n      //   .y1(function(d:any) {\n      //     // console.log(y(d[1]));\n      //     return y(d[0]); \n      //   });\n\n      svg.selectAll(\"g.metric\")\n        .data(metrics)\n        .enter().append(\"g\")\n          .attr(\"class\", \"metric\")\n        .selectAll(\"area\")\n        .data((d:any) => {\n          return d.map((obj:any, idx: any, data:any) => {\n            return {\n              0: obj[0],\n              1: obj[1],\n              columnName: obj.data.columnName,\n              metric: obj.data.metrics[data.key]\n            }\n          });\n        })\n        .enter()\n        .append(\"rect\")\n          .attr(\"x\", (d:any, i:number, any:any) => {\n            // console.log(bandScale(d.columnName));\n            return bandScale(d.columnName);\n          })\n          .attr(\"y\", (d:any) => { \n            if(!isNaN(d[1]))\n              return y(d[1]);\n            else return (y(0));\n          })\n          .attr(\"height\", (d:any) => {\n            if(!isNaN(d[1]))\n              return y(d[0]) - y(d[1]);\n            else return 0;\n          })\n          .attr(\"width\", bandScale.bandwidth())\n          .attr(\"fill\", (d:any) => {\n            if(d && d.metric) {\n              if(this.columnMetricColors[d.metric.name])\n                return this.columnMetricColors[d.metric.name];\n              if(this.spanMetricColors[d.metric.name])\n                return this.spanMetricColors[d.metric.name];\n            }\n            return 0;\n          });\n        // .append(\"path\")\n        //   .data(metrics)\n        //   .attr(\"class\", \"area\")\n        //   .attr(\"d\", area);\n\n    }\n  }\n}\n","// The file contents for the current environment will overwrite these during build.\n// The build system defaults to the dev environment which uses `environment.ts`, but if you do\n// `ng build --env=prod` then `environment.prod.ts` will be used instead.\n// The list of which env maps to which file can be found in `.angular-cli.json`.\n\nexport const environment = {\n  production: false\n};\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule);\n"],"sourceRoot":""}